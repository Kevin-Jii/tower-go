basePath: /api/v1
definitions:
  controller.BatchDeleteReq:
    properties:
      ids:
        items:
          type: integer
        type: array
    required:
    - ids
    type: object
  controller.DeleteFileReq:
    properties:
      dir:
        description: 目录路径
        type: string
      names:
        description: 文件名列表
        items:
          type: string
        type: array
    required:
    - names
    type: object
  controller.LoginRequest:
    properties:
      password:
        description: 密码至少6位
        minLength: 6
        type: string
      phone:
        description: 手机号必须是11位
        type: string
    required:
    - password
    - phone
    type: object
  controller.LoginResponse:
    properties:
      expires_in:
        description: 过期时间（秒）
        type: integer
      strategy:
        description: 会话策略 single/multi
        type: string
      token:
        type: string
      token_type:
        description: 固定 "Bearer"
        type: string
      user_info:
        $ref: '#/definitions/model.User'
    type: object
  http.Response:
    properties:
      code:
        type: integer
      data: {}
      error:
        type: string
      message:
        type: string
    type: object
  model.AdjustBalanceReq:
    properties:
      amount:
        type: number
      remark:
        type: string
      type:
        allOf:
        - $ref: '#/definitions/model.ChangeTypeEnum'
        description: 4=调增 5=调减
        enum:
        - 4
        - 5
      version:
        description: 乐观锁版本号
        type: integer
    required:
    - amount
    - type
    type: object
  model.AssignMenusToRoleReq:
    properties:
      menu_ids:
        items:
          type: integer
        type: array
      perms:
        additionalProperties:
          format: int32
          type: integer
        description: 菜单ID -> 权限位映射
        type: object
      role_id:
        type: integer
    required:
    - menu_ids
    - role_id
    type: object
  model.AssignStoreMenusReq:
    properties:
      menu_ids:
        items:
          type: integer
        type: array
      perms:
        additionalProperties:
          format: int32
          type: integer
        description: 菜单ID -> 权限位映射
        type: object
      role_id:
        type: integer
      store_id:
        type: integer
    required:
    - menu_ids
    - role_id
    - store_id
    type: object
  model.ChangeTypeEnum:
    enum:
    - 1
    - 2
    - 3
    - 4
    - 5
    type: integer
    x-enum-comments:
      ChangeTypeAdjustAdd: 调增
      ChangeTypeAdjustLess: 调减
      ChangeTypeConsume: 消费
      ChangeTypeRecharge: 充值
      ChangeTypeRefund: 退款
    x-enum-descriptions:
    - 充值
    - 消费
    - 退款
    - 调增
    - 调减
    x-enum-varnames:
    - ChangeTypeRecharge
    - ChangeTypeConsume
    - ChangeTypeRefund
    - ChangeTypeAdjustAdd
    - ChangeTypeAdjustLess
  model.ChannelStatsItem:
    properties:
      amount:
        description: 销售额
        type: number
      channel:
        description: 渠道编码
        type: string
      channel_name:
        description: 渠道名称
        type: string
      orders:
        description: 订单数
        type: integer
      percent:
        description: 占比
        type: number
    type: object
  model.CopyStoreMenusReq:
    properties:
      from_store_id:
        type: integer
      role_id:
        type: integer
      to_store_id:
        type: integer
    required:
    - from_store_id
    - role_id
    - to_store_id
    type: object
  model.CreateDictDataReq:
    properties:
      css_class:
        maxLength: 100
        type: string
      is_default:
        type: boolean
      label:
        maxLength: 100
        type: string
      list_class:
        maxLength: 100
        type: string
      remark:
        maxLength: 500
        type: string
      sort:
        type: integer
      status:
        enum:
        - 0
        - 1
        type: integer
      type_code:
        maxLength: 100
        type: string
      value:
        maxLength: 100
        type: string
    required:
    - label
    - type_code
    - value
    type: object
  model.CreateDictTypeReq:
    properties:
      code:
        maxLength: 100
        type: string
      name:
        maxLength: 100
        type: string
      remark:
        maxLength: 500
        type: string
      status:
        enum:
        - 0
        - 1
        type: integer
    required:
    - code
    - name
    type: object
  model.CreateDingTalkBotReq:
    properties:
      agent_id:
        description: stream 模式推送消息用
        type: string
      bot_type:
        description: webhook 或 stream (默认 webhook)
        enum:
        - webhook
        - stream
        type: string
      client_id:
        description: stream 模式必填
        type: string
      client_secret:
        description: stream 模式必填
        type: string
      is_enabled:
        type: boolean
      msg_type:
        type: string
      name:
        description: 可选，如果不提供则自动生成（门店名称_机器人ID）
        type: string
      remark:
        type: string
      robot_code:
        description: 钉钉机器人编码(robotCode)
        type: string
      secret:
        description: webhook 模式可选
        type: string
      store_id:
        type: integer
      webhook:
        description: webhook 模式必填
        type: string
    type: object
  model.CreateInventoryOrderItemReq:
    properties:
      expiry_date:
        description: 截止日期
        type: string
      product_id:
        type: integer
      production_date:
        description: 生产日期
        type: string
      quantity:
        type: number
      remark:
        maxLength: 500
        type: string
    required:
    - product_id
    - quantity
    type: object
  model.CreateInventoryOrderReq:
    properties:
      items:
        items:
          $ref: '#/definitions/model.CreateInventoryOrderItemReq'
        minItems: 1
        type: array
      reason:
        maxLength: 100
        type: string
      remark:
        maxLength: 500
        type: string
      type:
        enum:
        - 1
        - 2
        type: integer
    required:
    - items
    - reason
    - type
    type: object
  model.CreateMemberReq:
    properties:
      phone:
        type: string
      uid:
        type: string
    required:
    - phone
    - uid
    type: object
  model.CreateMenuReq:
    properties:
      component:
        type: string
      icon:
        type: string
      name:
        type: string
      parent_id:
        type: integer
      path:
        type: string
      permission:
        type: string
      remark:
        type: string
      sort:
        type: integer
      status:
        enum:
        - 0
        - 1
        type: integer
      title:
        type: string
      type:
        enum:
        - 1
        - 2
        - 3
        type: integer
      visible:
        enum:
        - 0
        - 1
        type: integer
    required:
    - name
    - title
    - type
    type: object
  model.CreateMessageTemplateReq:
    properties:
      code:
        maxLength: 50
        type: string
      content:
        type: string
      description:
        maxLength: 500
        type: string
      is_enabled:
        type: boolean
      name:
        maxLength: 100
        type: string
      title:
        maxLength: 200
        type: string
      variables:
        type: string
    required:
    - code
    - content
    - name
    type: object
  model.CreatePurchaseOrderItemReq:
    properties:
      product_id:
        type: integer
      quantity:
        type: number
      remark:
        maxLength: 200
        type: string
    required:
    - product_id
    - quantity
    type: object
  model.CreatePurchaseOrderReq:
    properties:
      items:
        items:
          $ref: '#/definitions/model.CreatePurchaseOrderItemReq'
        minItems: 1
        type: array
      order_date:
        description: '格式: 2024-01-01'
        type: string
      remark:
        maxLength: 500
        type: string
    required:
    - items
    - order_date
    type: object
  model.CreateRechargeOrderReq:
    properties:
      giftAmount:
        type: number
      memberId:
        type: integer
      payAmount:
        type: number
    required:
    - memberId
    - payAmount
    type: object
  model.CreateStoreAccountItemReq:
    properties:
      amount:
        minimum: 0
        type: number
      price:
        minimum: 0
        type: number
      product_id:
        type: integer
      quantity:
        type: number
      remark:
        maxLength: 500
        type: string
      spec:
        maxLength: 100
        type: string
      unit:
        maxLength: 20
        type: string
    required:
    - product_id
    - quantity
    type: object
  model.CreateStoreAccountReq:
    properties:
      account_date:
        type: string
      channel:
        maxLength: 50
        type: string
      items:
        items:
          $ref: '#/definitions/model.CreateStoreAccountItemReq'
        minItems: 1
        type: array
      notify_image:
        description: 通知图片URL（前端生成）
        type: string
      order_no:
        maxLength: 100
        type: string
      remark:
        maxLength: 500
        type: string
      tag_code:
        maxLength: 50
        type: string
      tag_name:
        maxLength: 100
        type: string
    required:
    - channel
    - items
    type: object
  model.CreateStoreReq:
    properties:
      address:
        type: string
      business_hours:
        type: string
      contact_person:
        type: string
      name:
        type: string
      phone:
        type: string
      remark:
        type: string
    required:
    - name
    type: object
  model.CreateSupplierCategoryReq:
    properties:
      name:
        maxLength: 100
        type: string
      sort:
        type: integer
      supplier_id:
        type: integer
    required:
    - name
    - supplier_id
    type: object
  model.CreateSupplierProductReq:
    properties:
      category_id:
        type: integer
      name:
        maxLength: 200
        type: string
      price:
        minimum: 0
        type: number
      remark:
        maxLength: 500
        type: string
      spec:
        maxLength: 100
        type: string
      supplier_id:
        type: integer
      unit:
        maxLength: 20
        type: string
    required:
    - category_id
    - name
    - supplier_id
    - unit
    type: object
  model.CreateSupplierReq:
    properties:
      contact_email:
        description: 联系邮箱
        maxLength: 100
        type: string
      contact_person:
        description: 联系人
        maxLength: 100
        type: string
      contact_phone:
        description: 联系电话
        maxLength: 20
        type: string
      remark:
        description: 备注
        type: string
      supplier_address:
        description: 地址
        maxLength: 500
        type: string
      supplier_name:
        description: 供应商名称
        maxLength: 200
        type: string
    required:
    - supplier_name
    type: object
  model.CreateUserReq:
    properties:
      email:
        description: 可选，但如果提供则必须是有效的邮箱
        type: string
      gender:
        description: 1男 2女，未传使用默认1
        enum:
        - 1
        - 2
        type: integer
      nickname:
        type: string
      password:
        description: 密码至少6位
        minLength: 6
        type: string
      phone:
        description: 手机号验证
        type: string
      role_id:
        description: 角色ID，不传默认普通员工
        type: integer
      username:
        description: 强制要求非空
        type: string
    required:
    - password
    - phone
    - username
    type: object
  model.DashboardStats:
    properties:
      inventory:
        allOf:
        - $ref: '#/definitions/model.InventoryStats'
        description: 库存统计
      sales:
        allOf:
        - $ref: '#/definitions/model.SalesStats'
        description: 销售统计
    type: object
  model.DictData:
    properties:
      created_at:
        type: string
      css_class:
        type: string
      id:
        type: integer
      is_default:
        type: boolean
      label:
        type: string
      list_class:
        type: string
      remark:
        type: string
      sort:
        type: integer
      status:
        type: integer
      type_code:
        type: string
      type_id:
        type: integer
      updated_at:
        type: string
      value:
        type: string
    type: object
  model.DictType:
    properties:
      code:
        type: string
      created_at:
        type: string
      id:
        type: integer
      name:
        type: string
      remark:
        type: string
      status:
        type: integer
      updated_at:
        type: string
    type: object
  model.DingTalkBot:
    properties:
      agent_id:
        description: 应用 AgentId (stream 模式推送消息用)
        type: string
      bot_type:
        description: '机器人类型: webhook, stream'
        type: string
      client_id:
        description: AppKey/SuiteKey (stream 模式)
        type: string
      client_secret:
        description: AppSecret/SuiteSecret (stream 模式)
        type: string
      created_at:
        type: string
      id:
        type: integer
      is_enabled:
        description: 是否启用
        type: boolean
      msg_type:
        description: '消息类型: text, markdown'
        type: string
      name:
        description: 机器人名称
        type: string
      remark:
        description: 备注
        type: string
      robot_code:
        description: 钉钉机器人编码(robotCode)
        type: string
      secret:
        description: 签名密钥（webhook 模式）
        type: string
      store:
        allOf:
        - $ref: '#/definitions/model.Store'
        description: 门店关联
      store_id:
        description: 所属门店（null 表示全局）
        type: integer
      updated_at:
        type: string
      webhook:
        description: Webhook 地址（webhook 模式）
        type: string
    type: object
  model.Gallery:
    properties:
      category:
        type: string
      created_at:
        type: string
      id:
        type: integer
      mime_type:
        type: string
      name:
        type: string
      path:
        type: string
      remark:
        type: string
      size:
        type: integer
      store_id:
        type: integer
      updated_at:
        type: string
      upload_by:
        type: integer
      upload_by_name:
        type: string
      url:
        type: string
    type: object
  model.InventoryOrder:
    properties:
      created_at:
        type: string
      id:
        type: integer
      item_count:
        type: integer
      items:
        items:
          $ref: '#/definitions/model.InventoryOrderItem'
        type: array
      operator_id:
        type: integer
      operator_name:
        type: string
      operator_phone:
        type: string
      order_no:
        type: string
      reason:
        type: string
      remark:
        type: string
      store_id:
        type: integer
      store_name:
        type: string
      total_quantity:
        type: number
      type:
        type: integer
      updated_at:
        type: string
    type: object
  model.InventoryOrderItem:
    properties:
      created_at:
        type: string
      expiry_date:
        type: string
      id:
        type: integer
      order_id:
        type: integer
      product_id:
        type: integer
      product_name:
        type: string
      production_date:
        type: string
      quantity:
        type: number
      remark:
        type: string
      unit:
        type: string
    type: object
  model.InventoryStats:
    properties:
      today_in:
        description: 今日入库
        type: number
      today_out:
        description: 今日出库
        type: number
      total_products:
        description: 商品种类数
        type: integer
      total_quantity:
        description: 总库存数量
        type: number
      total_records:
        description: 出入库记录数
        type: integer
    type: object
  model.InventoryWithProduct:
    properties:
      id:
        type: integer
      product_id:
        type: integer
      product_name:
        type: string
      quantity:
        type: number
      store_id:
        type: integer
      store_name:
        type: string
      unit:
        type: string
    type: object
  model.Member:
    properties:
      balance:
        type: number
      createTime:
        type: string
      id:
        type: integer
      level:
        type: integer
      phone:
        type: string
      points:
        type: integer
      uid:
        type: string
      updateTime:
        type: string
      version:
        type: integer
    type: object
  model.Menu:
    properties:
      children:
        description: 关联
        items:
          $ref: '#/definitions/model.Menu'
        type: array
      component:
        type: string
      created_at:
        type: string
      icon:
        type: string
      id:
        type: integer
      name:
        type: string
      parent_id:
        type: integer
      path:
        type: string
      permission:
        type: string
      permissions:
        description: 用户对该菜单的权限（运行时填充）
        type: integer
      remark:
        type: string
      sort:
        type: integer
      status:
        type: integer
      title:
        type: string
      type:
        type: integer
      updated_at:
        type: string
      visible:
        type: integer
    type: object
  model.MessageTemplate:
    properties:
      code:
        type: string
      content:
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: integer
      is_enabled:
        type: boolean
      name:
        type: string
      title:
        type: string
      updated_at:
        type: string
      variables:
        type: string
    type: object
  model.PayRechargeOrderReq:
    properties:
      orderNo:
        type: string
    required:
    - orderNo
    type: object
  model.PayStatusEnum:
    enum:
    - 0
    - 1
    - 2
    - 3
    type: integer
    x-enum-comments:
      PayStatusCancelled: 已取消
      PayStatusPaid: 已支付
      PayStatusPending: 待支付
      PayStatusRefunded: 已退款
    x-enum-descriptions:
    - 待支付
    - 已支付
    - 已取消
    - 已退款
    x-enum-varnames:
    - PayStatusPending
    - PayStatusPaid
    - PayStatusCancelled
    - PayStatusRefunded
  model.PurchaseOrder:
    properties:
      created_at:
        type: string
      created_by:
        type: integer
      creator:
        $ref: '#/definitions/model.User'
      id:
        type: integer
      items:
        items:
          $ref: '#/definitions/model.PurchaseOrderItem'
        type: array
      order_date:
        type: string
      order_no:
        type: string
      remark:
        type: string
      status:
        type: integer
      store:
        $ref: '#/definitions/model.Store'
      store_id:
        type: integer
      total_amount:
        type: number
      updated_at:
        type: string
    type: object
  model.PurchaseOrderItem:
    properties:
      amount:
        type: number
      created_at:
        type: string
      id:
        type: integer
      order_id:
        type: integer
      product:
        $ref: '#/definitions/model.SupplierProduct'
      product_id:
        type: integer
      quantity:
        type: number
      remark:
        type: string
      supplier:
        $ref: '#/definitions/model.Supplier'
      supplier_id:
        type: integer
      unit_price:
        type: number
      updated_at:
        type: string
    type: object
  model.RechargeOrder:
    properties:
      createTime:
        type: string
      giftAmount:
        type: number
      id:
        type: integer
      memberId:
        type: integer
      orderNo:
        type: string
      payAmount:
        type: number
      payStatus:
        $ref: '#/definitions/model.PayStatusEnum'
      payTime:
        type: string
      totalAmount:
        type: number
      updateTime:
        type: string
    type: object
  model.Role:
    properties:
      code:
        description: 角色代码：admin(总部管理员), store_admin(门店管理员), staff(普通员工)
        type: string
      created_at:
        type: string
      description:
        description: 角色描述
        type: string
      id:
        type: integer
      name:
        description: 角色名称
        type: string
      status:
        description: 状态：1=启用 0=禁用
        type: integer
      updated_at:
        type: string
    type: object
  model.SalesStats:
    properties:
      avg_amount:
        description: 平均客单价
        type: number
      month_amount:
        description: 本月销售额
        type: number
      period_label:
        description: 周期标签
        type: string
      today_amount:
        description: 今日销售额
        type: number
      total_amount:
        description: 总销售额
        type: number
      total_orders:
        description: 总订单数
        type: integer
      total_qty:
        description: 总销售数量
        type: number
    type: object
  model.SalesTrendItem:
    properties:
      amount:
        description: 销售额
        type: number
      date:
        description: 日期
        type: string
      orders:
        description: 订单数
        type: integer
    type: object
  model.Store:
    properties:
      address:
        description: 门店地址
        type: string
      business_hours:
        description: 营业时间
        type: string
      contact_person:
        description: 联系人
        type: string
      created_at:
        type: string
      id:
        type: integer
      name:
        description: 门店名称
        type: string
      phone:
        description: 联系电话
        type: string
      remark:
        description: 备注
        type: string
      status:
        description: 状态：1=正常，2=停业
        type: integer
      store_code:
        description: 门店编码 JWXXXX
        type: string
      updated_at:
        type: string
    type: object
  model.StoreAccount:
    properties:
      account_date:
        type: string
      account_no:
        type: string
      channel:
        type: string
      created_at:
        type: string
      id:
        type: integer
      item_count:
        type: integer
      items:
        items:
          $ref: '#/definitions/model.StoreAccountItem'
        type: array
      operator:
        $ref: '#/definitions/model.User'
      operator_id:
        type: integer
      order_no:
        type: string
      remark:
        type: string
      store:
        allOf:
        - $ref: '#/definitions/model.Store'
        description: 关联
      store_id:
        type: integer
      tag_code:
        type: string
      tag_name:
        type: string
      total_amount:
        type: number
      updated_at:
        type: string
    type: object
  model.StoreAccountItem:
    properties:
      account_id:
        type: integer
      amount:
        type: number
      created_at:
        type: string
      id:
        type: integer
      price:
        type: number
      product_id:
        type: integer
      product_name:
        type: string
      quantity:
        type: number
      remark:
        type: string
      spec:
        type: string
      unit:
        type: string
    type: object
  model.Supplier:
    properties:
      contact_email:
        type: string
      contact_person:
        type: string
      contact_phone:
        type: string
      created_at:
        type: string
      id:
        type: integer
      remark:
        type: string
      status:
        type: integer
      supplier_address:
        type: string
      supplier_code:
        type: string
      supplier_name:
        type: string
      updated_at:
        type: string
    type: object
  model.SupplierCategory:
    properties:
      created_at:
        type: string
      id:
        type: integer
      name:
        type: string
      sort:
        type: integer
      status:
        type: integer
      supplier:
        $ref: '#/definitions/model.Supplier'
      supplier_id:
        type: integer
      updated_at:
        type: string
    type: object
  model.SupplierProduct:
    properties:
      category:
        $ref: '#/definitions/model.SupplierCategory'
      category_id:
        type: integer
      created_at:
        type: string
      id:
        type: integer
      name:
        type: string
      price:
        type: number
      remark:
        type: string
      spec:
        type: string
      status:
        type: integer
      supplier:
        $ref: '#/definitions/model.Supplier'
      supplier_id:
        type: integer
      unit:
        type: string
      updated_at:
        type: string
    type: object
  model.UpdateDictDataReq:
    properties:
      css_class:
        maxLength: 100
        type: string
      is_default:
        type: boolean
      label:
        maxLength: 100
        type: string
      list_class:
        maxLength: 100
        type: string
      remark:
        maxLength: 500
        type: string
      sort:
        type: integer
      status:
        enum:
        - 0
        - 1
        type: integer
      value:
        maxLength: 100
        type: string
    type: object
  model.UpdateDictTypeReq:
    properties:
      code:
        maxLength: 100
        type: string
      name:
        maxLength: 100
        type: string
      remark:
        maxLength: 500
        type: string
      status:
        enum:
        - 0
        - 1
        type: integer
    type: object
  model.UpdateDingTalkBotReq:
    properties:
      agent_id:
        type: string
      bot_type:
        type: string
      client_id:
        type: string
      client_secret:
        type: string
      is_enabled:
        type: boolean
      msg_type:
        type: string
      name:
        type: string
      remark:
        type: string
      robot_code:
        type: string
      secret:
        type: string
      store_id:
        type: integer
      webhook:
        type: string
    type: object
  model.UpdateGalleryReq:
    properties:
      category:
        maxLength: 50
        type: string
      name:
        maxLength: 255
        type: string
      remark:
        maxLength: 500
        type: string
    type: object
  model.UpdateInventoryReq:
    properties:
      quantity:
        minimum: 0
        type: number
      remark:
        maxLength: 500
        type: string
    required:
    - quantity
    type: object
  model.UpdateMemberReq:
    properties:
      level:
        type: integer
      phone:
        type: string
      points:
        type: integer
    type: object
  model.UpdateMenuReq:
    properties:
      component:
        type: string
      icon:
        type: string
      name:
        type: string
      parent_id:
        type: integer
      path:
        type: string
      permission:
        type: string
      remark:
        type: string
      sort:
        type: integer
      status:
        enum:
        - 0
        - 1
        type: integer
      title:
        type: string
      type:
        enum:
        - 1
        - 2
        - 3
        type: integer
      visible:
        enum:
        - 0
        - 1
        type: integer
    type: object
  model.UpdateMessageTemplateReq:
    properties:
      content:
        type: string
      description:
        maxLength: 500
        type: string
      is_enabled:
        type: boolean
      name:
        maxLength: 100
        type: string
      title:
        maxLength: 200
        type: string
      variables:
        type: string
    type: object
  model.UpdatePurchaseOrderReq:
    properties:
      remark:
        maxLength: 500
        type: string
      status:
        enum:
        - 1
        - 2
        - 3
        - 4
        type: integer
    type: object
  model.UpdateRoleReq:
    properties:
      code:
        description: 角色代码（可选）
        type: string
      description:
        description: 允许清空描述
        type: string
      name:
        description: 角色名称（可选）
        type: string
      status:
        description: 允许更新为0（禁用）
        type: integer
    type: object
  model.UpdateStoreAccountReq:
    properties:
      account_date:
        type: string
      channel:
        maxLength: 50
        type: string
      order_no:
        maxLength: 100
        type: string
      remark:
        maxLength: 500
        type: string
      tag_code:
        maxLength: 50
        type: string
      tag_name:
        maxLength: 100
        type: string
    type: object
  model.UpdateStoreReq:
    properties:
      address:
        description: 门店地址
        type: string
      business_hours:
        description: 营业时间
        type: string
      contact_person:
        description: 联系人
        type: string
      name:
        description: 门店名称
        type: string
      phone:
        description: 联系电话
        type: string
      remark:
        description: 备注
        type: string
      status:
        description: 状态：1=正常，2=停业
        type: integer
    type: object
  model.UpdateSupplierCategoryReq:
    properties:
      name:
        maxLength: 100
        type: string
      sort:
        type: integer
      status:
        enum:
        - 0
        - 1
        type: integer
    type: object
  model.UpdateSupplierProductReq:
    properties:
      category_id:
        type: integer
      name:
        maxLength: 200
        type: string
      price:
        minimum: 0
        type: number
      remark:
        maxLength: 500
        type: string
      spec:
        maxLength: 100
        type: string
      status:
        enum:
        - 0
        - 1
        type: integer
      unit:
        maxLength: 20
        type: string
    type: object
  model.UpdateSupplierReq:
    properties:
      contact_email:
        maxLength: 100
        type: string
      contact_person:
        maxLength: 100
        type: string
      contact_phone:
        maxLength: 20
        type: string
      remark:
        type: string
      status:
        enum:
        - 0
        - 1
        type: integer
      supplier_address:
        maxLength: 500
        type: string
      supplier_name:
        maxLength: 200
        type: string
    type: object
  model.UpdateUserReq:
    properties:
      email:
        type: string
      gender:
        description: 性别：1男 2女
        enum:
        - 1
        - 2
        type: integer
      nickname:
        type: string
      password:
        minLength: 6
        type: string
      phone:
        type: string
      role_id:
        description: 角色ID
        type: integer
      status:
        description: 账号状态：1=正常，2=禁用
        type: integer
      store_id:
        description: 门店ID（仅管理员可修改）
        type: integer
      username:
        type: string
    type: object
  model.User:
    properties:
      created_at:
        type: string
      email:
        type: string
      employee_no:
        description: 工号，6位数字
        type: string
      gender:
        description: 性别：1=男，2=女
        type: integer
      id:
        type: integer
      last_login_at:
        description: 记录最后登录时间（仅后端维护）
        type: string
      nickname:
        type: string
      phone:
        type: string
      role:
        allOf:
        - $ref: '#/definitions/model.Role'
        description: 角色关联
      role_id:
        description: '--- 权限管理 (RBAC) ---'
        type: integer
      status:
        description: '--- 状态与安全管理 ---'
        type: integer
      store:
        allOf:
        - $ref: '#/definitions/model.Store'
        description: 门店关联
      store_id:
        description: '--- 门店关联 ---'
        type: integer
      updated_at:
        type: string
      username:
        type: string
    type: object
  model.WalletLog:
    properties:
      balanceAfter:
        type: number
      changeAmount:
        type: number
      changeType:
        $ref: '#/definitions/model.ChangeTypeEnum'
      createTime:
        type: string
      id:
        type: integer
      memberId:
        type: integer
      relatedOrderNo:
        type: string
      remark:
        type: string
      updateTime:
        type: string
    type: object
  service.RustFSUploadResult:
    properties:
      etag:
        type: string
      name:
        type: string
      path:
        type: string
      size:
        type: integer
      url:
        type: string
    type: object
host: localhost:10024
info:
  contact:
    email: jeckwell@126.com
    name: API Support
    url: http://www.swagger.io/support
  description: Tower Go 用户管理系统 API 文档
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Tower Go API
  version: "1.0"
paths:
  /auth/login:
    post:
      consumes:
      - application/json
      description: 用户登录并获取token
      parameters:
      - description: 登录信息
        in: body
        name: login
        required: true
        schema:
          $ref: '#/definitions/controller.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 登录成功返回 token、token_type=Bearer、expires_in(秒)
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/controller.LoginResponse'
              type: object
      summary: 用户登录
      tags:
      - 认证
  /auth/register:
    post:
      consumes:
      - application/json
      description: 创建新用户账户
      parameters:
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/model.CreateUserReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      summary: 用户注册
      tags:
      - 认证
  /dict-data:
    get:
      parameters:
      - description: 字典类型编码
        in: query
        name: type_code
        type: string
      - description: 字典类型ID
        in: query
        name: type_id
        type: integer
      - description: 状态
        in: query
        name: status
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.DictData'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 根据类型获取字典数据
      tags:
      - 字典数据
    post:
      consumes:
      - application/json
      parameters:
      - description: 字典数据信息
        in: body
        name: dict
        required: true
        schema:
          $ref: '#/definitions/model.CreateDictDataReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建字典数据
      tags:
      - 字典数据
  /dict-data/{id}:
    delete:
      parameters:
      - description: 字典数据ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除字典数据
      tags:
      - 字典数据
    get:
      parameters:
      - description: 字典数据ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.DictData'
              type: object
      security:
      - Bearer: []
      summary: 获取字典数据详情
      tags:
      - 字典数据
    put:
      consumes:
      - application/json
      parameters:
      - description: 字典数据ID
        in: path
        name: id
        required: true
        type: integer
      - description: 字典数据信息
        in: body
        name: dict
        required: true
        schema:
          $ref: '#/definitions/model.UpdateDictDataReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新字典数据
      tags:
      - 字典数据
  /dict-types:
    get:
      parameters:
      - description: 关键词
        in: query
        name: keyword
        type: string
      - description: 状态
        in: query
        name: status
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.DictType'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取字典类型列表
      tags:
      - 字典类型
    post:
      consumes:
      - application/json
      parameters:
      - description: 字典类型信息
        in: body
        name: dict
        required: true
        schema:
          $ref: '#/definitions/model.CreateDictTypeReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建字典类型
      tags:
      - 字典类型
  /dict-types/{id}:
    delete:
      parameters:
      - description: 字典类型ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除字典类型
      tags:
      - 字典类型
    get:
      parameters:
      - description: 字典类型ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.DictType'
              type: object
      security:
      - Bearer: []
      summary: 获取字典类型详情
      tags:
      - 字典类型
    put:
      consumes:
      - application/json
      parameters:
      - description: 字典类型ID
        in: path
        name: id
        required: true
        type: integer
      - description: 字典类型信息
        in: body
        name: dict
        required: true
        schema:
          $ref: '#/definitions/model.UpdateDictTypeReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新字典类型
      tags:
      - 字典类型
  /dicts:
    get:
      description: 获取所有字典数据，用于前端缓存
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  additionalProperties:
                    items:
                      $ref: '#/definitions/model.DictData'
                    type: array
                  type: object
              type: object
      security:
      - Bearer: []
      summary: 获取所有字典
      tags:
      - 字典管理
  /dingtalk-bots:
    get:
      consumes:
      - application/json
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.DingTalkBot'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取钉钉机器人列表
      tags:
      - 钉钉机器人
    post:
      consumes:
      - application/json
      parameters:
      - description: 机器人配置
        in: body
        name: bot
        required: true
        schema:
          $ref: '#/definitions/model.CreateDingTalkBotReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.DingTalkBot'
              type: object
      security:
      - Bearer: []
      summary: 创建钉钉机器人配置
      tags:
      - 钉钉机器人
  /dingtalk-bots/{id}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: 机器人ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除钉钉机器人配置
      tags:
      - 钉钉机器人
    get:
      consumes:
      - application/json
      parameters:
      - description: 机器人ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.DingTalkBot'
              type: object
      security:
      - Bearer: []
      summary: 获取钉钉机器人详情
      tags:
      - 钉钉机器人
    put:
      consumes:
      - application/json
      parameters:
      - description: 机器人ID
        in: path
        name: id
        required: true
        type: integer
      - description: 机器人配置
        in: body
        name: bot
        required: true
        schema:
          $ref: '#/definitions/model.UpdateDingTalkBotReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新钉钉机器人配置
      tags:
      - 钉钉机器人
  /dingtalk-bots/{id}/test:
    post:
      consumes:
      - application/json
      parameters:
      - description: 机器人ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 测试钉钉机器人连接
      tags:
      - 钉钉机器人
  /dingtalk-bots/{id}/test-callback:
    post:
      consumes:
      - application/json
      parameters:
      - description: 机器人ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 测试 Stream 机器人接收回调
      tags:
      - 钉钉机器人
  /files/delete:
    post:
      consumes:
      - application/json
      description: 删除指定的文件
      parameters:
      - description: 删除请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/controller.DeleteFileReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除文件
      tags:
      - 文件管理
  /files/list:
    get:
      consumes:
      - application/json
      description: 获取指定目录的文件列表
      parameters:
      - description: 路径前缀
        in: query
        name: prefix
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 文件列表
      tags:
      - 文件管理
  /files/presigned-url:
    get:
      consumes:
      - application/json
      description: 获取文件的临时访问URL
      parameters:
      - description: 文件路径
        in: query
        name: path
        required: true
        type: string
      - default: 60
        description: 过期时间(分钟)
        in: query
        name: expires
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 获取预签名URL
      tags:
      - 文件管理
  /files/upload:
    post:
      consumes:
      - multipart/form-data
      description: 上传文件到RustFS对象存储
      parameters:
      - description: 文件
        in: formData
        name: file
        required: true
        type: file
      - description: 目标文件夹，如 documents
        in: formData
        name: folder
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.RustFSUploadResult'
              type: object
      security:
      - Bearer: []
      summary: 上传文件
      tags:
      - 文件管理
  /files/upload-image:
    post:
      consumes:
      - multipart/form-data
      description: 上传图片文件，仅支持jpg/png/gif/webp格式
      parameters:
      - description: 图片文件
        in: formData
        name: file
        required: true
        type: file
      - description: 图片类型：product/supplier/avatar/purchase
        in: formData
        name: type
        type: string
      - description: 门店ID（type=purchase时必填）
        in: formData
        name: store_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.RustFSUploadResult'
              type: object
      security:
      - Bearer: []
      summary: 上传图片
      tags:
      - 文件管理
  /galleries:
    get:
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 分类
        in: query
        name: category
        type: string
      - description: 关键词
        in: query
        name: keyword
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Gallery'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取图库列表
      tags:
      - 图库管理
  /galleries/{id}:
    delete:
      parameters:
      - description: 图库ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除图库
      tags:
      - 图库管理
    get:
      parameters:
      - description: 图库ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Gallery'
              type: object
      security:
      - Bearer: []
      summary: 获取图库详情
      tags:
      - 图库管理
    put:
      consumes:
      - application/json
      parameters:
      - description: 图库ID
        in: path
        name: id
        required: true
        type: integer
      - description: 更新信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.UpdateGalleryReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新图库信息
      tags:
      - 图库管理
  /galleries/batch-delete:
    post:
      consumes:
      - application/json
      parameters:
      - description: 删除请求
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/controller.BatchDeleteReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 批量删除图库
      tags:
      - 图库管理
  /galleries/upload:
    post:
      consumes:
      - multipart/form-data
      parameters:
      - description: 图片文件
        in: formData
        name: file
        required: true
        type: file
      - description: 分类(product/supplier/avatar/other)
        in: formData
        name: category
        type: string
      - description: 备注
        in: formData
        name: remark
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Gallery'
              type: object
      security:
      - Bearer: []
      summary: 上传图片到图库
      tags:
      - 图库管理
  /inventories:
    get:
      parameters:
      - description: 门店ID
        in: query
        name: store_id
        type: integer
      - description: 商品ID
        in: query
        name: product_id
        type: integer
      - description: 商品名称关键词
        in: query
        name: keyword
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.InventoryWithProduct'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 库存列表
      tags:
      - 库存管理
  /inventories/{id}:
    put:
      consumes:
      - application/json
      description: 直接修改库存数量（仅管理员）
      parameters:
      - description: 库存ID
        in: path
        name: id
        required: true
        type: integer
      - description: 库存信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/model.UpdateInventoryReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 修改库存数量
      tags:
      - 库存管理
  /inventory-orders:
    get:
      parameters:
      - description: 门店ID
        in: query
        name: store_id
        type: integer
      - description: 类型 1=入库 2=出库
        in: query
        name: type
        type: integer
      - description: 单号
        in: query
        name: order_no
        type: string
      - description: 日期
        in: query
        name: date
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.InventoryOrder'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 出入库单列表
      tags:
      - 库存管理
    post:
      consumes:
      - application/json
      parameters:
      - description: 出入库单信息
        in: body
        name: order
        required: true
        schema:
          $ref: '#/definitions/model.CreateInventoryOrderReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.InventoryOrder'
              type: object
      security:
      - Bearer: []
      summary: 创建出入库单
      tags:
      - 库存管理
  /inventory-orders/{id}:
    get:
      parameters:
      - description: 出入库单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.InventoryOrder'
              type: object
      security:
      - Bearer: []
      summary: 根据ID获取出入库单详情
      tags:
      - 库存管理
  /inventory-orders/no/{order_no}:
    get:
      parameters:
      - description: 单据编号
        in: path
        name: order_no
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.InventoryOrder'
              type: object
      security:
      - Bearer: []
      summary: 根据单号获取出入库单详情
      tags:
      - 库存管理
  /members:
    get:
      description: 获取会员列表，支持关键字模糊查询手机号/UID
      parameters:
      - description: 关键字(模糊匹配手机号/UID)
        in: query
        name: keyword
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Member'
                  type: array
              type: object
      summary: 获取会员列表
      tags:
      - 会员管理
    post:
      consumes:
      - application/json
      description: 新增一个会员
      parameters:
      - description: 会员信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.CreateMemberReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Member'
              type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建会员
      tags:
      - 会员管理
  /members/{id}:
    delete:
      description: 根据ID删除会员
      parameters:
      - description: 会员ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除会员
      tags:
      - 会员管理
    get:
      description: 根据ID获取会员信息
      parameters:
      - description: 会员ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Member'
              type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取会员详情
      tags:
      - 会员管理
    put:
      consumes:
      - application/json
      description: 根据ID更新会员信息，可局部更新
      parameters:
      - description: 会员ID
        in: path
        name: id
        required: true
        type: integer
      - description: 仅传需要修改的字段
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.UpdateMemberReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Member'
              type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 更新会员
      tags:
      - 会员管理
  /members/{id}/adjust-balance:
    post:
      consumes:
      - application/json
      description: 使用乐观锁调整会员余额（仅管理员可操作）
      parameters:
      - description: 会员ID
        in: path
        name: id
        required: true
        type: integer
      - description: 调整信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.AdjustBalanceReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Member'
              type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 调整会员余额
      tags:
      - 会员管理
  /members/phone:
    get:
      description: 根据手机号获取会员信息
      parameters:
      - description: 手机号
        in: query
        name: phone
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Member'
              type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 通过手机号获取会员
      tags:
      - 会员管理
  /menus:
    get:
      consumes:
      - application/json
      description: 获取所有菜单列表（平铺形式）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Menu'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 菜单列表
      tags:
      - 菜单管理
    post:
      consumes:
      - application/json
      description: 创建新菜单（仅总部管理员）
      parameters:
      - description: 菜单信息
        in: body
        name: menu
        required: true
        schema:
          $ref: '#/definitions/model.CreateMenuReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建菜单
      tags:
      - 菜单管理
  /menus/{id}:
    delete:
      consumes:
      - application/json
      description: 删除菜单（仅总部管理员）
      parameters:
      - description: 菜单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除菜单
      tags:
      - 菜单管理
    get:
      consumes:
      - application/json
      description: 获取菜单详细信息
      parameters:
      - description: 菜单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Menu'
              type: object
      security:
      - Bearer: []
      summary: 获取菜单详情
      tags:
      - 菜单管理
    put:
      consumes:
      - application/json
      description: 更新菜单信息（仅总部管理员）
      parameters:
      - description: 菜单ID
        in: path
        name: id
        required: true
        type: integer
      - description: 菜单信息
        in: body
        name: menu
        required: true
        schema:
          $ref: '#/definitions/model.UpdateMenuReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新菜单
      tags:
      - 菜单管理
  /menus/assign-role:
    post:
      consumes:
      - application/json
      description: 为角色分配默认菜单权限（仅总部管理员）
      parameters:
      - description: 分配信息
        in: body
        name: assignment
        required: true
        schema:
          $ref: '#/definitions/model.AssignMenusToRoleReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 为角色分配菜单
      tags:
      - 菜单管理
  /menus/assign-store-role:
    post:
      consumes:
      - application/json
      description: 为特定门店的角色定制菜单权限（总部管理员或门店管理员）
      parameters:
      - description: 分配信息
        in: body
        name: assignment
        required: true
        schema:
          $ref: '#/definitions/model.AssignStoreMenusReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 为门店角色分配菜单
      tags:
      - 菜单管理
  /menus/copy-store:
    post:
      consumes:
      - application/json
      description: 将一个门店的菜单配置复制到另一个门店（仅总部管理员）
      parameters:
      - description: 复制信息
        in: body
        name: copy
        required: true
        schema:
          $ref: '#/definitions/model.CopyStoreMenusReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 复制门店菜单权限
      tags:
      - 菜单管理
  /menus/role:
    get:
      consumes:
      - application/json
      description: 获取角色的默认菜单权限（树形结构）
      parameters:
      - description: 角色ID
        in: query
        name: role_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Menu'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取角色菜单
      tags:
      - 菜单管理
  /menus/role-ids:
    get:
      consumes:
      - application/json
      description: 获取角色的所有菜单ID（用于权限回显）
      parameters:
      - description: 角色ID
        in: query
        name: role_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    type: integer
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取角色菜单ID列表
      tags:
      - 菜单管理
  /menus/role-permissions:
    get:
      consumes:
      - application/json
      description: 获取角色的所有菜单及其权限位（用于权限编辑回显）
      parameters:
      - description: 角色ID
        in: query
        name: role_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  additionalProperties:
                    format: int32
                    type: integer
                  type: object
              type: object
      security:
      - Bearer: []
      summary: 获取角色菜单权限映射
      tags:
      - 菜单管理
  /menus/store-role:
    get:
      consumes:
      - application/json
      description: 获取特定门店角色的菜单权限（树形结构）
      parameters:
      - description: 门店ID
        in: query
        name: store_id
        required: true
        type: integer
      - description: 角色ID
        in: query
        name: role_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Menu'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取门店角色菜单
      tags:
      - 菜单管理
  /menus/store-role-ids:
    get:
      consumes:
      - application/json
      description: 获取门店角色的所有菜单ID（用于权限回显）
      parameters:
      - description: 门店ID
        in: query
        name: store_id
        required: true
        type: integer
      - description: 角色ID
        in: query
        name: role_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    type: integer
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取门店角色菜单ID列表
      tags:
      - 菜单管理
  /menus/store-role-permissions:
    get:
      consumes:
      - application/json
      description: 获取门店角色的所有菜单及其权限位（用于权限编辑回显）
      parameters:
      - description: 门店ID
        in: query
        name: store_id
        required: true
        type: integer
      - description: 角色ID
        in: query
        name: role_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  additionalProperties:
                    format: int32
                    type: integer
                  type: object
              type: object
      security:
      - Bearer: []
      summary: 获取门店角色菜单权限映射
      tags:
      - 菜单管理
  /menus/tree:
    get:
      consumes:
      - application/json
      description: 获取菜单树形结构
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Menu'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 菜单树形结构
      tags:
      - 菜单管理
  /menus/user-menus:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户的菜单树（用于渲染后台侧边栏）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Menu'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取当前用户菜单
      tags:
      - 菜单管理
  /menus/user-permissions:
    get:
      consumes:
      - application/json
      description: 获取当前用户所有可访问的权限标识（用于前端按钮级权限控制）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    type: string
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取当前用户权限标识列表
      tags:
      - 菜单管理
  /message-templates:
    get:
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.MessageTemplate'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取消息模板列表
      tags:
      - 消息模板
    post:
      consumes:
      - application/json
      parameters:
      - description: 模板信息
        in: body
        name: template
        required: true
        schema:
          $ref: '#/definitions/model.CreateMessageTemplateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.MessageTemplate'
              type: object
      security:
      - Bearer: []
      summary: 创建消息模板
      tags:
      - 消息模板
  /message-templates/{id}:
    delete:
      parameters:
      - description: 模板ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除消息模板
      tags:
      - 消息模板
    get:
      parameters:
      - description: 模板ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.MessageTemplate'
              type: object
      security:
      - Bearer: []
      summary: 获取消息模板详情
      tags:
      - 消息模板
    put:
      consumes:
      - application/json
      parameters:
      - description: 模板ID
        in: path
        name: id
        required: true
        type: integer
      - description: 模板信息
        in: body
        name: template
        required: true
        schema:
          $ref: '#/definitions/model.UpdateMessageTemplateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新消息模板
      tags:
      - 消息模板
  /purchase-orders:
    get:
      parameters:
      - description: 门店ID
        in: query
        name: store_id
        type: integer
      - description: 供应商ID
        in: query
        name: supplier_id
        type: integer
      - description: 状态
        in: query
        name: status
        type: integer
      - description: 日期 格式:2024-01-01
        in: query
        name: date
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.PurchaseOrder'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 采购单列表
      tags:
      - 采购单管理
    post:
      consumes:
      - application/json
      parameters:
      - description: 采购单信息
        in: body
        name: order
        required: true
        schema:
          $ref: '#/definitions/model.CreatePurchaseOrderReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.PurchaseOrder'
              type: object
      security:
      - Bearer: []
      summary: 创建采购单
      tags:
      - 采购单管理
  /purchase-orders/{id}:
    delete:
      parameters:
      - description: 采购单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除采购单
      tags:
      - 采购单管理
    get:
      parameters:
      - description: 采购单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.PurchaseOrder'
              type: object
      security:
      - Bearer: []
      summary: 获取采购单详情
      tags:
      - 采购单管理
    put:
      consumes:
      - application/json
      parameters:
      - description: 采购单ID
        in: path
        name: id
        required: true
        type: integer
      - description: 采购单信息
        in: body
        name: order
        required: true
        schema:
          $ref: '#/definitions/model.UpdatePurchaseOrderReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新采购单
      tags:
      - 采购单管理
  /purchase-orders/{id}/actions:
    get:
      parameters:
      - description: 采购单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    type: string
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取采购单可用操作
      tags:
      - 采购单管理
  /purchase-orders/{id}/by-supplier:
    get:
      parameters:
      - description: 采购单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 按供应商分组获取采购单明细
      tags:
      - 采购单管理
  /purchase-orders/{id}/cancel:
    post:
      consumes:
      - application/json
      parameters:
      - description: 采购单ID
        in: path
        name: id
        required: true
        type: integer
      - description: 取消原因
        in: body
        name: body
        schema:
          properties:
            reason:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 取消采购单
      tags:
      - 采购单管理
  /purchase-orders/{id}/complete:
    post:
      parameters:
      - description: 采购单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 完成采购单
      tags:
      - 采购单管理
  /purchase-orders/{id}/confirm:
    post:
      parameters:
      - description: 采购单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 确认采购单
      tags:
      - 采购单管理
  /recharge-orders:
    get:
      description: 查询会员充值记录
      parameters:
      - description: 会员ID
        in: query
        name: memberId
        type: integer
      - description: 支付状态 0=待支付 1=已支付 2=已取消 3=已退款
        in: query
        name: status
        type: integer
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.RechargeOrder'
                  type: array
              type: object
      summary: 查询充值单列表
      tags:
      - 充值管理
    post:
      consumes:
      - application/json
      description: 创建会员充值订单
      parameters:
      - description: 充值信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.CreateRechargeOrderReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.RechargeOrder'
              type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建充值单
      tags:
      - 充值管理
  /recharge-orders/{id}:
    get:
      description: 根据ID或单号获取充值单信息
      parameters:
      - description: 充值单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.RechargeOrder'
              type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取充值单详情
      tags:
      - 充值管理
  /recharge-orders/{orderNo}/cancel:
    post:
      consumes:
      - application/json
      description: 取消待支付的充值单
      parameters:
      - description: 充值单号
        in: path
        name: orderNo
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.RechargeOrder'
              type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 取消充值单
      tags:
      - 充值管理
  /recharge-orders/pay:
    post:
      consumes:
      - application/json
      description: 支付充值单（余额充值）
      parameters:
      - description: 支付信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.PayRechargeOrderReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.RechargeOrder'
              type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 支付充值单
      tags:
      - 充值管理
  /roles:
    get:
      description: 获取角色列表（排除admin），支持 keyword 模糊查询 name/code/description，status=0|1
        过滤
      parameters:
      - description: 关键字(模糊匹配 name/code/description)
        in: query
        name: keyword
        type: string
      - description: 状态过滤 1=启用 0=禁用
        in: query
        name: status
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Role'
                  type: array
              type: object
      summary: 获取角色列表
      tags:
      - 角色管理
    post:
      consumes:
      - application/json
      description: 新增一个角色，status：1=启用 0=禁用（默认为1）
      parameters:
      - description: 角色信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.Role'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Role'
              type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建角色
      tags:
      - 角色管理
  /roles/{id}:
    delete:
      description: 根据ID删除角色
      parameters:
      - description: 角色ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除角色
      tags:
      - 角色管理
    get:
      description: 根据ID获取角色信息
      parameters:
      - description: 角色ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Role'
              type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取角色详情
      tags:
      - 角色管理
    put:
      consumes:
      - application/json
      description: 根据ID更新角色信息，可局部更新，仅传需要修改的字段；status=1启用 0禁用
      parameters:
      - description: 角色ID
        in: path
        name: id
        required: true
        type: integer
      - description: 仅传需要修改的字段 (name, code, description, status)，未传字段保持原值
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.UpdateRoleReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Role'
              type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 更新角色
      tags:
      - 角色管理
  /statistics/channel:
    get:
      parameters:
      - default: month
        description: '统计周期: today/week/month/quarter/year'
        in: query
        name: period
        type: string
      - description: 门店ID
        in: query
        name: store_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.ChannelStatsItem'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 渠道销售统计
      tags:
      - 统计分析
  /statistics/dashboard:
    get:
      description: 获取库存和销售统计数据，支持当天/当周/当月/当季/当年
      parameters:
      - default: today
        description: '统计周期: today/week/month/quarter/year'
        in: query
        name: period
        type: string
      - description: 门店ID（管理员可指定）
        in: query
        name: store_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.DashboardStats'
              type: object
      security:
      - Bearer: []
      summary: 统计面板数据
      tags:
      - 统计分析
  /statistics/inventory:
    get:
      parameters:
      - description: 门店ID
        in: query
        name: store_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.InventoryStats'
              type: object
      security:
      - Bearer: []
      summary: 库存统计
      tags:
      - 统计分析
  /statistics/sales:
    get:
      parameters:
      - default: today
        description: '统计周期: today/week/month/quarter/year'
        in: query
        name: period
        type: string
      - description: 门店ID
        in: query
        name: store_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.SalesStats'
              type: object
      security:
      - Bearer: []
      summary: 销售统计
      tags:
      - 统计分析
  /statistics/sales-trend:
    get:
      parameters:
      - default: month
        description: '统计周期: week/month/quarter/year'
        in: query
        name: period
        type: string
      - description: 门店ID
        in: query
        name: store_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.SalesTrendItem'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 销售趋势（图表数据）
      tags:
      - 统计分析
  /store-accounts:
    get:
      parameters:
      - description: 门店ID
        in: query
        name: store_id
        type: integer
      - description: 渠道来源
        in: query
        name: channel
        type: string
      - description: 订单编号
        in: query
        name: order_no
        type: string
      - description: 标签编码
        in: query
        name: tag_code
        type: string
      - description: 开始日期
        in: query
        name: start_date
        type: string
      - description: 结束日期
        in: query
        name: end_date
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.StoreAccount'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 记账列表
      tags:
      - 门店记账
    post:
      consumes:
      - application/json
      description: 创建记账单，支持多个商品
      parameters:
      - description: 记账信息
        in: body
        name: account
        required: true
        schema:
          $ref: '#/definitions/model.CreateStoreAccountReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.StoreAccount'
              type: object
      security:
      - Bearer: []
      summary: 创建记账
      tags:
      - 门店记账
  /store-accounts/{id}:
    delete:
      parameters:
      - description: 记账ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除记账
      tags:
      - 门店记账
    get:
      parameters:
      - description: 记账ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.StoreAccount'
              type: object
      security:
      - Bearer: []
      summary: 获取记账详情
      tags:
      - 门店记账
    put:
      consumes:
      - application/json
      description: 更新记账信息，仅限创建后24小时内可修改（管理员不受限制）
      parameters:
      - description: 记账ID
        in: path
        name: id
        required: true
        type: integer
      - description: 记账信息
        in: body
        name: account
        required: true
        schema:
          $ref: '#/definitions/model.UpdateStoreAccountReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新记账
      tags:
      - 门店记账
  /store-accounts/stats:
    get:
      parameters:
      - description: 门店ID
        in: query
        name: store_id
        type: integer
      - description: 开始日期
        in: query
        name: start_date
        type: string
      - description: 结束日期
        in: query
        name: end_date
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 记账统计
      tags:
      - 门店记账
  /stores:
    get:
      consumes:
      - application/json
      description: 获取全部门店列表（不分页）
      produces:
      - application/json
      responses:
        "200":
          description: 返回全部门店数据，meta 包含 total
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Store'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 门店列表
      tags:
      - 门店管理
    post:
      consumes:
      - application/json
      description: 创建新门店（仅总部管理员）
      parameters:
      - description: 门店信息
        in: body
        name: store
        required: true
        schema:
          $ref: '#/definitions/model.CreateStoreReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建门店
      tags:
      - 门店管理
  /stores/{id}:
    delete:
      consumes:
      - application/json
      description: 删除门店（仅总部管理员）
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除门店
      tags:
      - 门店管理
    get:
      consumes:
      - application/json
      description: 获取门店详细信息
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Store'
              type: object
      security:
      - Bearer: []
      summary: 获取门店详情
      tags:
      - 门店管理
    put:
      consumes:
      - application/json
      description: 更新门店信息（仅总部管理员）
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      - description: 门店信息
        in: body
        name: store
        required: true
        schema:
          $ref: '#/definitions/model.UpdateStoreReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新门店信息
      tags:
      - 门店管理
  /stores/all:
    get:
      description: 返回全部门店列表。默认仅总部管理员可访问，如需开放可去掉权限判断
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Store'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 全部门店（无分页）
      tags:
      - 门店管理
  /supplier-categories:
    get:
      parameters:
      - description: 供应商ID
        in: query
        name: supplier_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.SupplierCategory'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 供应商分类列表
      tags:
      - 供应商分类
    post:
      consumes:
      - application/json
      parameters:
      - description: 分类信息
        in: body
        name: category
        required: true
        schema:
          $ref: '#/definitions/model.CreateSupplierCategoryReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建供应商分类
      tags:
      - 供应商分类
  /supplier-categories/{id}:
    delete:
      parameters:
      - description: 分类ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除供应商分类
      tags:
      - 供应商分类
    put:
      consumes:
      - application/json
      parameters:
      - description: 分类ID
        in: path
        name: id
        required: true
        type: integer
      - description: 分类信息
        in: body
        name: category
        required: true
        schema:
          $ref: '#/definitions/model.UpdateSupplierCategoryReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新供应商分类
      tags:
      - 供应商分类
  /supplier-products:
    get:
      parameters:
      - description: 供应商ID
        in: query
        name: supplier_id
        type: integer
      - description: 分类ID
        in: query
        name: category_id
        type: integer
      - description: 关键词
        in: query
        name: keyword
        type: string
      - description: 状态
        in: query
        name: status
        type: integer
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.SupplierProduct'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 供应商商品列表
      tags:
      - 供应商商品
    post:
      consumes:
      - application/json
      parameters:
      - description: 商品信息
        in: body
        name: product
        required: true
        schema:
          $ref: '#/definitions/model.CreateSupplierProductReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建供应商商品
      tags:
      - 供应商商品
  /supplier-products/{id}:
    delete:
      parameters:
      - description: 商品ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除供应商商品
      tags:
      - 供应商商品
    get:
      parameters:
      - description: 商品ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.SupplierProduct'
              type: object
      security:
      - Bearer: []
      summary: 获取供应商商品详情
      tags:
      - 供应商商品
    put:
      consumes:
      - application/json
      parameters:
      - description: 商品ID
        in: path
        name: id
        required: true
        type: integer
      - description: 商品信息
        in: body
        name: product
        required: true
        schema:
          $ref: '#/definitions/model.UpdateSupplierProductReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新供应商商品
      tags:
      - 供应商商品
  /suppliers:
    get:
      consumes:
      - application/json
      description: 获取供应商列表（支持分页和搜索）
      parameters:
      - description: 搜索关键词（名称或编码）
        in: query
        name: keyword
        type: string
      - description: 状态筛选（0=禁用，1=启用）
        in: query
        name: status
        type: integer
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Supplier'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 供应商列表
      tags:
      - 供应商管理
    post:
      consumes:
      - application/json
      description: 创建新供应商，编码自动生成（门店ID+4位序号）
      parameters:
      - description: 供应商信息
        in: body
        name: supplier
        required: true
        schema:
          $ref: '#/definitions/model.CreateSupplierReq'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            $ref: '#/definitions/http.Response'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/http.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建供应商
      tags:
      - 供应商管理
  /suppliers/{id}:
    delete:
      consumes:
      - application/json
      description: 删除供应商（仅管理员）
      parameters:
      - description: 供应商ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除供应商
      tags:
      - 供应商管理
    get:
      consumes:
      - application/json
      description: 获取供应商详细信息
      parameters:
      - description: 供应商ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Supplier'
              type: object
      security:
      - Bearer: []
      summary: 获取供应商详情
      tags:
      - 供应商管理
    put:
      consumes:
      - application/json
      description: 更新供应商信息（仅管理员）
      parameters:
      - description: 供应商ID
        in: path
        name: id
        required: true
        type: integer
      - description: 供应商信息
        in: body
        name: supplier
        required: true
        schema:
          $ref: '#/definitions/model.UpdateSupplierReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新供应商信息
      tags:
      - 供应商管理
  /users:
    get:
      consumes:
      - application/json
      description: 获取用户列表。总部管理员返回全部用户（跨门店，支持分页），门店管理员返回其门店用户（分页）
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 模糊关键字匹配用户名或手机号任意部分，如手机号135
        in: query
        name: keyword
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 支持 keyword 模糊匹配用户名或手机号；总部管理员查看全部用户，门店管理员仅查看本门店用户
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.User'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 用户列表
      tags:
      - 用户管理
    post:
      consumes:
      - application/json
      description: 创建新用户
      parameters:
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/model.CreateUserReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建用户
      tags:
      - 用户管理
  /users/{id}:
    delete:
      consumes:
      - application/json
      description: 删除用户（管理员可删除任意用户，门店管理员只能删除本门店用户）
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除用户
      tags:
      - 用户管理
    get:
      consumes:
      - application/json
      description: 获取用户详情
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.User'
              type: object
      security:
      - Bearer: []
      summary: 获取用户
      tags:
      - 用户管理
    put:
      consumes:
      - application/json
      description: 更新用户信息
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/model.UpdateUserReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新用户
      tags:
      - 用户管理
  /users/{id}/reset-password:
    post:
      consumes:
      - application/json
      description: 将指定用户密码重置为 123456
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 重置用户密码
      tags:
      - 用户管理
  /users/profile:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户的详细信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.User'
              type: object
      security:
      - Bearer: []
      summary: 获取用户个人信息
      tags:
      - 用户管理
    put:
      consumes:
      - application/json
      description: 更新当前登录用户的个人信息
      parameters:
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/model.UpdateUserReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新个人信息
      tags:
      - 用户管理
  /wallet-logs:
    get:
      description: 查询会员流水记录
      parameters:
      - description: 会员ID
        in: query
        name: memberId
        type: integer
      - description: 变动类型 1=充值 2=消费 3=退款 4=调增 5=调减
        in: query
        name: changeType
        type: integer
      - description: 开始时间
        in: query
        name: startTime
        type: string
      - description: 结束时间
        in: query
        name: endTime
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.WalletLog'
                  type: array
              type: object
      summary: 查询流水列表
      tags:
      - 流水管理
schemes:
- http
- https
securityDefinitions:
  Bearer:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
