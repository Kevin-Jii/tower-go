{"level":"warn","timestamp":"2025-11-07 21:33:15.449","caller":"utils/response.go:120","msg":"Error Response","code":500,"message":"failed to get access token: failed to get access token: map[code:invalidClientIdOrSecret message:无效的clientId或者clientSecret requestid:386DF31D-5B40-7663-97C0-7673739A9FAA]","path":"/api/v1/dingtalk/robots/1/test","method":"POST","ip":"::1"}
{"level":"info","timestamp":"2025-11-07 21:36:36.978","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-07 21:36:37.071","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-07 21:36:37.071","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-07 21:36:37.080","caller":"bootstrap/database.go:15","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-07 21:36:37.088","caller":"utils/redis.go:38","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-07 21:36:37.088","caller":"bootstrap/redis.go:17","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-07 21:36:53.741","caller":"bootstrap/migrate.go:38","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-07 21:36:53.785","caller":"bootstrap/migrate.go:43","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-07 21:36:54.563","caller":"utils/seed.go:114","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-07 21:36:54.609","caller":"utils/seed.go:258","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-07 21:36:54.614","caller":"utils/seed_dingtalk_menus.go:19","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-07 21:36:54.615","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-07 21:36:54.756","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":2,"botName":"全局Stream机器人(自动创建)","clientID":"dinglsqvmdgbj5xaidwz"}
{"level":"error","timestamp":"2025-11-07 21:36:54.761","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-07 21:36:54.762","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-07 21:36:54.765","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":2,"success":1}
{"level":"error","timestamp":"2025-11-07 22:14:37.919","caller":"service/dingtalk.go:192","msg":"Failed to get access token from DingTalk","clientID":"","response":{"code":"invalidClientIdOrSecret","message":"无效的clientId或者clientSecret","requestid":"E0960A4A-2F37-7963-9C11-D13EB9EA3393"},"stacktrace":"tower-go/service.(*DingTalkService).sendStreamMarkdown\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:192\ntower-go/service.(*DingTalkService).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:564\ntower-go/controller.(*DingTalkBotController).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/dingtalk_bot.go:237\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.RegisterRoutes.AuthMiddleware.func4\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:44\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"warn","timestamp":"2025-11-07 22:14:37.930","caller":"utils/response.go:120","msg":"Error Response","code":500,"message":"failed to get access token: failed to get access token: map[code:invalidClientIdOrSecret message:无效的clientId或者clientSecret requestid:E0960A4A-2F37-7963-9C11-D13EB9EA3393]","path":"/api/v1/dingtalk/robots/1/test","method":"POST","ip":"::1"}
{"level":"error","timestamp":"2025-11-07 22:20:25.492","caller":"service/dingtalk.go:192","msg":"Failed to get access token from DingTalk","clientID":"","response":{"code":"invalidClientIdOrSecret","message":"无效的clientId或者clientSecret","requestid":"EB204A05-B1B6-7B59-A0E3-16CF757D8698"},"stacktrace":"tower-go/service.(*DingTalkService).sendStreamMarkdown\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:192\ntower-go/service.(*DingTalkService).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:564\ntower-go/controller.(*DingTalkBotController).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/dingtalk_bot.go:237\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.RegisterRoutes.AuthMiddleware.func4\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:44\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"warn","timestamp":"2025-11-07 22:20:25.498","caller":"utils/response.go:120","msg":"Error Response","code":500,"message":"failed to get access token: failed to get access token: map[code:invalidClientIdOrSecret message:无效的clientId或者clientSecret requestid:EB204A05-B1B6-7B59-A0E3-16CF757D8698]","path":"/api/v1/dingtalk/robots/1/test","method":"POST","ip":"127.0.0.1"}
{"level":"error","timestamp":"2025-11-07 22:20:28.195","caller":"service/dingtalk.go:192","msg":"Failed to get access token from DingTalk","clientID":"","response":{"code":"invalidClientIdOrSecret","message":"无效的clientId或者clientSecret","requestid":"F1F4281A-D682-7C6B-8962-0D6FD44AFD1B"},"stacktrace":"tower-go/service.(*DingTalkService).sendStreamMarkdown\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:192\ntower-go/service.(*DingTalkService).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:564\ntower-go/controller.(*DingTalkBotController).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/dingtalk_bot.go:237\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.RegisterRoutes.AuthMiddleware.func4\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:44\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"warn","timestamp":"2025-11-07 22:20:28.199","caller":"utils/response.go:120","msg":"Error Response","code":500,"message":"failed to get access token: failed to get access token: map[code:invalidClientIdOrSecret message:无效的clientId或者clientSecret requestid:F1F4281A-D682-7C6B-8962-0D6FD44AFD1B]","path":"/api/v1/dingtalk/robots/1/test","method":"POST","ip":"127.0.0.1"}
{"level":"error","timestamp":"2025-11-07 22:20:29.151","caller":"service/dingtalk.go:192","msg":"Failed to get access token from DingTalk","clientID":"","response":{"code":"invalidClientIdOrSecret","message":"无效的clientId或者clientSecret","requestid":"FC0640EB-646D-7DD0-A30A-54F4A2D86C57"},"stacktrace":"tower-go/service.(*DingTalkService).sendStreamMarkdown\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:192\ntower-go/service.(*DingTalkService).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:564\ntower-go/controller.(*DingTalkBotController).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/dingtalk_bot.go:237\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.RegisterRoutes.AuthMiddleware.func4\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:44\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"warn","timestamp":"2025-11-07 22:20:29.159","caller":"utils/response.go:120","msg":"Error Response","code":500,"message":"failed to get access token: failed to get access token: map[code:invalidClientIdOrSecret message:无效的clientId或者clientSecret requestid:FC0640EB-646D-7DD0-A30A-54F4A2D86C57]","path":"/api/v1/dingtalk/robots/1/test","method":"POST","ip":"127.0.0.1"}
{"level":"info","timestamp":"2025-11-08 03:02:53.789","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:02:53.893","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:02:53.893","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:02:53.898","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"dial tcp [::1]:3306: connectex: No connection could be made because the target machine actively refused it.","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:08:34.691","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:08:34.781","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:08:34.782","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:08:34.792","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"Error 1045 (28000): Access denied for user 'root'@'172.17.0.1' (using password: YES)","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:26:01.830","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:26:01.945","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:26:01.945","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:26:01.951","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"dial tcp [::1]:3306: connectex: No connection could be made because the target machine actively refused it.","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:37:49.636","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:37:49.743","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:37:49.743","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:37:49.749","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"dial tcp [::1]:3306: connectex: No connection could be made because the target machine actively refused it.","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:39:21.299","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:39:21.386","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:39:21.386","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:39:21.398","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"Error 1045 (28000): Access denied for user 'root'@'172.17.0.1' (using password: YES)","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:40:03.548","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:40:03.629","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:40:03.629","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:40:03.639","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"Error 1045 (28000): Access denied for user 'root'@'172.17.0.1' (using password: YES)","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:44:34.431","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:44:34.517","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:44:34.517","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-08 03:44:34.527","caller":"bootstrap/database.go:15","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-08 03:44:34.531","caller":"utils/redis.go:32","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"tower-go/utils.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis.go:32\ntower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:12\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-08 03:44:34.531","caller":"bootstrap/redis.go:13","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-08 03:44:51.376","caller":"bootstrap/migrate.go:38","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-08 03:44:51.419","caller":"bootstrap/migrate.go:43","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-08 03:44:52.184","caller":"utils/seed.go:114","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-08 03:44:52.228","caller":"utils/seed.go:266","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-08 03:44:52.230","caller":"utils/seed_dingtalk_menus.go:19","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-08 03:44:52.230","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:44:52.276","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-08 03:44:52.322","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:44:52.323","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-08 03:44:52.323","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":2,"success":1}
{"level":"info","timestamp":"2025-11-08 03:47:27.137","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:47:27.223","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:47:27.223","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-08 03:47:27.231","caller":"bootstrap/database.go:15","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-08 03:47:27.237","caller":"utils/redis.go:38","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-08 03:47:27.237","caller":"bootstrap/redis.go:17","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-08 03:47:44.012","caller":"bootstrap/migrate.go:38","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-08 03:47:44.059","caller":"bootstrap/migrate.go:43","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-08 03:47:44.850","caller":"utils/seed.go:114","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-08 03:47:44.893","caller":"utils/seed.go:266","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-08 03:47:44.895","caller":"utils/seed_dingtalk_menus.go:19","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-08 03:47:44.895","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:47:44.942","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-08 03:47:44.988","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:47:44.989","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-08 03:47:44.989","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":2,"success":1}
{"level":"info","timestamp":"2025-11-08 03:57:06.903","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:57:06.987","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:57:06.987","caller":"bootstrap/config.go:22","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:57:06.994","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"Error 1045 (28000): Access denied for user 'root'@'172.17.0.1' (using password: NO)","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:57:55.694","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:57:55.779","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:57:55.779","caller":"bootstrap/config.go:22","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:57:55.787","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"Error 1045 (28000): Access denied for user 'root'@'172.17.0.1' (using password: NO)","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 04:00:00.962","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 04:00:01.050","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 04:00:01.050","caller":"bootstrap/config.go:19","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-08 04:00:01.050","caller":"bootstrap/config.go:22","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-08 04:00:01.058","caller":"bootstrap/database.go:15","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-08 04:00:01.064","caller":"utils/redis.go:38","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-08 04:00:01.064","caller":"bootstrap/redis.go:17","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-08 04:00:17.988","caller":"bootstrap/migrate.go:38","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-08 04:00:18.036","caller":"bootstrap/migrate.go:43","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-08 04:00:18.863","caller":"utils/seed.go:114","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-08 04:00:18.911","caller":"utils/seed.go:266","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-08 04:00:18.918","caller":"utils/seed_dingtalk_menus.go:19","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-08 04:00:18.918","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-08 04:00:19.068","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":3,"botName":"全局Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"error","timestamp":"2025-11-08 04:00:19.079","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 04:00:19.079","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-08 04:00:19.080","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-08 04:00:19.080","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-08 04:00:19.254","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"DF7F8F22-7A0C-74ED-B14F-3DA9D6DC5522\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:09:15.651","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:09:15.754","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:09:15.754","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:09:15.754","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:09:15.767","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:09:15.772","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:09:15.772","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:09:32.227","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:09:32.277","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:09:33.065","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:09:33.106","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:09:33.108","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:09:33.108","caller":"bootstrap/app.go:30","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:09:33.152","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:09:33.202","caller":"bootstrap/app.go:39","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:39\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:09:33.203","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:09:33.203","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:09:33.203","caller":"bootstrap/app.go:39","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:09:33.360","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"69109328-3CF9-7B85-BC62-6A9AC8E5A319\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:11:06.750","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:11:06.811","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:11:06.811","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:11:06.811","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:11:06.820","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:11:06.825","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:11:06.825","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:11:23.368","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:11:23.413","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:11:24.183","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:11:24.227","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:11:24.230","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:11:24.230","caller":"bootstrap/app.go:30","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:11:24.274","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:11:24.322","caller":"bootstrap/app.go:39","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:39\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:11:24.322","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:11:24.322","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:11:24.322","caller":"bootstrap/app.go:39","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:11:24.475","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"ADBABD2A-FB59-7A43-AAFC-9854F066F055\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:11:59.620","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:11:59.679","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:11:59.679","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:11:59.679","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:11:59.686","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:11:59.692","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:11:59.692","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:12:16.110","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:12:16.154","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:12:16.978","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:12:17.025","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:12:17.032","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:12:17.032","caller":"bootstrap/app.go:30","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:12:17.080","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:12:17.127","caller":"bootstrap/app.go:39","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:39\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:12:17.127","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:12:17.128","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:12:17.128","caller":"bootstrap/app.go:39","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:12:17.261","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"3C0E33C5-A6D9-7289-BA37-967F30F11F15\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:17:47.072","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:17:47.125","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:17:47.125","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:17:47.125","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:17:47.135","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:17:47.144","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:17:47.144","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:18:03.217","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:18:03.260","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:18:04.045","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:18:04.087","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:18:04.089","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:18:04.089","caller":"bootstrap/app.go:30","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:18:04.136","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:18:04.185","caller":"bootstrap/app.go:39","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:39\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:18:04.185","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:18:04.185","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:18:04.185","caller":"bootstrap/app.go:39","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:18:04.353","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"D7B4279B-DF54-799C-8F41-E49AC3D653A6\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:20:09.226","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:20:09.286","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:20:09.286","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:20:09.286","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:20:09.295","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:20:09.301","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:20:09.301","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:20:25.299","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:20:25.341","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:20:26.113","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:20:26.156","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:20:26.157","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:20:26.157","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:20:26.201","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:20:26.245","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:20:26.245","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:20:26.245","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:20:26.245","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:20:26.386","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"1A90A7DD-5FAE-70D1-8A02-56BDF0A0B7F8\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:20:49.961","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:20:50.014","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:20:50.015","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:20:50.015","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:20:50.023","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:20:50.028","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:20:50.028","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:21:06.596","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:21:06.639","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:21:07.448","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:21:07.494","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:21:07.500","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:21:07.500","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:21:07.549","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:21:07.594","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:21:07.594","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:21:07.594","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:21:07.594","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 21:21:07.596","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:23:49.275","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:23:49.332","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:23:49.332","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:23:49.332","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:23:49.341","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:23:49.347","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:23:49.347","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:24:06.133","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:24:06.182","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:24:07.019","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:24:07.064","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:24:07.071","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:24:07.072","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:24:07.123","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:24:07.172","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:24:07.173","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:24:07.173","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:24:07.173","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:24:07.325","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"B6BFB78D-B73E-7CD0-9370-68BFD7FF4632\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:41:59.085","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:41:59.159","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:41:59.159","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:41:59.159","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:41:59.167","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:41:59.174","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:41:59.174","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:42:15.156","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:42:15.201","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:42:15.987","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:42:16.030","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:42:16.035","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:42:16.035","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:42:16.077","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:42:16.121","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:42:16.121","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:42:16.121","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:42:16.121","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:42:16.256","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"74FDAF87-4EB3-72FD-A061-D6D742EA42E3\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:42:36.162","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:42:36.224","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:42:36.224","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:42:36.224","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:42:36.232","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:42:36.238","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:42:36.238","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:42:52.679","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:42:52.727","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:42:53.543","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:42:53.586","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:42:53.589","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:42:53.589","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:42:53.636","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:42:53.679","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:42:53.679","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:42:53.680","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:42:53.680","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 21:42:53.681","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:43:27.817","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:43:27.878","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:43:27.878","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:43:27.878","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:43:27.886","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:43:27.892","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:43:27.892","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:43:40.700","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:43:40.760","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:43:40.760","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:43:40.760","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:43:40.768","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:43:40.774","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:43:40.774","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:43:57.422","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:43:57.468","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:43:58.312","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:43:58.357","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:43:58.365","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:43:58.365","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:43:58.408","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:43:58.457","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:43:58.458","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:43:58.458","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:43:58.458","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 21:43:58.459","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:49:00.514","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:49:00.579","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:49:00.580","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:49:00.580","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:49:00.588","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:49:00.598","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:49:00.598","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:49:17.312","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:49:17.360","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:49:18.159","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:49:18.204","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:49:18.206","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:49:18.206","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:49:18.248","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:49:18.296","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:49:18.296","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:49:18.297","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:49:18.297","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 21:49:18.299","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:50:07.926","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:50:07.989","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:50:07.989","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:50:07.989","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:50:07.997","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:50:08.004","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:50:08.004","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:50:24.325","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:50:24.369","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:50:25.146","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:50:25.188","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:50:25.189","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:50:25.190","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:50:25.235","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:50:25.276","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:50:25.276","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:50:25.276","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:50:25.276","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 21:50:25.276","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:53:53.462","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:53:53.526","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:53:53.526","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:53:53.526","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:53:53.535","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:53:53.545","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:53:53.545","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:54:09.124","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:54:09.174","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:54:09.986","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:54:10.027","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:54:10.030","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:54:10.030","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:54:10.074","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:54:10.121","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:54:10.122","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:54:10.122","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:54:10.123","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 21:54:10.125","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:07:33.328","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 22:07:33.392","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 22:07:33.392","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 22:07:33.392","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 22:07:33.401","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 22:07:33.408","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 22:07:33.408","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 22:07:50.870","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:07:50.914","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:07:51.757","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 22:07:51.803","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 22:07:51.807","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 22:07:51.807","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 22:07:51.856","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 22:07:51.907","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:07:51.908","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:07:51.908","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:07:51.908","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 22:07:51.910","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:09:14.294","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 22:09:14.359","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 22:09:14.359","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 22:09:14.359","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 22:09:14.368","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 22:09:14.375","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 22:09:14.375","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 22:09:31.561","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:09:31.607","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:09:32.433","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 22:09:32.477","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 22:09:32.481","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 22:09:32.481","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 22:09:32.525","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 22:09:32.570","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:09:32.570","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:09:32.571","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:09:32.571","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 22:09:32.724","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"4D27AE09-88DC-7325-8F7B-2724BB27E0DC\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 22:10:35.560","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 22:10:35.624","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 22:10:35.624","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 22:10:35.624","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 22:10:35.633","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 22:10:35.643","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 22:10:35.643","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 22:10:52.210","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:10:52.256","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:10:53.078","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 22:10:53.124","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 22:10:53.126","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 22:10:53.126","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 22:10:53.176","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 22:10:53.218","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:10:53.219","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:10:53.219","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:10:53.219","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 22:10:53.367","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"52AFDE4B-E9F1-7DBA-80EB-10A2D64ABA97\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 22:11:20.977","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 22:11:21.040","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 22:11:21.040","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 22:11:21.040","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 22:11:21.050","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 22:11:21.056","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 22:11:21.056","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 22:11:37.187","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:11:37.233","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:11:38.011","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 22:11:38.052","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 22:11:38.058","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 22:11:38.058","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 22:11:38.106","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 22:11:38.154","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:11:38.154","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:11:38.155","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:11:38.155","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 22:11:38.295","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"401F488C-ED22-759D-ABE1-8D4D4FE561B9\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 22:29:52.865","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 22:29:52.931","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 22:29:52.931","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 22:29:52.931","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 22:29:52.943","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 22:29:52.950","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 22:29:52.950","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 22:30:09.445","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:30:09.492","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:30:10.307","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 22:30:10.353","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 22:30:10.358","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 22:30:10.359","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 22:30:10.409","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 22:30:10.457","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:30:10.457","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:30:10.457","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:30:10.457","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 22:30:10.591","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"6E1EC619-D1D5-7AE9-A8A4-6EA216EA22F8\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 22:35:42.497","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 22:35:42.562","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 22:35:42.562","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 22:35:42.562","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 22:35:42.572","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 22:35:42.579","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 22:35:42.579","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 22:35:59.538","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:35:59.585","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:36:00.421","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 22:36:00.467","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 22:36:00.473","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 22:36:00.473","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 22:36:00.625","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":4,"botName":"全局Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"error","timestamp":"2025-11-09 22:36:00.631","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:36:00.632","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":4,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:36:00.632","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":2,"success":1}
{"level":"error","timestamp":"2025-11-09 22:36:00.799","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":4,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"69842D8E-77DA-7F94-A8FF-7774F4773C2C\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-10 19:44:24.942","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-10 19:44:25.017","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-10 19:44:25.017","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 19:44:25.017","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 19:44:25.045","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 19:44:25.060","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 19:44:25.060","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 19:44:41.910","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:44:41.956","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:44:42.732","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 19:44:42.775","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 19:44:42.778","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 19:44:42.778","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 19:44:42.927","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":5,"botName":"全局Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"error","timestamp":"2025-11-10 19:44:42.937","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 19:44:42.940","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":5,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 19:44:42.941","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":2,"success":1}
{"level":"error","timestamp":"2025-11-10 19:44:43.106","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":5,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"E9867D28-B815-7F89-BFD1-9AA04A501355\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-10 19:48:57.153","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-10 19:48:57.217","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-10 19:48:57.217","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 19:48:57.217","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 19:48:57.228","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 19:48:57.235","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 19:48:57.235","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 19:49:14.145","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:49:14.195","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:49:15.015","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 19:49:15.063","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 19:49:15.069","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 19:49:15.069","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 19:49:15.113","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":5,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-10 19:49:15.162","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 19:49:15.162","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":5,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 19:49:15.162","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":2,"success":1}
{"level":"error","timestamp":"2025-11-10 19:49:15.311","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":5,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"7EAC6A6E-E2CC-7029-B967-576BC833A651\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-10 19:52:06.492","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-10 19:52:06.565","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-10 19:52:06.565","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 19:52:06.565","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 19:52:06.577","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 19:52:06.585","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 19:52:06.585","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 19:52:24.503","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:52:24.549","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:52:25.349","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 19:52:25.391","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 19:52:25.392","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 19:52:25.392","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 19:52:25.439","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"error","timestamp":"2025-11-10 19:52:25.493","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 19:52:25.493","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":0}
{"level":"info","timestamp":"2025-11-10 19:52:57.394","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-10 19:52:57.459","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-10 19:52:57.459","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 19:52:57.459","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 19:52:57.470","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 19:52:57.478","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 19:52:57.478","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 19:53:14.215","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:53:14.258","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:53:15.035","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 19:53:15.077","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 19:53:15.078","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 19:53:15.078","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 19:53:15.122","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"error","timestamp":"2025-11-10 19:53:15.166","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 19:53:15.166","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":0}
{"level":"info","timestamp":"2025-11-10 19:55:28.810","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-10 19:55:28.877","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-10 19:55:28.877","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 19:55:28.877","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 19:55:28.887","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 19:55:28.895","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 19:55:28.895","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 19:55:45.577","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:55:45.626","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:55:46.464","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 19:55:46.512","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 19:55:46.520","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 19:55:46.520","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 19:55:46.566","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 19:55:46.615","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 19:55:46.615","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 20:10:43.881","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:10:43.971","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 20:10:43.971","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 20:10:43.971","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 20:10:43.980","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 20:10:43.987","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 20:10:43.987","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 20:11:00.163","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:11:00.207","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:11:00.964","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 20:11:01.009","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 20:11:01.013","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 20:11:01.013","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:11:01.058","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 20:11:01.103","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 20:11:01.103","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 20:17:14.204","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:17:14.293","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 20:17:14.293","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 20:17:14.293","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 20:17:14.304","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 20:17:14.311","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 20:17:14.311","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 20:17:30.937","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:17:30.981","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:17:31.788","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 20:17:31.834","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 20:17:31.839","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 20:17:31.839","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:17:31.889","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 20:17:31.936","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 20:17:31.936","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 20:19:44.151","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:19:44.240","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 20:19:44.240","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 20:19:44.240","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 20:19:44.259","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 20:19:44.269","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 20:19:44.269","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 20:20:00.416","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:20:00.461","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:20:01.255","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 20:20:01.298","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 20:20:01.300","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 20:20:01.300","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:20:01.343","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 20:20:01.387","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 20:20:01.387","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"fatal","timestamp":"2025-11-10 20:20:01.388","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 20:21:41.354","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:21:41.441","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 20:21:41.441","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 20:21:41.441","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 20:21:41.451","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 20:21:41.458","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 20:21:41.458","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 20:21:57.567","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:21:57.609","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:21:58.376","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 20:21:58.420","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 20:21:58.422","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 20:21:58.422","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:21:58.466","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 20:21:58.508","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 20:21:58.509","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 20:22:57.857","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:22:57.946","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 20:22:57.946","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 20:22:57.946","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 20:22:57.955","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 20:22:57.962","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 20:22:57.962","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 20:23:14.855","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:23:14.906","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:23:15.710","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 20:23:15.753","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 20:23:15.757","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 20:23:15.757","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:23:15.801","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 20:23:15.845","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 20:23:15.845","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"fatal","timestamp":"2025-11-10 20:23:15.845","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 20:25:40.308","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:25:40.395","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 20:25:40.395","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 20:25:40.395","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 20:25:40.405","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 20:25:40.411","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 20:25:40.411","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 20:25:57.050","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:25:57.098","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:25:57.923","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 20:25:57.967","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 20:25:57.970","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 20:25:57.970","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:25:58.019","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 20:25:58.066","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 20:25:58.066","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 21:21:14.436","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 21:21:14.573","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 21:21:14.573","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 21:21:14.573","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 21:21:14.584","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 21:21:14.590","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 21:21:14.590","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 21:21:31.329","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 21:21:31.376","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 21:21:32.227","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 21:21:32.271","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 21:21:32.273","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 21:21:32.273","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 21:21:32.321","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 21:21:32.370","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 21:21:32.371","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 21:26:46.323","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 21:26:46.414","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 21:26:46.414","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 21:26:46.414","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 21:26:46.423","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 21:26:46.430","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 21:26:46.430","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 21:27:03.985","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 21:27:04.026","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 21:27:04.798","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 21:27:04.845","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 21:27:04.850","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 21:27:04.850","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 21:27:04.901","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 21:27:04.953","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 21:27:04.953","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 21:56:10.776","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 21:56:10.911","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 21:56:10.911","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 21:56:10.911","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 21:56:10.923","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 21:56:10.932","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 21:56:10.932","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 21:56:28.214","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 21:56:28.263","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 21:56:29.111","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 21:56:29.154","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 21:56:29.156","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 21:56:29.156","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 21:56:29.204","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 21:56:29.253","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 21:56:29.253","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 22:07:56.292","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:07:56.383","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 22:07:56.383","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 22:07:56.383","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 22:07:56.393","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 22:07:56.400","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 22:07:56.400","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 22:08:14.509","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:08:14.556","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:08:15.391","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 22:08:15.438","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 22:08:15.445","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 22:08:15.445","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:08:15.493","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 22:08:15.540","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 22:08:15.541","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 22:33:41.274","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:33:41.365","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 22:33:41.365","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 22:33:41.365","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 22:33:41.375","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 22:33:41.382","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 22:33:41.382","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 22:33:59.157","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:33:59.205","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:34:00.024","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 22:34:00.071","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 22:34:00.078","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 22:34:00.078","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:34:00.121","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 22:34:00.171","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 22:34:00.172","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 22:34:19.582","caller":"service/dingtalk.go:212","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/oToMessages/batchSend","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"userIds":["010903622624-181076934"],"accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:34:19\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"robotCode\":\"dinglsqvmdgbj5xaidwz\",\"userIds\":[\"010903622624-181076934\"]}"}
{"level":"info","timestamp":"2025-11-10 22:34:19.645","caller":"service/dingtalk.go:212","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"F9A37D6E-3E05-7E57-842D-18A4A52D31E2\",\"code\":\"invalidParameter.robotCode.notExsit\",\"message\":\"错误描述: robot 不存在；解决方案:请确认 robotCode 是否正确；\"}","responseMap":{"code":"invalidParameter.robotCode.notExsit","message":"错误描述: robot 不存在；解决方案:请确认 robotCode 是否正确；","requestid":"F9A37D6E-3E05-7E57-842D-18A4A52D31E2"}}
{"level":"info","timestamp":"2025-11-10 22:43:38.829","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:43:38.921","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 22:43:38.921","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 22:43:38.921","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 22:43:38.931","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 22:43:38.938","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 22:43:38.938","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 22:43:55.684","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:43:55.728","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:43:56.514","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 22:43:56.557","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 22:43:56.557","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 22:43:56.557","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:43:56.601","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 22:43:56.647","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 22:43:56.647","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 22:44:04.899","caller":"service/dingtalk.go:212","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:44:04\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 22:44:04.958","caller":"service/dingtalk.go:212","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"7EB200EF-3A21-7A84-9D88-D8418CAE1E04\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"7EB200EF-3A21-7A84-9D88-D8418CAE1E04"}}
{"level":"info","timestamp":"2025-11-10 22:51:49.508","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:51:49.596","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 22:51:49.596","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 22:51:49.596","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 22:51:49.606","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 22:51:49.613","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 22:51:49.613","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 22:52:05.793","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:52:05.842","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:52:06.692","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 22:52:06.733","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 22:52:06.735","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 22:52:06.735","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:52:06.781","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 22:52:06.826","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 22:52:06.826","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 22:52:10.560","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:52:10\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 22:52:10.622","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"7628BDDF-981F-7EE5-A18F-2760B3996C24\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"7628BDDF-981F-7EE5-A18F-2760B3996C24"}}
{"level":"info","timestamp":"2025-11-10 22:52:37.488","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:52:37.577","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 22:52:37.577","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 22:52:37.577","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 22:52:37.587","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 22:52:37.594","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 22:52:37.594","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 22:52:54.694","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:52:54.740","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:52:55.544","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 22:52:55.589","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 22:52:55.593","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 22:52:55.593","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:52:55.638","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 22:52:55.686","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 22:52:55.686","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 22:53:03.442","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:53:03\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 22:53:03.496","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"280465B5-C7C8-7F0D-B913-DF854F9B6A5D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"280465B5-C7C8-7F0D-B913-DF854F9B6A5D"}}
{"level":"info","timestamp":"2025-11-10 22:56:41.503","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:56:41\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 22:56:41.556","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"D8758395-1017-7844-9266-0CC4B4607A77\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"D8758395-1017-7844-9266-0CC4B4607A77"}}
{"level":"info","timestamp":"2025-11-10 22:57:32.237","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:57:32\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 22:57:32.288","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"3C722B86-FD79-708E-8BEE-DAA080F7B119\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"3C722B86-FD79-708E-8BEE-DAA080F7B119"}}
{"level":"info","timestamp":"2025-11-10 22:57:38.183","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:57:38\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 22:57:38.235","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"BF5EC148-CDA9-7CBB-8420-B5E34E8B4A94\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"BF5EC148-CDA9-7CBB-8420-B5E34E8B4A94"}}
{"level":"info","timestamp":"2025-11-10 23:04:55.974","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 23:04:56.066","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 23:04:56.066","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 23:04:56.066","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 23:04:56.076","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 23:04:56.083","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 23:04:56.083","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 23:05:11.948","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 23:05:11.991","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 23:05:12.786","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 23:05:12.830","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 23:05:12.832","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 23:05:12.832","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 23:05:12.879","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 23:05:12.924","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 23:05:12.924","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 23:10:02.837","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 23:10:02.927","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 23:10:02.927","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 23:10:02.927","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 23:10:02.937","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 23:10:02.943","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 23:10:02.943","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 23:10:19.403","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 23:10:19.447","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 23:10:20.233","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 23:10:20.276","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 23:10:20.283","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 23:10:20.284","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 23:10:20.330","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 23:10:20.375","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 23:10:20.375","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 23:13:39.666","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 23:13:39.761","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 23:13:39.761","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 23:13:39.761","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 23:13:39.773","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 23:13:39.781","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 23:13:39.781","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 23:13:55.643","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 23:13:55.687","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 23:13:56.467","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 23:13:56.514","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 23:13:56.516","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 23:13:56.516","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 23:13:56.558","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 23:13:56.601","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 23:13:56.602","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"fatal","timestamp":"2025-11-10 23:13:56.602","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 23:14:01.180","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 23:14:01\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 23:14:01.232","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"6090A2FE-4DC5-71BA-A0F9-FE32C61D3E2C\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"6090A2FE-4DC5-71BA-A0F9-FE32C61D3E2C"}}
{"level":"info","timestamp":"2025-11-10 23:16:16.714","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 23:16:14\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 23:16:16.772","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"2B218F97-41AE-7D10-B1E2-701D98DDD4D3\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"2B218F97-41AE-7D10-B1E2-701D98DDD4D3"}}
{"level":"info","timestamp":"2025-11-10 23:20:54.664","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 23:20:54\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 23:20:54.723","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"49A6E97C-CA82-70F1-B7F4-A1D4FB93B636\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"49A6E97C-CA82-70F1-B7F4-A1D4FB93B636"}}
{"level":"info","timestamp":"2025-11-10 23:23:10.903","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:23:23.249","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:23:52.658","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:24:33.401","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:24:37.440","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:25:53.814","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:25:55.053","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:25:56.220","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:26:00.432","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:37:01.285","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 23:37:01\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 23:37:01.341","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"5CE185DD-0517-7AD3-843A-ADF3BB7170A3\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"5CE185DD-0517-7AD3-843A-ADF3BB7170A3"}}
{"level":"info","timestamp":"2025-11-10 23:37:03.339","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:37:04.241","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:37:12.977","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:53:32.686","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 00:06:25.248","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 00:06:47.121","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 00:07:09.771","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 00:30:34.743","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 00:30:34.837","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 00:30:34.837","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 00:30:34.837","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-11 00:30:34.842","caller":"bootstrap/database.go:14","msg":"数据库连接失败","error":"dial tcp [::1]:3306: connectex: No connection could be made because the target machine actively refused it.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:14\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-11 00:30:45.279","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 00:30:45.368","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 00:30:45.368","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 00:30:45.368","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-11 00:30:45.374","caller":"bootstrap/database.go:14","msg":"数据库连接失败","error":"dial tcp [::1]:3306: connectex: No connection could be made because the target machine actively refused it.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:14\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-11 00:31:07.181","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 00:31:07.274","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 00:31:07.274","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 00:31:07.274","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 00:31:07.286","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 00:31:07.292","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 00:31:07.292","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 00:31:23.566","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 00:31:23.610","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 00:31:24.406","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 00:31:24.452","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 00:31:24.461","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 00:31:24.461","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 00:31:24.506","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 00:31:24.550","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 00:31:24.550","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 01:49:54.479","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:49:54.569","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 01:49:54.570","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 01:49:54.570","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 01:49:54.592","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 01:49:54.604","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 01:49:54.604","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 01:50:12.103","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:50:12.145","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:50:12.979","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 01:50:13.024","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 01:50:13.030","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 01:50:13.031","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:50:13.078","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 01:50:13.127","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 01:50:13.127","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 01:51:49.423","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:51:49.514","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 01:51:49.515","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 01:51:49.515","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 01:51:49.523","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 01:51:49.529","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 01:51:49.529","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 01:52:06.161","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:52:06.205","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:52:06.988","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 01:52:07.032","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 01:52:07.039","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 01:52:07.039","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:52:07.088","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 01:52:07.136","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 01:52:07.137","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 01:52:10.763","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:52:10.853","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 01:52:10.853","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 01:52:10.853","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 01:52:10.862","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 01:52:10.868","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 01:52:10.868","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 01:52:28.180","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:52:28.229","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:52:29.068","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 01:52:29.111","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 01:52:29.113","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 01:52:29.113","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:52:29.157","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 01:52:29.206","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 01:52:29.206","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 01:56:57.503","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:56:57.599","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 01:56:57.599","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 01:56:57.599","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 01:56:57.607","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 01:56:57.613","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 01:56:57.613","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 01:57:14.252","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:57:14.301","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:57:15.085","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 01:57:15.129","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 01:57:15.134","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 01:57:15.134","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:57:15.178","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 01:57:15.223","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 01:57:15.223","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 02:03:09.060","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 02:03:09.149","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 02:03:09.149","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 02:03:09.149","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 02:03:09.158","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 02:03:09.164","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 02:03:09.164","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 02:03:25.566","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 02:03:25.614","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 02:03:26.407","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 02:03:26.454","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 02:03:26.457","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 02:03:26.457","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 02:03:26.505","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 02:03:26.549","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 02:03:26.549","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 02:29:57.115","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 02:29:57.209","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 02:29:57.210","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 02:29:57.210","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 02:29:57.220","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 02:29:57.226","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 02:29:57.226","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 02:30:12.948","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 02:30:12.995","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 02:30:13.772","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 02:30:13.815","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 02:30:13.817","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 02:30:13.817","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 02:30:13.859","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 02:30:13.903","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 02:30:13.904","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 03:56:43.891","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 03:56:46.507","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"96a1cdd6ac...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-11 03:56:46\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-11 03:56:46.565","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"32A310EB-EB67-7CF7-9ED6-20937CF04ACE\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"32A310EB-EB67-7CF7-9ED6-20937CF04ACE"}}
{"level":"info","timestamp":"2025-11-11 04:22:29.252","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 04:22:30.279","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 04:22:32.218","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 04:22:33.280","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 04:22:34.284","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 21:59:35.766","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 21:59:35.923","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 21:59:35.923","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 21:59:35.923","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 21:59:36.021","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 21:59:36.039","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 21:59:36.039","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 21:59:52.160","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 21:59:52.203","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 21:59:52.964","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 21:59:53.016","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 21:59:53.022","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 21:59:53.022","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 21:59:53.069","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 21:59:53.112","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 21:59:53.112","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 15:04:04.247","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 15:04:04.399","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 15:04:04.399","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 15:04:04.399","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 15:04:04.411","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 15:04:04.418","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 15:04:04.418","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 15:04:20.727","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 15:04:20.778","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 15:04:21.580","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 15:04:21.625","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 15:04:21.631","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 15:04:21.632","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 15:04:21.677","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 15:04:21.727","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 15:04:21.728","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 15:04:48.798","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 15:05:04.731","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 16:26:00.357","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 16:36:12.784","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 百威  \\\\n**报菜数量:** 1  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:36:12  \\\\n**备注:** 22  \\\\n\\\\n---\\\\n*报菜记录ID: 1*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:36:12.843","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"EFF5B0FE-B2C1-7B22-9A44-29358AC0ADDC\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"EFF5B0FE-B2C1-7B22-9A44-29358AC0ADDC"}}
{"level":"error","timestamp":"2025-11-12 16:36:12.843","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:36:12.844","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":1,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:36:43.627","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 小青菜3  \\\\n**报菜数量:** 15  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:36:43  \\\\n\\\\n---\\\\n*报菜记录ID: 2*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:36:43.681","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"DC8B3ED2-9AEE-7F62-8251-3B68EDD7D336\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"DC8B3ED2-9AEE-7F62-8251-3B68EDD7D336"}}
{"level":"error","timestamp":"2025-11-12 16:36:43.681","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:36:43.681","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":2,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.001","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 小青菜3  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:32  \\\\n**备注:** 21434343  \\\\n\\\\n---\\\\n*报菜记录ID: 3*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.054","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"7FB23DE7-7167-7320-9924-2EECB52CE27D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"7FB23DE7-7167-7320-9924-2EECB52CE27D"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.054","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.054","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":3,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.078","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 32  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:32  \\\\n**备注:** 43443  \\\\n\\\\n---\\\\n*报菜记录ID: 4*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.130","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"6DFAFDFA-9065-7A3F-8427-42ACC9A8706A\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"6DFAFDFA-9065-7A3F-8427-42ACC9A8706A"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.131","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.131","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":4,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.241","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 5435345  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n**备注:** 3243  \\\\n\\\\n---\\\\n*报菜记录ID: 5*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.295","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"66021D80-7F4D-7AD2-9982-1CCF0F8FB729\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"66021D80-7F4D-7AD2-9982-1CCF0F8FB729"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.295","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.295","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":5,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.388","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 白打  \\\\n**报菜数量:** 1  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n**备注:** 43  \\\\n\\\\n---\\\\n*报菜记录ID: 6*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.443","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"EA6559E3-6C40-716D-A086-750B478B67B1\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"EA6559E3-6C40-716D-A086-750B478B67B1"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.443","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.443","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":6,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.534","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 和爱  \\\\n**报菜数量:** 1  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n\\\\n---\\\\n*报菜记录ID: 7*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.586","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"7A1CCC94-A76C-7604-B512-A63C1C838DBE\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"7A1CCC94-A76C-7604-B512-A63C1C838DBE"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.586","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.586","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":7,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.702","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 搭撒大师  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n\\\\n---\\\\n*报菜记录ID: 8*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.761","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"C698AA1E-54EB-7633-A808-D2AA8A8143CA\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"C698AA1E-54EB-7633-A808-D2AA8A8143CA"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.762","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.763","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":8,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.850","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 32法师道昉44  \\\\n**报菜数量:** 1  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n\\\\n---\\\\n*报菜记录ID: 9*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.905","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"22B2E47E-BE77-7E66-B4F4-0B86262E003D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"22B2E47E-BE77-7E66-B4F4-0B86262E003D"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.905","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.905","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":9,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:34.010","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 道昉的  \\\\n**报菜数量:** 5  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n\\\\n---\\\\n*报菜记录ID: 10*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:34.070","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"FE473CBF-24BB-7951-8FE3-85AF761C72FB\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"FE473CBF-24BB-7951-8FE3-85AF761C72FB"}}
{"level":"error","timestamp":"2025-11-12 16:57:34.070","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:34.070","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":10,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:34.163","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** postman  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n\\\\n---\\\\n*报菜记录ID: 11*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:34.219","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"C8B9917A-1FC3-7F29-B39F-F52528F8D2A2\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"C8B9917A-1FC3-7F29-B39F-F52528F8D2A2"}}
{"level":"error","timestamp":"2025-11-12 16:57:34.220","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:34.220","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":11,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:34.342","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 寡凫单鹄  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:34  \\\\n\\\\n---\\\\n*报菜记录ID: 12*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:34.394","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"2E72DA28-762E-7F34-A458-CA18C1CD6F14\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"2E72DA28-762E-7F34-A458-CA18C1CD6F14"}}
{"level":"error","timestamp":"2025-11-12 16:57:34.394","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:34.394","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":12,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:18.654","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 小青菜3  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:18  \\\\n**备注:** 534  \\\\n\\\\n---\\\\n*报菜记录ID: 13*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:18.704","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"5187000E-AFED-720A-829A-2CEA4A75AD6B\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"5187000E-AFED-720A-829A-2CEA4A75AD6B"}}
{"level":"error","timestamp":"2025-11-12 16:59:18.705","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:18.706","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":13,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:18.750","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 32  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:18  \\\\n**备注:** 543  \\\\n\\\\n---\\\\n*报菜记录ID: 14*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:18.802","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"160185E1-B6DF-7413-A577-99BDC5B43A24\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"160185E1-B6DF-7413-A577-99BDC5B43A24"}}
{"level":"error","timestamp":"2025-11-12 16:59:18.802","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:18.802","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":14,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:18.910","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 5435345  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:18  \\\\n\\\\n---\\\\n*报菜记录ID: 15*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:18.969","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"600873E4-C0D1-798E-A94A-5220EBBCDC44\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"600873E4-C0D1-798E-A94A-5220EBBCDC44"}}
{"level":"error","timestamp":"2025-11-12 16:59:18.969","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:18.969","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":15,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:19.058","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 寡凫单鹄  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:18  \\\\n**备注:** 543  \\\\n\\\\n---\\\\n*报菜记录ID: 16*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:19.108","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"8E8FF84A-356E-7031-BDD8-F41C2B830A3A\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"8E8FF84A-356E-7031-BDD8-F41C2B830A3A"}}
{"level":"error","timestamp":"2025-11-12 16:59:19.109","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:19.109","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":16,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:19.204","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 和爱  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:19  \\\\n**备注:** 434  \\\\n\\\\n---\\\\n*报菜记录ID: 17*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:19.250","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"8D4346BB-92D0-760A-AB21-BA47E425E7AC\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"8D4346BB-92D0-760A-AB21-BA47E425E7AC"}}
{"level":"error","timestamp":"2025-11-12 16:59:19.250","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:19.250","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":17,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:19.343","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 白打  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:19  \\\\n**备注:** 5435665  \\\\n\\\\n---\\\\n*报菜记录ID: 18*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:19.391","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"DA18EF1F-7966-7AAA-9094-5B7E4294BF7C\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"DA18EF1F-7966-7AAA-9094-5B7E4294BF7C"}}
{"level":"error","timestamp":"2025-11-12 16:59:19.391","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:19.391","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":18,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:19.494","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 32法师道昉44  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:19  \\\\n**备注:** 5435  \\\\n\\\\n---\\\\n*报菜记录ID: 19*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:19.540","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"8536097E-8BF7-709B-913D-C66C72B3F98D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"8536097E-8BF7-709B-913D-C66C72B3F98D"}}
{"level":"error","timestamp":"2025-11-12 16:59:19.540","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:19.540","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":19,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:19.630","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** postman  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:19  \\\\n**备注:** 5435  \\\\n\\\\n---\\\\n*报菜记录ID: 20*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:19.676","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"0364DE3A-78BF-75C6-8E0E-D8A605D18A2E\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"0364DE3A-78BF-75C6-8E0E-D8A605D18A2E"}}
{"level":"error","timestamp":"2025-11-12 16:59:19.676","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:19.676","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":20,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:51.118","caller":"service/menu_report_listener.go:46","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 17:42:09.319","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 17:42:09.410","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 17:42:09.410","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 17:42:09.410","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 17:42:09.437","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 17:42:09.450","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 17:42:09.450","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 17:42:28.165","caller":"bootstrap/migrate.go:41","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 17:42:28.209","caller":"bootstrap/migrate.go:46","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 17:42:29.134","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 17:42:29.176","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 17:42:29.176","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 17:42:29.176","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 17:42:29.278","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 17:42:29.320","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 17:42:29.320","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 17:53:12.879","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 17:53:12.999","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 17:53:12.999","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 17:53:12.999","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 17:53:13.013","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 17:53:13.022","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 17:53:13.022","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 17:53:32.686","caller":"bootstrap/migrate.go:41","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 17:53:32.730","caller":"bootstrap/migrate.go:46","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 17:53:33.585","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 17:53:33.631","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 17:53:33.634","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 17:53:33.634","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 17:53:33.680","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 17:53:33.728","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 17:53:33.729","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 18:19:50.015","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 18:19:50.157","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 18:19:50.157","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 18:19:50.157","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 18:19:50.166","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 18:19:50.175","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 18:19:50.175","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 18:20:11.084","caller":"bootstrap/migrate.go:42","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 18:20:11.131","caller":"bootstrap/migrate.go:47","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 18:20:12.058","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 18:20:12.105","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 18:20:12.111","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 18:20:12.111","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 18:20:12.160","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 18:20:12.209","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 18:20:12.209","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 18:25:20.289","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 18:25:20.385","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 18:25:20.385","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 18:25:20.385","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 18:25:20.397","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 18:25:20.403","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 18:25:20.403","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 18:25:41.914","caller":"bootstrap/migrate.go:42","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 18:25:41.959","caller":"bootstrap/migrate.go:47","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 18:25:42.876","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 18:25:42.921","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 18:25:42.925","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 18:25:42.925","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 18:25:42.973","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 18:25:43.021","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 18:25:43.022","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 18:26:08.405","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 18:26:08.496","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 18:26:08.496","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 18:26:08.496","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 18:26:08.505","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 18:26:08.512","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 18:26:08.512","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 18:26:30.269","caller":"bootstrap/migrate.go:42","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 18:26:30.319","caller":"bootstrap/migrate.go:47","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 18:26:31.254","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 18:26:31.298","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 18:26:31.299","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 18:26:31.299","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 18:26:31.344","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 18:26:31.394","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 18:26:31.394","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 21:38:25.276","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 21:38:25.376","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 21:38:25.376","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 21:38:25.376","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 21:38:25.388","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 21:38:25.394","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 21:38:25.394","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 21:38:45.406","caller":"bootstrap/migrate.go:42","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 21:38:45.458","caller":"bootstrap/migrate.go:47","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 21:38:46.331","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 21:38:46.375","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 21:38:46.379","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 21:38:46.379","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 21:38:46.427","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 21:38:46.476","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 21:38:46.477","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 21:39:00.998","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"7100462abd...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 总部\\\\n**操作人员:** admin\\\\n**报菜时间:** 2025-11-12 21:39:00\\\\n\\\\n**报菜明细:**\\\\n\\\\n---\\\\n*报菜记录单ID: 7*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 21:39:01.054","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"F1C6C594-7948-74EC-9BB9-5E8943EEA615\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"F1C6C594-7948-74EC-9BB9-5E8943EEA615"}}
{"level":"error","timestamp":"2025-11-12 21:39:01.054","caller":"service/menu_report_listener.go:45","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:45\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 21:39:01.054","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":7,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 21:39:40.284","caller":"service/menu_report_listener.go:45","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 21:43:45.041","caller":"service/menu_report_listener.go:45","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 21:44:10.611","caller":"service/menu_report_listener.go:45","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 21:49:25.291","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 21:49:28.514","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"7100462abd...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-12 21:49:28\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 21:49:28.573","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"E976A7FB-0784-73C2-B676-A446B910D8F6\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"E976A7FB-0784-73C2-B676-A446B910D8F6"}}
{"level":"info","timestamp":"2025-11-12 21:49:29.804","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 21:49:33.165","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 21:49:34.220","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 21:49:34.624","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 21:49:35.512","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 21:49:37.595","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:00:23.303","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 22:00:23.397","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 22:00:23.397","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 22:00:23.397","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 22:00:23.408","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 22:00:23.415","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 22:00:23.415","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 22:00:43.437","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 22:00:43.484","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 22:00:44.351","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 22:00:44.393","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 22:00:44.393","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 22:00:44.395","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 22:00:44.438","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 22:00:44.483","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 22:00:44.484","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 22:01:41.532","caller":"service/dingtalk_notifier.go:39","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 22:01:41.606","caller":"service/menu_report_listener.go:45","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 22:02:05.606","caller":"service/dingtalk_notifier.go:39","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 22:02:05.698","caller":"service/menu_report_listener.go:45","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 22:04:05.428","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 22:04:05.523","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 22:04:05.523","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 22:04:05.523","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 22:04:05.531","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 22:04:05.539","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 22:04:05.539","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 22:04:25.498","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 22:04:25.541","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 22:04:26.432","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 22:04:26.475","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 22:04:26.480","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 22:04:26.480","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 22:04:26.526","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 22:04:26.574","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 22:04:26.575","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 22:04:30.398","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"7100462abd...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-12 22:04:30\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 22:04:30.457","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"073FF3FB-577C-7DEF-A579-B1B2407E5B92\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"073FF3FB-577C-7DEF-A579-B1B2407E5B92"}}
{"level":"info","timestamp":"2025-11-12 22:04:31.968","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"7100462abd...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-12 22:04:31\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 22:04:32.023","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"4750B1F1-2B81-727B-88B5-FC65DCB1B871\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"4750B1F1-2B81-727B-88B5-FC65DCB1B871"}}
{"level":"info","timestamp":"2025-11-12 22:04:34.081","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:05:00.330","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"7100462abd...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"### 📋 新报菜通知\\\\n\\\\n**门店**: 总部\\\\n\\\\n**操作员**: %!s(MISSING)\\\\n\\\\n**报菜品项**:\\\\n- **小青菜3**: 3 份\\\\n- **32**: 3 份\\\\n- **5435345**: 2 份\\\\n- **白打**: 3 份\\\\n- **和爱**: 2 份\\\\n- **32法师道昉44**: 3 份\\\\n- **postman**: 2 份\\\\n- **寡凫单鹄**: 2 份\\\\n- **小青菜3**: 3 份\\\\n- **32**: 3 份\\\\n- **5435345**: 2 份\\\\n- **白打**: 3 份\\\\n- **和爱**: 2 份\\\\n- **32法师道昉44**: 3 份\\\\n- **postman**: 2 份\\\\n- **寡凫单鹄**: 2 份\\\\n\\\\n**时间**: 2025-11-12 22:04:59\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 22:05:00.384","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"7440BF1E-E3B5-7FB0-8F5F-0D694CB0989A\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"7440BF1E-E3B5-7FB0-8F5F-0D694CB0989A"}}
{"level":"error","timestamp":"2025-11-12 22:05:00.384","caller":"service/dingtalk_notifier.go:39","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportNotifier).sendMenuReportNotification.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk_notifier.go:39"}
{"level":"info","timestamp":"2025-11-12 22:05:00.403","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"7100462abd...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 总部\\\\n**操作人员:** admin\\\\n**报菜时间:** 2025-11-12 22:04:59\\\\n\\\\n**报菜明细:**\\\\n- **小青菜3**: 数量 3\\\\n- **32**: 数量 3\\\\n- **5435345**: 数量 2\\\\n- **白打**: 数量 3\\\\n- **和爱**: 数量 2\\\\n- **32法师道昉44**: 数量 3\\\\n- **postman**: 数量 2\\\\n- **寡凫单鹄**: 数量 2\\\\n- **小青菜3**: 数量 3\\\\n- **32**: 数量 3\\\\n- **5435345**: 数量 2\\\\n- **白打**: 数量 3\\\\n- **和爱**: 数量 2\\\\n- **32法师道昉44**: 数量 3\\\\n- **postman**: 数量 2\\\\n- **寡凫单鹄**: 数量 2\\\\n\\\\n---\\\\n*报菜记录单ID: 13*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 22:05:00.456","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"21066B6D-08BE-7DD4-B134-6572836FB121\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"21066B6D-08BE-7DD4-B134-6572836FB121"}}
{"level":"error","timestamp":"2025-11-12 22:05:00.456","caller":"service/menu_report_listener.go:45","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:45\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 22:05:00.456","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":13,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 22:06:00.064","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:00.162","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:20.955","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:21.042","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:32.153","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:32.246","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:44.088","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:44.175","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 19:48:58.056","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-13 19:48:58.161","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-13 19:48:58.161","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-13 19:48:58.161","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-13 19:48:58.202","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-13 19:48:58.213","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-13 19:48:58.213","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-13 19:49:18.345","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-13 19:49:18.389","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-13 19:49:19.238","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-13 19:49:19.282","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-13 19:49:19.286","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-13 19:49:19.286","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-13 19:49:19.329","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-13 19:49:19.378","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-13 19:49:19.378","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-13 20:02:23.459","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 20:02:23.462","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 20:12:28.862","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 20:12:28.868","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 23:15:59.777","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 23:16:13.923","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"08e862fa4f...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"### 📋 新报菜通知\\\\n\\\\n**门店**: 总部\\\\n\\\\n**操作员**: %!s(MISSING)\\\\n\\\\n**报菜品项**:\\\\n- **和爱**: 3 份\\\\n- **白打**: 2 份\\\\n- **小青菜3**: 2 份\\\\n- **32**: 2 份\\\\n- **和爱**: 3 份\\\\n- **白打**: 2 份\\\\n- **小青菜3**: 2 份\\\\n- **32**: 2 份\\\\n\\\\n**时间**: 2025-11-13 23:16:13\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-13 23:16:13.924","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"20112f8a9b...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 总部\\\\n**操作人员:** admin\\\\n**报菜时间:** 2025-11-13 23:16:13\\\\n\\\\n**报菜明细:**\\\\n- **和爱**: 数量 3\\\\n- **白打**: 数量 2\\\\n- **小青菜3**: 数量 2\\\\n- **32**: 数量 2\\\\n- **和爱**: 数量 3\\\\n- **白打**: 数量 2\\\\n- **小青菜3**: 数量 2\\\\n- **32**: 数量 2\\\\n\\\\n---\\\\n*报菜记录单ID: 20*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-13 23:16:13.982","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"B0B341AF-3B63-702A-AF51-6424BE110D04\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"B0B341AF-3B63-702A-AF51-6424BE110D04"}}
{"level":"info","timestamp":"2025-11-13 23:16:13.983","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"422D51AC-206C-767A-8D7C-BBBE86A565CF\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"422D51AC-206C-767A-8D7C-BBBE86A565CF"}}
{"level":"error","timestamp":"2025-11-13 23:16:13.983","caller":"service/dingtalk_notifier.go:39","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportNotifier).sendMenuReportNotification.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk_notifier.go:39"}
{"level":"error","timestamp":"2025-11-13 23:16:13.982","caller":"service/menu_report_listener.go:45","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:45\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-13 23:16:13.983","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":20,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-13 23:16:55.536","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 23:16:55.621","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-14 19:32:01.179","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-14 19:32:01.324","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-14 19:32:01.324","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-14 19:32:01.324","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-14 19:32:01.338","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-14 19:32:01.348","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-14 19:32:01.348","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-14 19:32:20.789","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-14 19:32:20.833","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-14 19:32:21.678","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-14 19:32:21.720","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-14 19:32:21.720","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-14 19:32:21.720","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-14 19:32:21.763","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-14 19:32:21.807","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-14 19:32:21.808","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 18:40:31.469","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"fc1a62bbee...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 总部\\\\n**操作人员:** admin\\\\n**报菜时间:** 2025-11-16 18:40:30\\\\n\\\\n**报菜明细:**\\\\n- **白打**: 数量 2\\\\n- **和爱**: 数量 3\\\\n- **postman**: 数量 2\\\\n- **白打**: 数量 2\\\\n- **和爱**: 数量 3\\\\n- **postman**: 数量 2\\\\n\\\\n---\\\\n*报菜记录单ID: 22*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 18:40:31.470","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"c88a9c49d8...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"### 📋 新报菜通知\\\\n\\\\n**门店**: 总部\\\\n\\\\n**操作员**: %!s(MISSING)\\\\n\\\\n**报菜品项**:\\\\n- **白打**: 2 份\\\\n- **和爱**: 3 份\\\\n- **postman**: 2 份\\\\n- **白打**: 2 份\\\\n- **和爱**: 3 份\\\\n- **postman**: 2 份\\\\n\\\\n**时间**: 2025-11-16 18:40:30\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 18:40:31.523","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"D4A1D597-CFD5-7730-86E3-D5ABD5EAB65F\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"D4A1D597-CFD5-7730-86E3-D5ABD5EAB65F"}}
{"level":"info","timestamp":"2025-11-16 18:40:31.523","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"E9220B5C-B26D-75C7-BE8C-64C001A5CFC3\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"E9220B5C-B26D-75C7-BE8C-64C001A5CFC3"}}
{"level":"error","timestamp":"2025-11-16 18:40:31.523","caller":"service/dingtalk_notifier.go:39","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportNotifier).sendMenuReportNotification.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk_notifier.go:39"}
{"level":"error","timestamp":"2025-11-16 18:40:31.523","caller":"service/menu_report_listener.go:45","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:45\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-16 18:40:31.523","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":22,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 18:44:35.137","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 18:44:35.277","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 18:44:35.278","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 18:44:35.278","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 18:44:35.292","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 18:44:35.300","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 18:44:35.300","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 18:44:54.681","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 18:44:54.726","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 18:44:55.569","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 18:44:55.613","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 18:44:55.613","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 18:44:55.613","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 18:44:55.656","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 18:44:55.702","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 18:44:55.702","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 18:45:33.418","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 18:45:59.682","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 18:46:19.402","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 18:47:00.189","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 18:52:15.496","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 18:52:15.602","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 18:52:15.603","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 18:52:15.603","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 18:52:15.615","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 18:52:15.624","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 18:52:15.624","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 18:52:35.044","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 18:52:35.086","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 18:52:35.950","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 18:52:35.993","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 18:52:35.997","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 18:52:35.997","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 18:52:36.042","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 18:52:36.086","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 18:52:36.086","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 18:54:16.200","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 18:56:17.311","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 18:58:18.703","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 18:58:18.798","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 18:58:18.798","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 18:58:18.798","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 18:58:18.810","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 18:58:18.818","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 18:58:18.818","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 18:58:38.684","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 18:58:38.729","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 18:58:39.578","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 18:58:39.621","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 18:58:39.622","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 18:58:39.622","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 18:58:39.665","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 18:58:39.709","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 18:58:39.709","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:00:21.291","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 19:29:11.667","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:29:11.770","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 19:29:11.771","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 19:29:11.771","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 19:29:11.787","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 19:29:11.799","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 19:29:11.799","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 19:29:31.150","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:29:31.194","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:29:32.031","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 19:29:32.073","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 19:29:32.074","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 19:29:32.074","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:29:32.117","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 19:29:32.162","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 19:29:32.162","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:29:39.495","caller":"service/dingtalk.go:174","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 19:36:14.839","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:36:14.946","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 19:36:14.946","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 19:36:14.946","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 19:36:14.958","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 19:36:14.966","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 19:36:14.966","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 19:36:34.546","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:36:34.592","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:36:35.444","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 19:36:35.488","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 19:36:35.490","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 19:36:35.490","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:36:35.532","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 19:36:35.576","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 19:36:35.576","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:36:54.037","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":31,"imageSize":3755}
{"level":"info","timestamp":"2025-11-16 19:36:54.197","caller":"service/dingtalk.go:174","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 19:37:26.039","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:37:26.139","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 19:37:26.139","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 19:37:26.139","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 19:37:26.150","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 19:37:26.156","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 19:37:26.156","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 19:37:45.807","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:37:45.851","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:37:46.701","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 19:37:46.744","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 19:37:46.753","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 19:37:46.753","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:37:46.799","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 19:37:46.843","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 19:37:46.843","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:38:19.805","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":32,"imageSize":3350}
{"level":"info","timestamp":"2025-11-16 19:38:19.959","caller":"service/dingtalk.go:174","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 19:38:49.478","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":33,"imageSize":2963}
{"level":"info","timestamp":"2025-11-16 19:38:49.554","caller":"service/dingtalk.go:174","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 19:43:32.861","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":34,"imageSize":3428}
{"level":"info","timestamp":"2025-11-16 19:43:32.862","caller":"service/menu_report_listener.go:64","msg":"No enabled bots for store","storeID":999}
{"level":"info","timestamp":"2025-11-16 19:45:03.151","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":35,"imageSize":3363}
{"level":"info","timestamp":"2025-11-16 19:45:03.292","caller":"service/dingtalk.go:128","msg":"Uploading image to DingTalk","imageSize":3363}
{"level":"error","timestamp":"2025-11-16 19:45:03.455","caller":"service/dingtalk.go:128","msg":"Failed to upload image to DingTalk","error":"dingtalk upload error: code=43008, msg=参数需要multipart类型","imageSize":3363,"stacktrace":"github.com/Kevin-Jii/tower-go/service.(*DingTalkService).BroadcastToStoreWithImage\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:128\ngithub.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-16 19:45:03.455","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"failed to upload image: dingtalk upload error: code=43008, msg=参数需要multipart类型","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 19:45:03.520","caller":"service/dingtalk.go:174","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 19:45:03.520","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":35,"storeID":1000,"error":"failed to upload image: dingtalk upload error: code=43008, msg=参数需要multipart类型","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 19:50:16.160","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:50:16.282","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 19:50:16.282","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 19:50:16.282","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 19:50:16.292","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 19:50:16.299","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 19:50:16.299","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 19:50:35.785","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:50:35.829","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:50:36.673","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 19:50:36.716","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 19:50:36.717","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 19:50:36.717","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:50:36.760","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 19:50:36.804","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 19:50:36.804","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:50:52.223","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":36,"imageSize":3744}
{"level":"info","timestamp":"2025-11-16 19:50:52.291","caller":"service/dingtalk.go:129","msg":"Uploading image to DingTalk","imageSize":3744}
{"level":"info","timestamp":"2025-11-16 19:50:52.800","caller":"service/dingtalk.go:129","msg":"Image uploaded successfully","mediaID":"@lALPD2CVmsLF4S_NAczNAyA"}
{"level":"info","timestamp":"2025-11-16 19:50:52.800","caller":"service/dingtalk.go:271","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"c88a9c49d8...","requestBody":"{\"msgKey\":\"sampleImageMsg\",\"msgParam\":\"{\\\"image\\\":{\\\"mediaId\\\":\\\"@lALPD2CVmsLF4S_NAczNAyA\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 19:50:52.852","caller":"service/dingtalk.go:271","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"8E0555C6-7DF9-73D4-B286-3F2179CC9AD0\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"8E0555C6-7DF9-73D4-B286-3F2179CC9AD0"}}
{"level":"warn","timestamp":"2025-11-16 19:50:52.852","caller":"service/dingtalk.go:129","msg":"Failed to send image, continuing with text","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法"}
{"level":"info","timestamp":"2025-11-16 19:50:52.903","caller":"service/dingtalk.go:227","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"c88a9c49d8...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 千岛湖野鱼馆\\\\n**操作人员:** 井康\\\\n**报菜时间:** 2025-11-16 19:50:51\\\\n\\\\n**报菜明细:**\\\\n- **鸡蛋**: 数量 2\\\\n- **辣椒**: 数量 1\\\\n- **小青菜**: 数量 1\\\\n\\\\n---\\\\n*报菜记录单ID: 36*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 19:50:52.954","caller":"service/dingtalk.go:227","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"55905D4D-24F6-7980-9E41-68119A1B093E\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"55905D4D-24F6-7980-9E41-68119A1B093E"}}
{"level":"error","timestamp":"2025-11-16 19:50:52.954","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 19:50:52.954","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 19:50:53.020","caller":"service/dingtalk.go:180","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 19:50:53.020","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":36,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 19:52:21.073","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:52:21.163","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 19:52:21.163","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 19:52:21.164","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 19:52:21.184","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 19:52:21.190","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 19:52:21.190","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 19:52:40.275","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:52:40.318","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:52:41.155","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 19:52:41.198","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 19:52:41.199","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 19:52:41.199","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:52:41.243","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 19:52:41.287","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 19:52:41.287","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:53:21.756","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:53:21.846","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 19:53:21.846","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 19:53:21.846","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 19:53:21.857","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 19:53:21.864","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 19:53:21.864","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 19:53:41.444","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:53:41.493","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:53:42.404","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 19:53:42.450","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 19:53:42.456","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 19:53:42.456","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:53:42.506","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 19:53:42.554","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 19:53:42.554","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:53:49.496","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":37,"imageSize":2961}
{"level":"warn","timestamp":"2025-11-16 19:53:49.503","caller":"service/dingtalk.go:129","msg":"Stream mode image sending not fully supported yet, sending text only","botID":1,"imageSize":2961}
{"level":"info","timestamp":"2025-11-16 19:53:49.572","caller":"service/dingtalk.go:227","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"c88a9c49d8...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 千岛湖野鱼馆\\\\n**操作人员:** 井康\\\\n**报菜时间:** 2025-11-16 19:53:49\\\\n\\\\n**报菜明细:**\\\\n- **鸡蛋**: 数量 1\\\\n\\\\n---\\\\n*报菜记录单ID: 37*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 19:53:49.636","caller":"service/dingtalk.go:227","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"8135B67D-0962-74DB-95AD-AD23495A8BE7\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"8135B67D-0962-74DB-95AD-AD23495A8BE7"}}
{"level":"error","timestamp":"2025-11-16 19:53:49.637","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 19:53:49.637","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 19:53:49.791","caller":"service/dingtalk.go:180","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 19:53:49.791","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":37,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 19:54:26.233","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":38,"imageSize":3373}
{"level":"warn","timestamp":"2025-11-16 19:54:26.235","caller":"service/dingtalk.go:129","msg":"Stream mode image sending not fully supported yet, sending text only","botID":1,"imageSize":3373}
{"level":"info","timestamp":"2025-11-16 19:54:26.296","caller":"service/dingtalk.go:227","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"c88a9c49d8...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 千岛湖野鱼馆\\\\n**操作人员:** 井康\\\\n**报菜时间:** 2025-11-16 19:54:25\\\\n\\\\n**报菜明细:**\\\\n- **鸡蛋**: 数量 1\\\\n- **辣椒**: 数量 1\\\\n\\\\n---\\\\n*报菜记录单ID: 38*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 19:54:26.359","caller":"service/dingtalk.go:227","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"05F0979A-53A9-7E47-9982-AE5E74F22A3D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"05F0979A-53A9-7E47-9982-AE5E74F22A3D"}}
{"level":"error","timestamp":"2025-11-16 19:54:26.360","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 19:54:26.360","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 19:54:26.426","caller":"service/dingtalk.go:180","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 19:54:26.426","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":38,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 19:54:46.841","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":39,"imageSize":5618}
{"level":"info","timestamp":"2025-11-16 19:54:46.843","caller":"service/menu_report_listener.go:64","msg":"No enabled bots for store","storeID":999}
{"level":"info","timestamp":"2025-11-16 20:08:09.410","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 20:08:09.501","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 20:08:09.501","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 20:08:09.501","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 20:08:09.511","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 20:08:09.518","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 20:08:09.518","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 20:08:28.784","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 20:08:28.828","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 20:08:29.664","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 20:08:29.707","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 20:08:29.708","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 20:08:29.708","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 20:08:29.752","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 20:08:29.796","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 20:08:29.796","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 20:08:41.148","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":40,"imageSize":3432}
{"level":"info","timestamp":"2025-11-16 20:08:41.154","caller":"service/menu_report_listener.go:64","msg":"No enabled bots for store","storeID":999}
{"level":"info","timestamp":"2025-11-16 20:09:01.339","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":41,"imageSize":3330}
{"level":"info","timestamp":"2025-11-16 20:09:01.939","caller":"service/dingtalk.go:257","msg":"Upload image response","statusCode":200,"response":{"created_at":1763294941663,"errcode":0,"errmsg":"ok","media_id":"@lALPD2Cw46egEo_NAZrNAyA","type":"image"}}
{"level":"info","timestamp":"2025-11-16 20:09:01.939","caller":"service/dingtalk.go:129","msg":"Image uploaded successfully, preparing announcement","botID":1,"mediaID":"@lALPD2Cw46egEo_NAZrNAyA","imageSize":3330}
{"level":"info","timestamp":"2025-11-16 20:09:01.939","caller":"service/dingtalk.go:276","msg":"Sending announcement to DingTalk","url":"https://oapi.dingtalk.com/topapi/message/corpconversation/asyncsend_v2?access_token=c88a9c49d8e73b3ab47ec52539a347a6","agentID":2974263828,"title":"📋 新报菜通知","mediaID":"@lALPD2Cw46egEo_NAZrNAyA","requestBody":"{\"agent_id\":2974263828,\"msg\":\"{\\\"msgtype\\\":\\\"oa\\\",\\\"oa\\\":{\\\"body\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 20:09:00\\\\n\\\\n报菜明细:\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 41\\\",\\\"form\\\":[{\\\"key\\\":\\\"详细信息\\\",\\\"value\\\":\\\"📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 20:09:00\\\\n\\\\n报菜明细:\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 41\\\"}],\\\"image\\\":\\\"@lALPD2Cw46egEo_NAZrNAyA\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"},\\\"head\\\":{\\\"bgcolor\\\":\\\"FFBBBBBB\\\",\\\"text\\\":\\\"📋 新报菜通知\\\"},\\\"message_url\\\":\\\"dingtalk://dingtalkclient/page/link?url=https://www.dingtalk.com\\\"}}\",\"to_all_user\":true}"}
{"level":"info","timestamp":"2025-11-16 20:09:01.980","caller":"service/dingtalk.go:276","msg":"Announcement response from DingTalk","statusCode":200,"response":{"errcode":41,"errmsg":"Invalid arguments:msg","request_id":"16mai73j6d3ui"}}
{"level":"error","timestamp":"2025-11-16 20:09:01.980","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk announcement error: code=41, msg=Invalid arguments:msg","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 20:09:01.980","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 20:09:02.040","caller":"service/dingtalk.go:180","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 20:09:02.040","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":41,"storeID":1000,"error":"dingtalk announcement error: code=41, msg=Invalid arguments:msg","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:25:15.014","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:25:15.113","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 23:25:15.113","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 23:25:15.113","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 23:25:15.143","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 23:25:15.152","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 23:25:15.152","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 23:25:34.330","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:25:34.374","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:25:35.210","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 23:25:35.253","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 23:25:35.254","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 23:25:35.254","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:25:35.298","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 23:25:35.341","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 23:25:35.341","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 23:26:11.546","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":42,"imageSize":3734}
{"level":"info","timestamp":"2025-11-16 23:26:11.608","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/232611_ff3c8fd1.png","imageSize":3734}
{"level":"info","timestamp":"2025-11-16 23:26:11.608","caller":"service/dingtalk.go:265","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 千岛湖野鱼馆\\\\n**操作人员:** 井康\\\\n**报菜时间:** 2025-11-16 23:26:11\\\\n\\\\n**报菜明细:**\\\\n- **鸡蛋**: 数量 1\\\\n- **辣椒**: 数量 1\\\\n- **小青菜**: 数量 1\\\\n\\\\n---\\\\n*报菜记录单ID: 42*\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/232611_ff3c8fd1.png)\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:26:11.676","caller":"service/dingtalk.go:265","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"05722F35-1EB3-7CA9-A10A-7C56A06632BC\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"05722F35-1EB3-7CA9-A10A-7C56A06632BC"}}
{"level":"warn","timestamp":"2025-11-16 23:26:11.676","caller":"service/dingtalk.go:326","msg":"Markdown format not supported, falling back to plain text with link","botID":1,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法"}
{"level":"info","timestamp":"2025-11-16 23:26:11.676","caller":"service/dingtalk.go:284","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n## 📋 新报菜通知\\\\n\\\\n**门店名称:** 千岛湖野鱼馆\\\\n**操作人员:** 井康\\\\n**报菜时间:** 2025-11-16 23:26:11\\\\n\\\\n**报菜明细:**\\\\n- **鸡蛋**: 数量 1\\\\n- **辣椒**: 数量 1\\\\n- **小青菜**: 数量 1\\\\n\\\\n---\\\\n*报菜记录单ID: 42*\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/232611_ff3c8fd1.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:26:11.725","caller":"service/dingtalk.go:284","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"D64B8479-F76C-7179-894F-0F12329FF062\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"D64B8479-F76C-7179-894F-0F12329FF062"}}
{"level":"error","timestamp":"2025-11-16 23:26:11.725","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:26:11.725","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:26:11.931","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:26:11.931","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":42,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:28:41.165","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:28:41.278","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 23:28:41.278","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 23:28:41.278","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 23:28:41.292","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 23:28:41.298","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 23:28:41.298","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 23:29:00.369","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:29:00.412","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:29:01.248","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 23:29:01.291","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 23:29:01.292","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 23:29:01.292","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:29:01.336","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 23:29:01.380","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 23:29:01.380","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 23:29:14.476","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":43,"imageSize":3370}
{"level":"info","timestamp":"2025-11-16 23:29:14.541","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/232914_e79224cc.png","imageSize":3370}
{"level":"info","timestamp":"2025-11-16 23:29:14.542","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:29:14\\\\n\\\\n报菜明细:\\\\n• 辣椒: 数量 1\\\\n• 鸡蛋: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 43\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/232914_e79224cc.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:29:14.594","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"D6452C0B-98C1-76F4-A3DF-48019F5BA747\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"D6452C0B-98C1-76F4-A3DF-48019F5BA747"}}
{"level":"error","timestamp":"2025-11-16 23:29:14.594","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:29:14.594","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:29:14.757","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:29:14.757","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":43,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:30:32.405","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:30:32.527","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 23:30:32.527","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 23:30:32.527","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 23:30:32.536","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 23:30:32.546","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 23:30:32.546","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 23:30:37.904","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:30:37.989","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 23:30:37.989","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 23:30:37.989","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 23:30:37.999","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 23:30:38.006","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 23:30:38.006","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 23:30:51.643","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:30:51.686","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:30:52.523","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 23:30:52.566","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 23:30:52.567","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 23:30:52.567","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:30:52.611","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 23:30:52.655","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 23:30:52.655","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 23:31:06.121","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":44,"imageSize":22735}
{"level":"info","timestamp":"2025-11-16 23:31:06.182","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/233106_89244100.png","imageSize":22735}
{"level":"info","timestamp":"2025-11-16 23:31:06.182","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:31:05\\\\n\\\\n报菜明细:\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 44\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/233106_89244100.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:31:06.237","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"B692DB8A-205D-7E92-B34E-664FEDC609F9\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"B692DB8A-205D-7E92-B34E-664FEDC609F9"}}
{"level":"error","timestamp":"2025-11-16 23:31:06.237","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:31:06.237","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:31:06.384","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:31:06.384","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":44,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:32:24.230","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":45,"imageSize":26473}
{"level":"info","timestamp":"2025-11-16 23:32:24.298","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/233224_f7d9237c.png","imageSize":26473}
{"level":"info","timestamp":"2025-11-16 23:32:24.298","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:32:23\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1 (22)\\\\n• 小青菜: 数量 1 (备注信息11)\\\\n\\\\n---\\\\n报菜记录单ID: 45\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/233224_f7d9237c.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:32:24.354","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"05B5AE6A-954E-711D-8FEE-BDD3A292D141\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"05B5AE6A-954E-711D-8FEE-BDD3A292D141"}}
{"level":"error","timestamp":"2025-11-16 23:32:24.354","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:32:24.354","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:32:24.418","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:32:24.418","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":45,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:34:28.320","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":46,"imageSize":24626}
{"level":"info","timestamp":"2025-11-16 23:34:28.459","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/233428_5d46d655.png","imageSize":24626}
{"level":"info","timestamp":"2025-11-16 23:34:28.460","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:34:27\\\\n\\\\n报菜明细:\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 鸡蛋: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 46\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/233428_5d46d655.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:34:28.514","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"59E72509-757C-7A52-AEDA-1C2ECB67A097\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"59E72509-757C-7A52-AEDA-1C2ECB67A097"}}
{"level":"error","timestamp":"2025-11-16 23:34:28.514","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:34:28.514","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:34:28.666","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:34:28.666","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":46,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:41:20.837","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":47,"imageSize":38530}
{"level":"info","timestamp":"2025-11-16 23:41:20.838","caller":"service/menu_report_listener.go:64","msg":"No enabled bots for store","storeID":999}
{"level":"info","timestamp":"2025-11-16 23:41:44.355","caller":"utils/employee.go:127","msg":"生成菜品分类编码"}
{"level":"info","timestamp":"2025-11-16 23:42:34.374","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":48,"imageSize":30547}
{"level":"info","timestamp":"2025-11-16 23:42:34.532","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/234234_44061b62.png","imageSize":30547}
{"level":"info","timestamp":"2025-11-16 23:42:34.532","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:42:33\\\\n\\\\n报菜明细:\\\\n• 小黄鱼: 数量 6\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 3\\\\n• 鸡蛋: 数量 9\\\\n• 辣椒: 数量 3\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 48\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/234234_44061b62.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:42:34.585","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"0DF648D5-385F-7188-B4CF-180689528F6D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"0DF648D5-385F-7188-B4CF-180689528F6D"}}
{"level":"error","timestamp":"2025-11-16 23:42:34.585","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:42:34.585","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:42:34.743","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:42:34.743","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":48,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:53:38.564","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:53:38.653","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 23:53:38.653","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 23:53:38.653","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 23:53:38.662","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 23:53:38.668","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 23:53:38.668","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 23:53:59.171","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:53:59.214","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:54:00.065","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 23:54:00.106","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 23:54:00.107","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 23:54:00.107","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:54:00.150","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 23:54:00.194","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 23:54:00.194","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 23:54:37.712","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":49,"imageSize":30710}
{"level":"info","timestamp":"2025-11-16 23:54:37.780","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/235437_b833be04.png","imageSize":30710}
{"level":"info","timestamp":"2025-11-16 23:54:37.780","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:54:37\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 3\\\\n• 辣椒: 数量 3\\\\n• 小青菜: 数量 5\\\\n• 小黄鱼: 数量 3\\\\n• 牛肉: 数量 3\\\\n• 里脊肉: 数量 4\\\\n\\\\n---\\\\n报菜记录单ID: 49\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/235437_b833be04.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:54:37.839","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"539CCAD2-D118-78F1-8A82-D67FEEBF099C\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"539CCAD2-D118-78F1-8A82-D67FEEBF099C"}}
{"level":"error","timestamp":"2025-11-16 23:54:37.840","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:54:37.840","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:54:37.992","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:54:37.992","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":49,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:55:12.606","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":50,"imageSize":27663}
{"level":"info","timestamp":"2025-11-16 23:55:12.664","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/235512_5265f894.png","imageSize":27663}
{"level":"info","timestamp":"2025-11-16 23:55:12.664","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:55:12\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 50\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/235512_5265f894.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:55:12.719","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"4B00B4DF-0CA5-7A74-A3AE-8C4D30169725\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"4B00B4DF-0CA5-7A74-A3AE-8C4D30169725"}}
{"level":"error","timestamp":"2025-11-16 23:55:12.719","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:55:12.719","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:55:12.780","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:55:12.781","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":50,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 15:57:48.939","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-17 15:57:49.079","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-17 15:57:49.079","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-17 15:57:49.079","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-17 15:57:49.095","caller":"bootstrap/database.go:14","msg":"数据库连接失败","error":"Error 1045 (28000): Access denied for user 'root'@'172.17.0.1' (using password: YES)","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:14\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-17 15:58:44.191","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-17 15:58:44.276","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-17 15:58:44.277","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-17 15:58:44.277","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-17 15:58:44.466","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-17 15:58:44.486","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-17 15:58:44.486","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-17 15:59:07.953","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-17 15:59:07.985","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-17 15:59:10.985","caller":"seeding/seed.go:139","msg":"超级门店创建成功","store_id":999}
{"level":"info","timestamp":"2025-11-17 15:59:11.220","caller":"seeding/seed.go:167","msg":"超级管理员角色创建成功","role_id":999}
{"level":"info","timestamp":"2025-11-17 15:59:11.340","caller":"seeding/seed.go:197","msg":"✅ 超级管理员创建成功","user_id":999,"username":"admin","phone":"13082848180","employee_no":"999999","default_password":"$X:NUFxq[x1yb24U"}
{"level":"warn","timestamp":"2025-11-17 15:59:11.340","caller":"seeding/seed.go:204","msg":"⚠️  重要提示：请立即修改默认密码，首次登录后请修改为自定义密码！"}
{"level":"info","timestamp":"2025-11-17 15:59:11.427","caller":"utils/employee.go:99","msg":"生成门店编码"}
{"level":"info","timestamp":"2025-11-17 15:59:11.547","caller":"seeding/seed.go:282","msg":"门店编码已补全","store_id":999}
{"level":"info","timestamp":"2025-11-17 15:59:11.722","caller":"seeding/seed_dingtalk_menus.go:118","msg":"✅ 钉钉管理菜单创建成功","count":7}
{"level":"info","timestamp":"2025-11-17 15:59:13.089","caller":"seeding/seed_dingtalk_menus.go:152","msg":"✅ admin 角色钉钉权限分配成功","role_id":1}
{"level":"info","timestamp":"2025-11-17 15:59:14.344","caller":"seeding/seed_dingtalk_menus.go:159","msg":"✅ 超级管理员钉钉权限分配成功","role_id":999}
{"level":"info","timestamp":"2025-11-17 15:59:14.345","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-17 15:59:14.976","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-17 15:59:15.090","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-17 15:59:15.091","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-17 15:59:15.091","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-17 15:59:15.288","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-17 15:59:15.297","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-17 15:59:15.297","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-17 15:59:49.885","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-17 15:59:49.918","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-17 15:59:51.321","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-17 15:59:51.353","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-17 15:59:51.417","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-17 15:59:51.417","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-17 15:59:51.680","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"全局Stream机器人(自动创建)","clientID":"dinglsqvmdgbj5xaidwz"}
{"level":"info","timestamp":"2025-11-17 15:59:51.743","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-17 15:59:51.743","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-17 16:00:12.192","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-17 16:00:12.278","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-17 16:00:12.278","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-17 16:00:12.278","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-17 16:00:12.462","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-17 16:00:12.470","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-17 16:00:12.470","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-17 16:00:44.720","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-17 16:00:44.751","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-17 16:00:46.013","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-17 16:00:46.043","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-17 16:00:46.103","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-17 16:00:46.103","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-17 16:00:46.174","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-17 16:00:46.234","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-17 16:00:46.234","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-17 16:02:31.146","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-17 16:02:31.230","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-17 16:02:31.230","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-17 16:02:31.230","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-17 16:02:31.413","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-17 16:02:31.422","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-17 16:02:31.422","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-17 16:03:03.805","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-17 16:03:03.834","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-17 16:03:05.100","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-17 16:03:05.129","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-17 16:03:05.190","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-17 16:03:05.190","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-17 16:03:05.254","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-17 16:03:05.313","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-17 16:03:05.313","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-17 16:04:53.517","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-17 16:04:53.613","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-17 16:04:53.613","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-17 16:04:53.613","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-17 16:04:53.797","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-17 16:04:53.806","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-17 16:04:53.806","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-17 16:05:26.271","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-17 16:05:26.301","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-17 16:05:27.559","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-17 16:05:27.589","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-17 16:05:27.651","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-17 16:05:27.651","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-17 16:05:27.712","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-17 16:05:27.772","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-17 16:05:27.772","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-17 16:09:04.278","caller":"utils/employee.go:127","msg":"生成菜品分类编码"}
{"level":"info","timestamp":"2025-11-17 16:09:40.924","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":1,"imageSize":22491}
{"level":"error","timestamp":"2025-11-17 16:09:41.115","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:09:41.115","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":1,"storeID":999,"error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 16:13:28.631","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":2}
{"level":"info","timestamp":"2025-11-17 16:13:43.764","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":2,"imageSize":22599}
{"level":"error","timestamp":"2025-11-17 16:13:43.826","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:13:43.826","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":2,"storeID":999,"error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 16:14:52.987","caller":"utils/employee.go:99","msg":"生成门店编码"}
{"level":"error","timestamp":"2025-11-17 16:19:51.965","caller":"utils/employee.go:32","msg":"解析工号失败","stacktrace":"github.com/Kevin-Jii/tower-go/utils.GenerateEmployeeNo\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/employee.go:32\ngithub.com/Kevin-Jii/tower-go/service.(*UserService).CreateUser\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/user.go:39\ngithub.com/Kevin-Jii/tower-go/controller.(*UserController).CreateUser\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/user.go:67\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.RegisterRoutes.StoreAuthMiddleware.AuthMiddleware.func6\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:44\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"info","timestamp":"2025-11-17 16:22:26.087","caller":"utils/employee.go:46","msg":"生成新工号"}
{"level":"info","timestamp":"2025-11-17 16:23:46.303","caller":"utils/employee.go:46","msg":"生成新工号"}
{"level":"info","timestamp":"2025-11-17 16:24:07.915","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":2}
{"level":"info","timestamp":"2025-11-17 16:25:10.380","caller":"utils/employee.go:127","msg":"生成菜品分类编码"}
{"level":"info","timestamp":"2025-11-17 16:25:44.241","caller":"utils/employee.go:127","msg":"生成菜品分类编码"}
{"level":"info","timestamp":"2025-11-17 16:27:32.678","caller":"utils/employee.go:127","msg":"生成菜品分类编码"}
{"level":"info","timestamp":"2025-11-17 16:28:45.618","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":3,"imageSize":42712}
{"level":"error","timestamp":"2025-11-17 16:28:45.685","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:28:45.686","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":3,"storeID":1000,"error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 16:30:15.515","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":4,"imageSize":40907}
{"level":"error","timestamp":"2025-11-17 16:30:15.583","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:30:15.583","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":4,"storeID":1000,"error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 16:32:25.603","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":5,"imageSize":29577}
{"level":"error","timestamp":"2025-11-17 16:32:25.670","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:32:25.670","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":5,"storeID":1000,"error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 16:34:26.180","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":6,"imageSize":42989}
{"level":"info","timestamp":"2025-11-17 16:34:26.394","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://47.120.27.64:8899/images/2025/11/17/163426_6c72dcea.png","imageSize":42989}
{"level":"info","timestamp":"2025-11-17 16:34:26.394","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"2cc804cef3...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 李四\\\\n报菜时间: 2025-11-17 16:34:25\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 鸭蛋: 数量 1\\\\n• 鹅蛋: 数量 1\\\\n• 甲鱼: 数量 1\\\\n• 鲫鱼片: 数量 1\\\\n• 鸡肉(肉鸡): 数量 1\\\\n• 鸡肉(公鸡): 数量 1\\\\n• 鸭头: 数量 1\\\\n• 鸭爪: 数量 1\\\\n• 彩椒: 数量 1\\\\n• 毛毛菜: 数量 4\\\\n• 红椒: 数量 7\\\\n• 青椒: 数量 5\\\\n\\\\n---\\\\n报菜记录单ID: 6\\\\n\\\\n![报菜明细](http://47.120.27.64:8899/images/2025/11/17/163426_6c72dcea.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-17 16:34:26.444","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"6526E0DD-F7F8-7BB0-A04C-26CB16793554\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"6526E0DD-F7F8-7BB0-A04C-26CB16793554"}}
{"level":"error","timestamp":"2025-11-17 16:34:26.444","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:34:26.444","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":6,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 16:41:07.015","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":7,"imageSize":28724}
{"level":"info","timestamp":"2025-11-17 16:41:07.210","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://47.120.27.64:8899/images/2025/11/17/164107_e8d6dbc5.png","imageSize":28724}
{"level":"info","timestamp":"2025-11-17 16:41:07.211","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"2cc804cef3...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 李四\\\\n报菜时间: 2025-11-17 16:41:06\\\\n\\\\n报菜明细:\\\\n• 甲鱼: 数量 1\\\\n• 鲫鱼片: 数量 1\\\\n• 鸡肉(公鸡): 数量 1\\\\n• 鸡肉(肉鸡): 数量 1\\\\n• 鸭头: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 7\\\\n\\\\n![报菜明细](http://47.120.27.64:8899/images/2025/11/17/164107_e8d6dbc5.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-17 16:41:07.266","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"C9F1614C-60E3-7124-B0F4-AB8B63315F32\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"C9F1614C-60E3-7124-B0F4-AB8B63315F32"}}
{"level":"error","timestamp":"2025-11-17 16:41:07.266","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:41:07.266","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":7,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 17:34:34.513","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":8,"imageSize":22548}
{"level":"info","timestamp":"2025-11-17 17:34:34.881","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://47.120.27.64:8899/images/2025/11/17/173434_c0087e89.png","imageSize":22548}
{"level":"info","timestamp":"2025-11-17 17:34:34.881","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"2cc804cef3...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 总部\\\\n操作人员: 超级管理员\\\\n报菜时间: 2025-11-17 17:34:33\\\\n\\\\n报菜明细:\\\\n• 小酥肉: 数量 1\\\\n• 猪大肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 8\\\\n\\\\n![报菜明细](http://47.120.27.64:8899/images/2025/11/17/173434_c0087e89.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-17 17:34:34.941","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"40ED7DE2-67F2-7559-A912-AF94EBC3AD3D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"40ED7DE2-67F2-7559-A912-AF94EBC3AD3D"}}
{"level":"error","timestamp":"2025-11-17 17:34:34.941","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 17:34:34.941","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":8,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 17:35:05.802","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":9,"imageSize":24638}
{"level":"info","timestamp":"2025-11-17 17:35:05.923","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://47.120.27.64:8899/images/2025/11/17/173505_96101e4c.png","imageSize":24638}
{"level":"info","timestamp":"2025-11-17 17:35:05.923","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"2cc804cef3...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 李四\\\\n报菜时间: 2025-11-17 17:35:05\\\\n\\\\n报菜明细:\\\\n• 甲鱼: 数量 2\\\\n• 鲫鱼片: 数量 2\\\\n• 鸡肉(公鸡): 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 9\\\\n\\\\n![报菜明细](http://47.120.27.64:8899/images/2025/11/17/173505_96101e4c.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-17 17:35:05.981","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"F2875BA8-7CF0-7F65-829A-49D8E3460B21\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"F2875BA8-7CF0-7F65-829A-49D8E3460B21"}}
{"level":"error","timestamp":"2025-11-17 17:35:05.981","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 17:35:05.981","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":9,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 19:18:22.338","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 19:18:22.478","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 19:18:22.478","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 19:18:22.478","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 19:18:22.523","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 19:18:22.543","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 19:18:22.543","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 19:18:43.494","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 19:18:43.540","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 19:18:44.432","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 19:18:44.478","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 19:18:44.480","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 19:18:44.480","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 19:18:44.523","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 19:18:44.567","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 19:18:44.567","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 19:19:54.729","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":51,"imageSize":27604}
{"level":"info","timestamp":"2025-11-18 19:19:54.823","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/191954_49783fab.png","imageSize":27604}
{"level":"info","timestamp":"2025-11-18 19:19:54.823","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 19:19:54\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 51\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/191954_49783fab.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 19:19:54.883","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"089B5808-0729-739D-BAC9-1150B182BC05\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"089B5808-0729-739D-BAC9-1150B182BC05"}}
{"level":"error","timestamp":"2025-11-18 19:19:54.883","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 19:19:54.883","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 19:19:55.054","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 19:19:55.054","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":51,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 20:11:26.078","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 20:11:26.177","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 20:11:26.178","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 20:11:26.178","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 20:11:26.209","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 20:11:26.219","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 20:11:26.219","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 20:11:46.493","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 20:11:46.536","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 20:11:47.377","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 20:11:47.419","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 20:11:47.421","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 20:11:47.421","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 20:11:47.464","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 20:11:47.508","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 20:11:47.508","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 20:13:14.227","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 20:13:14.314","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 20:13:14.314","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 20:13:14.314","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 20:13:14.325","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 20:13:14.333","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 20:13:14.333","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 20:13:34.475","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 20:13:34.521","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 20:13:35.423","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 20:13:35.465","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 20:13:35.466","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 20:13:35.466","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 20:13:35.509","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 20:13:35.555","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 20:13:35.555","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 20:13:54.255","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":52,"imageSize":22133}
{"level":"info","timestamp":"2025-11-18 20:13:54.318","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/201354_e37a0e8d.png","imageSize":22133}
{"level":"info","timestamp":"2025-11-18 20:13:54.318","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 20:13:53\\\\n\\\\n报菜明细:\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 52\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/201354_e37a0e8d.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 20:13:54.376","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"72A516E6-F265-7C92-8908-1112A3FDE7D5\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"72A516E6-F265-7C92-8908-1112A3FDE7D5"}}
{"level":"error","timestamp":"2025-11-18 20:13:54.376","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 20:13:54.376","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 20:13:54.519","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 20:13:54.519","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":52,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 20:54:33.776","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 20:54:33.870","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 20:54:33.870","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 20:54:33.870","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 20:54:33.885","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 20:54:33.893","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 20:54:33.893","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 20:54:54.365","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 20:54:54.410","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 20:54:55.278","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 20:54:55.321","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 20:54:55.321","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 20:54:55.322","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 20:54:55.365","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 20:54:55.411","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 20:54:55.412","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 20:55:04.242","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":53,"imageSize":18858}
{"level":"info","timestamp":"2025-11-18 20:55:04.316","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/205504_af2dc6b8.png","imageSize":18858}
{"level":"info","timestamp":"2025-11-18 20:55:04.317","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 20:55:03\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 53\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/205504_af2dc6b8.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 20:55:04.375","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"5E06CE07-01BB-7D08-BE46-131B234284C2\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"5E06CE07-01BB-7D08-BE46-131B234284C2"}}
{"level":"error","timestamp":"2025-11-18 20:55:04.375","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 20:55:04.375","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 20:55:04.522","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 20:55:04.522","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":53,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 21:01:24.031","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":54,"imageSize":17687}
{"level":"info","timestamp":"2025-11-18 21:01:24.034","caller":"service/menu_report_listener.go:64","msg":"No enabled bots for store","storeID":999}
{"level":"info","timestamp":"2025-11-18 21:04:50.849","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:04:50.947","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 21:04:50.947","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 21:04:50.948","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 21:04:50.958","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 21:04:50.964","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 21:04:50.964","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 21:05:11.155","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:05:11.199","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:05:12.071","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 21:05:12.114","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 21:05:12.115","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 21:05:12.116","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:05:12.161","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 21:05:12.208","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 21:05:12.211","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 21:05:24.451","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":55,"imageSize":18985}
{"level":"info","timestamp":"2025-11-18 21:05:24.511","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/210524_605e19ab.png","imageSize":18985}
{"level":"info","timestamp":"2025-11-18 21:05:24.511","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 21:05:24\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 55\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/210524_605e19ab.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:05:24.568","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"0BB8B206-F4E5-7A93-AB97-A0C2F59F038E\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"0BB8B206-F4E5-7A93-AB97-A0C2F59F038E"}}
{"level":"error","timestamp":"2025-11-18 21:05:24.568","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 21:05:24.570","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 21:05:24.730","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 21:05:24.730","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":55,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 21:12:28.980","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:12:29.082","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 21:12:29.082","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 21:12:29.082","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 21:12:29.091","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 21:12:29.101","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 21:12:29.101","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 21:12:49.250","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:12:49.296","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:12:50.172","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 21:12:50.217","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 21:12:50.227","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 21:12:50.229","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:12:50.271","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 21:12:50.316","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 21:12:50.316","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 21:14:01.301","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":56,"imageSize":17078}
{"level":"info","timestamp":"2025-11-18 21:14:01.361","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/211401_cc1d36ba.png","imageSize":17078}
{"level":"info","timestamp":"2025-11-18 21:14:01.362","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 21:14:00\\\\n\\\\n报菜明细:\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 56\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/211401_cc1d36ba.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:14:01.413","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"9333E974-66A5-7475-8A25-E0EB9C7B8F85\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"9333E974-66A5-7475-8A25-E0EB9C7B8F85"}}
{"level":"error","timestamp":"2025-11-18 21:14:01.413","caller":"service/menu_report_listener.go:65","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:65\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 21:14:01.413","caller":"service/menu_report_listener.go:65","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 21:14:01.545","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 21:14:01.545","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":56,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 21:15:20.193","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:15:20.286","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 21:15:20.287","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 21:15:20.287","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 21:15:20.296","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 21:15:20.303","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 21:15:20.303","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 21:15:40.537","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:15:40.580","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:15:41.452","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 21:15:41.496","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 21:15:41.497","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 21:15:41.497","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:15:41.545","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 21:15:41.588","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 21:15:41.588","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 21:22:46.849","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:22:46.940","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 21:22:46.940","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 21:22:46.940","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 21:22:46.949","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 21:22:46.956","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 21:22:46.956","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 21:23:07.327","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:23:07.370","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:23:08.256","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 21:23:08.300","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 21:23:08.303","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 21:23:08.304","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:23:08.349","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 21:23:08.395","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 21:23:08.396","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 21:23:21.176","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":57,"imageSize":51792}
{"level":"info","timestamp":"2025-11-18 21:23:21.245","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/212321_e0e149d7.png","imageSize":51792}
{"level":"info","timestamp":"2025-11-18 21:23:21.246","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 21:23:20\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 57\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/212321_e0e149d7.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:23:21.309","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"59A40899-7321-7286-9656-6A86F1A86C10\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"59A40899-7321-7286-9656-6A86F1A86C10"}}
{"level":"error","timestamp":"2025-11-18 21:23:21.310","caller":"service/menu_report_listener.go:65","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:65\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 21:23:21.315","caller":"service/menu_report_listener.go:65","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 21:23:21.857","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 21:23:21.858","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":57,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 21:32:07.394","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:32:07.485","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 21:32:07.486","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 21:32:07.486","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 21:32:07.496","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 21:32:07.503","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 21:32:07.503","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 21:32:27.768","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:32:27.811","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:32:28.693","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 21:32:28.736","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 21:32:28.742","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 21:32:28.745","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:32:28.787","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 21:32:28.833","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 21:32:28.833","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 21:32:40.868","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-18 21:32:40\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:32:40.918","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"2D869D63-BBD6-7751-97E6-DB0D0AA341BA\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"2D869D63-BBD6-7751-97E6-DB0D0AA341BA"}}
{"level":"info","timestamp":"2025-11-18 21:33:02.776","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":58,"imageSize":51054}
{"level":"info","timestamp":"2025-11-18 21:33:02.829","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/213302_94c5e5c5.png","imageSize":51054}
{"level":"info","timestamp":"2025-11-18 21:33:02.829","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 21:33:02\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1 (2)\\\\n• 辣椒: 数量 1 (34)\\\\n• 小青菜: 数量 1 (444)\\\\n\\\\n---\\\\n报菜记录单ID: 58\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/213302_94c5e5c5.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:33:02.877","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"FAF7ABFA-FF22-7AC6-90D6-7BCD1DBA66EC\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"FAF7ABFA-FF22-7AC6-90D6-7BCD1DBA66EC"}}
{"level":"error","timestamp":"2025-11-18 21:33:02.877","caller":"service/menu_report_listener.go:66","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:66\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 21:33:02.879","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 21:33:03.027","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 21:33:03.027","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":58,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 21:37:45.493","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-18 21:37:45\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:37:45.555","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"E073CF6F-65B7-7207-B35A-FFF2EB6700F2\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"E073CF6F-65B7-7207-B35A-FFF2EB6700F2"}}
{"level":"info","timestamp":"2025-11-18 21:37:54.632","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-18 21:37:54\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:37:54.694","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"40DF3A5E-11D3-72DE-9685-34BB1A42052F\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"40DF3A5E-11D3-72DE-9685-34BB1A42052F"}}
{"level":"info","timestamp":"2025-11-18 21:39:48.295","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-18 21:39:48\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:39:48.355","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"9DB7BEE5-3508-78C9-A934-52ED368572EB\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"9DB7BEE5-3508-78C9-A934-52ED368572EB"}}
{"level":"info","timestamp":"2025-11-18 23:51:15.522","caller":"utils/employee.go:46","msg":"生成新工号"}
{"level":"info","timestamp":"2025-11-18 23:51:31.451","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":59,"imageSize":49869}
{"level":"info","timestamp":"2025-11-18 23:51:31.614","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/235131_166d7308.png","imageSize":49869}
{"level":"info","timestamp":"2025-11-18 23:51:31.616","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 包贝尔\\\\n报菜时间: 2025-11-18 23:51:31\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 59\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/235131_166d7308.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 23:51:31.673","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"19B1EB7D-568C-7DFC-9CE3-0F203E951490\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"19B1EB7D-568C-7DFC-9CE3-0F203E951490"}}
{"level":"error","timestamp":"2025-11-18 23:51:31.673","caller":"service/menu_report_listener.go:66","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:66\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 23:51:31.674","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 23:51:31.829","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 23:51:31.830","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":59,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 00:04:29.919","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 00:04:30.068","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 00:04:30.070","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 00:04:30.070","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 00:04:30.083","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 00:04:30.091","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 00:04:30.091","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 00:04:50.323","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 00:04:50.371","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 00:04:51.234","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 00:04:51.276","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 00:04:51.277","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 00:04:51.277","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 00:04:51.321","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 00:04:51.365","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-19 00:04:51.365","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 00:05:47.537","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":60,"imageSize":63276}
{"level":"info","timestamp":"2025-11-19 00:05:47.600","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/000547_e560f8ae.png","imageSize":63276}
{"level":"info","timestamp":"2025-11-19 00:05:47.600","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 包贝尔\\\\n报菜时间: 2025-11-19 00:05:47\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1 (3)\\\\n• 辣椒: 数量 1 (2)\\\\n• 小青菜: 数量 1 (4)\\\\n• 小黄鱼: 数量 3\\\\n• 牛肉: 数量 3\\\\n• 里脊肉: 数量 3\\\\n\\\\n---\\\\n报菜记录单ID: 60\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/000547_e560f8ae.png)\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 00:05:47.653","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"1C20CA4E-2679-7EDD-95F9-95E4E690777E\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"1C20CA4E-2679-7EDD-95F9-95E4E690777E"}}
{"level":"error","timestamp":"2025-11-19 00:05:47.653","caller":"service/menu_report_listener.go:66","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:66\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-19 00:05:47.654","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-19 00:05:47.800","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-19 00:05:47.801","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":60,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 00:08:05.729","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 00:08:05\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 00:08:05.778","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"3B5C65DD-85DC-76C1-A121-571B505341AD\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"3B5C65DD-85DC-76C1-A121-571B505341AD"}}
{"level":"info","timestamp":"2025-11-19 00:08:07.544","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 00:08:07\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 00:08:07.591","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"77B77E6B-7131-7AD2-8356-24217A3B5CE1\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"77B77E6B-7131-7AD2-8356-24217A3B5CE1"}}
{"level":"info","timestamp":"2025-11-19 00:08:13.357","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 00:08:13\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 00:08:13.408","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"359B78AA-7694-7C32-A47B-D6A57DF60B9F\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"359B78AA-7694-7C32-A47B-D6A57DF60B9F"}}
{"level":"info","timestamp":"2025-11-19 00:19:03.014","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 00:19:03.116","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 00:19:03.118","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 00:19:03.118","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 00:19:03.132","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 00:19:03.142","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 00:19:03.142","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 00:19:23.347","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 00:19:23.390","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 00:19:24.276","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 00:19:24.321","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 00:19:24.326","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 00:19:24.326","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 00:19:24.368","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 00:19:24.413","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-19 00:19:24.414","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 00:20:33.286","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 00:20:33\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 00:20:33.336","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"C866CE02-F760-7ADE-BC79-B2D9CD47987E\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"C866CE02-F760-7ADE-BC79-B2D9CD47987E"}}
{"level":"info","timestamp":"2025-11-19 00:22:14.513","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 00:22:14\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 00:22:14.564","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"131F3417-FE3B-7808-8CFA-5DDA699A1779\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"131F3417-FE3B-7808-8CFA-5DDA699A1779"}}
{"level":"info","timestamp":"2025-11-19 00:22:31.513","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-19 00:51:56.074","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 00:51:56.168","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 00:51:56.169","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 00:51:56.169","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 00:51:56.183","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 00:51:56.193","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 00:51:56.193","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 00:52:16.227","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 00:52:16.268","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 00:52:17.147","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 00:52:17.189","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 00:52:17.192","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 00:52:17.192","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 00:52:17.241","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 00:52:17.291","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 00:52:20.901","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-19 01:00:31.397","caller":"utils/employee.go:46","msg":"生成新工号"}
{"level":"info","timestamp":"2025-11-19 01:04:46.144","caller":"utils/employee.go:127","msg":"生成菜品分类编码"}
{"level":"info","timestamp":"2025-11-19 01:05:19.169","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":61,"imageSize":45133}
{"level":"warn","timestamp":"2025-11-19 01:05:19.170","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:05:19.315","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:06:39.758","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":62,"imageSize":45452}
{"level":"warn","timestamp":"2025-11-19 01:06:39.760","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:06:39.818","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:07:08.185","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:07:08.305","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:07:08.305","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:07:08.305","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:07:08.315","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:07:08.323","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:07:08.323","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:07:28.572","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:07:28.617","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:07:29.487","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:07:29.530","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:07:29.531","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:07:29.531","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:07:29.574","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:07:29.618","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:07:46.447","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":63,"imageSize":45544}
{"level":"warn","timestamp":"2025-11-19 01:07:46.455","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:07:46.605","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:11:57.728","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":64,"imageSize":45133}
{"level":"warn","timestamp":"2025-11-19 01:11:57.730","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:11:57.868","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:18:41.187","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:18:41.290","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:18:41.290","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:18:41.290","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:18:41.302","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:18:41.308","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:18:41.308","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:19:01.588","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:19:01.637","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:19:02.496","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:19:02.537","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:19:02.538","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:19:02.538","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:19:02.581","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:19:02.625","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:19:38.825","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":65,"imageSize":45133}
{"level":"info","timestamp":"2025-11-19 01:19:38.825","caller":"events/event_bus.go:84","msg":"No bot specified, skipping notification","orderID":65,"storeID":1001}
{"level":"info","timestamp":"2025-11-19 01:21:59.981","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:22:00.080","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:22:00.080","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:22:00.080","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:22:00.089","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:22:00.096","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:22:00.096","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:22:20.190","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:22:20.233","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:22:21.078","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:22:21.122","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:22:21.126","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:22:21.126","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:22:21.171","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:22:21.214","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:22:36.496","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":66,"imageSize":45295}
{"level":"warn","timestamp":"2025-11-19 01:22:36.550","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:22:36.718","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:22:36.718","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":66,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:23:58.412","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:23:58.499","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:23:58.499","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:23:58.499","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:23:58.508","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:23:58.515","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:23:58.515","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:24:18.652","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:24:18.700","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:24:19.580","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:24:19.623","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:24:19.624","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:24:19.624","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:24:19.669","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:24:19.715","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:24:47.113","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":67,"imageSize":45133}
{"level":"info","timestamp":"2025-11-19 01:24:47.113","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":67,"imageURL":"http://localhost:8899/images/2025/11/19/012447_32c817e4.png","imageSize":45133}
{"level":"warn","timestamp":"2025-11-19 01:24:47.168","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:24:47.297","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:24:47.297","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":67,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:32:59.208","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:32:59.296","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:32:59.296","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:32:59.296","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:32:59.305","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:32:59.312","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:32:59.312","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:33:19.452","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:33:19.497","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:33:20.372","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:33:20.414","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:33:20.415","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:33:20.415","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:33:20.466","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:33:20.515","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:33:39.733","caller":"service/dingtalk.go:170","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 01:33:39\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:33:39.792","caller":"service/dingtalk.go:170","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"37E3208B-1A78-792F-9E1C-2D87900BDE43\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"37E3208B-1A78-792F-9E1C-2D87900BDE43"}}
{"level":"info","timestamp":"2025-11-19 01:33:41.713","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-19 01:33:43.020","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:34:34.451","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":68,"imageSize":48614}
{"level":"info","timestamp":"2025-11-19 01:34:34.452","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":68,"imageURL":"http://localhost:8899/images/2025/11/19/013434_9b8b09bc.png","imageSize":48614}
{"level":"warn","timestamp":"2025-11-19 01:34:34.495","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:34:34.551","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:34:34.551","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":68,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:35:42.903","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:35:42.995","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:35:42.996","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:35:42.996","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:35:43.005","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:35:43.011","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:35:43.011","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:36:03.156","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:36:03.198","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:36:04.042","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:36:04.086","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:36:04.087","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:36:04.087","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:36:04.130","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:36:04.177","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:36:15.658","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":69,"imageSize":48685}
{"level":"info","timestamp":"2025-11-19 01:36:15.658","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":69,"imageURL":"http://localhost:8899/images/2025/11/19/013615_e5ffd705.png","imageSize":48685}
{"level":"warn","timestamp":"2025-11-19 01:36:15.713","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:36:15.836","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:36:15.836","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":69,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:38:31.799","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:38:31.889","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:38:31.889","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:38:31.889","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:38:31.898","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:38:31.904","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:38:31.904","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:38:51.775","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:38:51.821","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:38:52.673","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:38:52.716","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:38:52.721","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:38:52.721","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:38:52.765","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:38:52.810","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:38:58.430","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":70,"imageSize":51507}
{"level":"info","timestamp":"2025-11-19 01:38:58.430","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":70,"imageURL":"http://localhost:8899/images/2025/11/19/013858_bb297a78.png","imageSize":51507}
{"level":"warn","timestamp":"2025-11-19 01:38:58.481","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:38:58.617","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:38:58.617","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":70,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:39:33.599","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":71,"imageSize":51507}
{"level":"info","timestamp":"2025-11-19 01:39:33.600","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":71,"imageURL":"http://localhost:8899/images/2025/11/19/013933_bb297a78.png","imageSize":51507}
{"level":"warn","timestamp":"2025-11-19 01:39:33.642","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:39:33.700","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:39:33.700","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":71,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:44:08.832","caller":"service/dingtalk.go:170","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 01:44:08\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:44:08.890","caller":"service/dingtalk.go:170","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"2B74F5B9-49AC-75CB-9948-D01651C108BD\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"2B74F5B9-49AC-75CB-9948-D01651C108BD"}}
{"level":"info","timestamp":"2025-11-19 01:44:39.874","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":72,"imageSize":71944}
{"level":"info","timestamp":"2025-11-19 01:44:39.874","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":72,"imageURL":"http://localhost:8899/images/2025/11/19/014439_171f70f2.png","imageSize":71944}
{"level":"info","timestamp":"2025-11-19 01:44:39.970","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/014439_171f70f2.png","imageSize":71944}
{"level":"info","timestamp":"2025-11-19 01:44:39.970","caller":"service/dingtalk.go:207","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 包贝尔\\\\n报菜时间: 2025-11-19 01:44:39\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 72\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/014439_171f70f2.png)\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:44:40.019","caller":"service/dingtalk.go:207","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"EF8F3EE8-C7B9-7A9E-9079-05CAAA8ED74A\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"EF8F3EE8-C7B9-7A9E-9079-05CAAA8ED74A"}}
{"level":"error","timestamp":"2025-11-19 01:44:40.019","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":72,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:45:11.554","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":73,"imageSize":71944}
{"level":"info","timestamp":"2025-11-19 01:45:11.554","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":73,"imageURL":"http://localhost:8899/images/2025/11/19/014511_632ebe37.png","imageSize":71944}
{"level":"info","timestamp":"2025-11-19 01:45:11.650","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/014511_632ebe37.png","imageSize":71944}
{"level":"info","timestamp":"2025-11-19 01:45:11.650","caller":"service/dingtalk.go:207","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 包贝尔\\\\n报菜时间: 2025-11-19 01:45:11\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 里脊肉: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 小黄鱼: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 73\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/014511_632ebe37.png)\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:45:11.696","caller":"service/dingtalk.go:207","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"103195FC-86F6-74BB-9A54-B690001EC4FD\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"103195FC-86F6-74BB-9A54-B690001EC4FD"}}
{"level":"error","timestamp":"2025-11-19 01:45:11.696","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":73,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:45:44.052","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":74,"imageSize":71776}
{"level":"info","timestamp":"2025-11-19 01:45:44.053","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":74,"imageURL":"http://localhost:8899/images/2025/11/19/014544_2e8f4f48.png","imageSize":71776}
{"level":"info","timestamp":"2025-11-19 01:45:44.146","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/014544_2e8f4f48.png","imageSize":71776}
{"level":"info","timestamp":"2025-11-19 01:45:44.147","caller":"service/dingtalk.go:207","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-19 01:45:43\\\\n\\\\n报菜明细:\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 1\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 74\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/014544_2e8f4f48.png)\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:45:44.198","caller":"service/dingtalk.go:207","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"F8C627B9-D511-7452-8F68-416E4B3B3838\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"F8C627B9-D511-7452-8F68-416E4B3B3838"}}
{"level":"error","timestamp":"2025-11-19 01:45:44.198","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":74,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:47:20.191","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":75,"imageSize":71776}
{"level":"info","timestamp":"2025-11-19 01:47:20.192","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":75,"imageURL":"http://localhost:8899/images/2025/11/19/014720_2e8f4f48.png","imageSize":71776}
{"level":"info","timestamp":"2025-11-19 01:47:20.398","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/014720_2e8f4f48.png","imageSize":71776}
{"level":"info","timestamp":"2025-11-19 01:47:20.398","caller":"service/dingtalk.go:207","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-19 01:47:19\\\\n\\\\n报菜明细:\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 1\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 75\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/014720_2e8f4f48.png)\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:47:20.457","caller":"service/dingtalk.go:207","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"1A53818C-4B91-72C0-8E6B-DC4F4A01401E\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"1A53818C-4B91-72C0-8E6B-DC4F4A01401E"}}
{"level":"error","timestamp":"2025-11-19 01:47:20.457","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":75,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:47:37.353","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":76,"imageSize":71617}
{"level":"info","timestamp":"2025-11-19 01:47:37.354","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":76,"imageURL":"http://localhost:8899/images/2025/11/19/014737_dc939141.png","imageSize":71617}
{"level":"info","timestamp":"2025-11-19 01:47:37.465","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/014737_dc939141.png","imageSize":71617}
{"level":"info","timestamp":"2025-11-19 01:47:37.465","caller":"service/dingtalk.go:207","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-19 01:47:36\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 76\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/014737_dc939141.png)\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:47:37.521","caller":"service/dingtalk.go:207","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"3B192BAC-5154-76D6-BE6D-46C8A320BF92\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"3B192BAC-5154-76D6-BE6D-46C8A320BF92"}}
{"level":"error","timestamp":"2025-11-19 01:47:37.521","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":76,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:52:50.496","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:52:50.588","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:52:50.588","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:52:50.588","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:52:50.599","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:52:50.606","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:52:50.606","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:53:10.433","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:53:10.478","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:53:11.352","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:53:11.394","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:53:11.396","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:53:11.396","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:53:11.443","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:53:11.487","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:53:23.766","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":77,"imageSize":71617}
{"level":"info","timestamp":"2025-11-19 01:53:23.766","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":77,"imageURL":"http://localhost:8899/images/2025/11/19/015323_dc939141.png","imageSize":71617}
{"level":"info","timestamp":"2025-11-19 01:53:23.878","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/015323_dc939141.png","imageSize":71617}
{"level":"info","timestamp":"2025-11-19 01:53:23.878","caller":"service/dingtalk.go:205","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-19 01:53:23\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 77\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/015323_dc939141.png)\\\"}}\",\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:53:23.938","caller":"service/dingtalk.go:205","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"AA79E863-1A1A-72A8-9129-381A4F50E39A\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"AA79E863-1A1A-72A8-9129-381A4F50E39A"}}
{"level":"error","timestamp":"2025-11-19 01:53:23.938","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":77,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:57:29.939","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:57:30.025","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:57:30.025","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:57:30.025","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:57:30.035","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:57:30.040","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:57:30.040","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:57:50.328","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:57:50.373","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:57:51.254","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:57:51.298","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:57:51.304","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:57:51.304","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:57:51.351","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:57:51.395","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:58:27.624","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":78,"imageSize":58458}
{"level":"info","timestamp":"2025-11-19 01:58:27.625","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":78,"imageURL":"http://localhost:8899/images/2025/11/19/015827_4d1a3d10.png","imageSize":58458}
{"level":"info","timestamp":"2025-11-19 01:58:27.736","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/015827_4d1a3d10.png","imageSize":58458}
{"level":"info","timestamp":"2025-11-19 01:58:27.736","caller":"service/dingtalk.go:202","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-19 01:58:27\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 辣椒: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 78\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/015827_4d1a3d10.png)\\\"}\",\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:58:27.786","caller":"service/dingtalk.go:202","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"003F476D-6CAC-7FDB-89C9-41D4528359CB\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"003F476D-6CAC-7FDB-89C9-41D4528359CB"}}
{"level":"error","timestamp":"2025-11-19 01:58:27.786","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":78,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:58:53.287","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":79,"imageSize":53856}
{"level":"info","timestamp":"2025-11-19 01:58:53.287","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":79,"imageURL":"http://localhost:8899/images/2025/11/19/015853_77fd6e08.png","imageSize":53856}
{"level":"info","timestamp":"2025-11-19 01:58:53.385","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/015853_77fd6e08.png","imageSize":53856}
{"level":"info","timestamp":"2025-11-19 01:58:53.385","caller":"service/dingtalk.go:202","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 包贝尔\\\\n报菜时间: 2025-11-19 01:58:52\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 79\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/015853_77fd6e08.png)\\\"}\",\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:58:53.431","caller":"service/dingtalk.go:202","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"5B4BB8D8-AD3D-71D2-9651-DF65F5A4E3A2\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"5B4BB8D8-AD3D-71D2-9651-DF65F5A4E3A2"}}
{"level":"error","timestamp":"2025-11-19 01:58:53.431","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":79,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:59:04.060","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":80,"imageSize":51507}
{"level":"info","timestamp":"2025-11-19 01:59:04.060","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":80,"imageURL":"http://localhost:8899/images/2025/11/19/015904_bb297a78.png","imageSize":51507}
{"level":"warn","timestamp":"2025-11-19 01:59:04.103","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:59:04.244","caller":"service/dingtalk.go:118","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:59:04.244","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":80,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:03:26.679","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:03:26.773","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:03:26.773","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:03:26.773","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:03:26.784","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:03:26.791","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:03:26.791","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:03:47.941","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:03:47.986","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:03:48.913","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 02:03:48.956","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 02:03:48.957","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 02:03:48.957","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:03:49.005","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:03:49.053","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:04:09.442","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":81,"imageSize":51507}
{"level":"info","timestamp":"2025-11-19 02:04:09.443","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":81,"imageURL":"http://localhost:8899/images/2025/11/19/020409_bb297a78.png","imageSize":51507}
{"level":"warn","timestamp":"2025-11-19 02:04:09.495","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:04:09.661","caller":"service/dingtalk.go:118","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 02:04:09.661","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":81,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:04:33.161","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:04:33.252","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:04:33.252","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:04:33.252","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:04:33.262","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:04:33.269","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:04:33.269","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:04:53.746","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:04:53.828","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:04:53.828","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:04:53.828","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:04:54.018","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-19 02:04:54.030","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-19 02:04:54.030","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-19 02:05:27.638","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:05:27.669","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"error","timestamp":"2025-11-19 02:05:29.234","caller":"seeding/seed.go:193","msg":"创建超级管理员失败","error":"Error 1062 (23000): Duplicate entry '13082848180' for key 'users.idx_users_phone'","stacktrace":"github.com/Kevin-Jii/tower-go/utils/seeding.InitSuperAdmin\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/seeding/seed.go:193\ngithub.com/Kevin-Jii/tower-go/bootstrap.AutoMigrateAndSeeds\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/migrate.go:64\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:26\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"error","timestamp":"2025-11-19 02:05:29.234","caller":"bootstrap/migrate.go:65","msg":"超级管理员初始化失败","error":"Error 1062 (23000): Duplicate entry '13082848180' for key 'users.idx_users_phone'","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.AutoMigrateAndSeeds\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/migrate.go:65\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:26\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-19 02:05:29.266","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 02:05:29.327","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 02:05:29.328","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:05:29.393","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:05:29.456","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:05:44.225","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:05:44.310","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:05:44.311","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:05:44.311","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:05:44.493","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-19 02:05:44.514","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-19 02:05:44.514","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-19 02:06:01.479","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:06:01.565","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:06:01.565","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:06:01.565","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:06:01.773","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-19 02:06:01.785","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-19 02:06:01.785","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-19 02:06:32.960","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:06:33.053","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:06:33.053","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:06:33.053","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:06:33.240","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-19 02:06:33.249","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-19 02:06:33.249","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-19 02:06:45.143","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:06:45.233","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:06:45.233","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:06:45.233","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:06:45.419","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-19 02:06:45.427","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-19 02:06:45.427","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-19 02:06:54.227","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:06:54.313","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:06:54.313","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:06:54.313","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:06:54.322","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:06:54.328","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:06:54.328","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:07:14.831","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:07:14.878","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:07:15.736","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 02:07:15.778","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 02:07:15.779","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 02:07:15.779","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:07:15.825","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:07:15.868","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:07:39.498","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:07:39.591","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:07:39.591","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:07:39.591","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:07:39.601","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:07:39.608","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:07:39.608","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:08:00.566","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:08:00.611","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:08:01.540","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 02:08:01.584","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 02:08:01.586","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 02:08:01.586","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:08:01.630","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:08:01.677","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:08:26.712","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":82,"imageSize":51507}
{"level":"info","timestamp":"2025-11-19 02:08:26.714","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":82,"imageURL":"http://47.120.27.64:8899/images/2025/11/19/020826_bb297a78.png","imageSize":51507}
{"level":"warn","timestamp":"2025-11-19 02:08:26.766","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:08:26.912","caller":"service/dingtalk.go:118","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 02:08:26.913","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":82,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:11:12.001","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:11:12.001","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:11:12.001","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:11:12.010","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:11:12.016","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:11:12.016","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:11:12.016","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-19 02:11:12.016","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:11:12.018","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:11:12.063","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:11:20.463","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:11:20.464","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:11:20.464","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:11:20.472","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:11:20.479","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:11:20.479","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:11:20.479","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-19 02:11:20.479","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:11:20.480","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:11:20.523","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:15:39.187","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:15:39.188","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:15:39.188","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:15:39.198","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:15:39.205","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:15:39.205","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:15:39.205","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-19 02:15:39.205","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:15:39.207","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:15:39.250","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:15:53.950","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":83,"imageSize":52792}
{"level":"info","timestamp":"2025-11-19 02:15:53.952","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":83,"imageURL":"http://47.120.27.64:8899/images/2025/11/19/021553_19abb054.png","imageSize":52792}
{"level":"warn","timestamp":"2025-11-19 02:15:53.999","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:15:54.150","caller":"service/dingtalk.go:118","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 02:15:54.150","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":83,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:17:37.083","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:17:37.083","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:17:37.083","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:17:37.093","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:17:37.100","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:17:37.100","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:17:37.100","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-19 02:17:37.100","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:17:37.102","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:17:37.144","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:17:44.062","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":84,"imageSize":51507}
{"level":"info","timestamp":"2025-11-19 02:17:44.063","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":84,"imageURL":"http://47.120.27.64:8899/images/2025/11/19/021744_bb297a78.png","imageSize":51507}
{"level":"info","timestamp":"2025-11-19 02:17:44.117","caller":"events/event_bus.go:84","msg":"Added image link to webhook message","botID":7,"imageURL":"http://47.120.27.64:8899/images/2025/11/19/021744_bb297a78.png"}
{"level":"info","timestamp":"2025-11-19 02:17:44.257","caller":"service/dingtalk.go:118","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 02:17:44.257","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":84,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 21:58:25.260","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 21:58:25.261","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 21:58:25.261","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 21:58:25.320","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 21:58:25.336","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 21:58:25.336","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 21:58:25.336","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-19 21:58:25.336","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 21:58:25.348","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 21:58:25.393","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-30 23:10:30.403","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-30 23:10:30.404","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-30 23:10:30.404","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-30 23:10:30.409","caller":"bootstrap/database.go:14","msg":"数据库连接失败","error":"dial tcp [::1]:3306: connectex: An attempt was made to access a socket in a way forbidden by its access permissions.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:14\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:24\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-30 23:11:59.185","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-30 23:11:59.185","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-30 23:11:59.186","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-30 23:11:59.198","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-30 23:11:59.205","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-30 23:11:59.205","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-30 23:11:59.205","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-30 23:11:59.205","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-30 23:11:59.232","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-30 23:11:59.233","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-11-30 23:12:04.237","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"全局Stream机器人(自动创建)","error":"Post \"https://api.dingtalk.com/v1.0/gateway/connections/open\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-30 23:21:18.560","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-30 23:21:18.561","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-30 23:21:18.561","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-30 23:21:18.569","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-30 23:21:18.575","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-30 23:21:18.575","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-30 23:21:18.575","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-30 23:21:18.575","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-30 23:21:18.587","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-30 23:21:18.588","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 02:13:18.286","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:13:18.287","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 02:13:18.287","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 02:13:18.297","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 02:13:18.304","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 02:13:18.304","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 02:13:18.304","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 02:13:18.304","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:13:18.314","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 02:13:18.316","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 02:14:58.328","caller":"service/dingtalk.go:118","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-12-01 02:25:50.812","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:25:50.813","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 02:25:50.813","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 02:25:50.823","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 02:25:50.830","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 02:25:50.830","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 02:25:50.830","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 02:25:50.830","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:25:50.841","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 02:25:50.842","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 02:39:42.673","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:39:42.674","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 02:39:42.674","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 02:39:42.684","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 02:39:42.690","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 02:39:42.690","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 02:39:42.690","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 02:39:42.690","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:39:42.701","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 02:39:42.702","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 02:46:04.360","caller":"utils/employee.go:46","msg":"生成新工号"}
{"level":"info","timestamp":"2025-12-01 02:53:32.197","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:53:32.198","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 02:53:32.199","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 02:53:32.208","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 02:53:32.213","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 02:53:32.213","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 02:53:32.213","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 02:53:32.213","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:53:32.226","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 02:53:32.227","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 03:38:02.478","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 03:38:02.479","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 03:38:02.479","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 03:38:02.488","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 03:38:02.495","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 03:38:02.495","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 03:38:02.495","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 03:38:02.495","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 03:38:02.507","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 03:38:02.509","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 03:39:24.194","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 03:39:24.194","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 03:39:24.195","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 03:39:24.204","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 03:39:24.211","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 03:39:24.211","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 03:39:24.211","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 03:39:24.211","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 03:39:24.222","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 03:39:24.223","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 03:40:01.759","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 03:40:01.760","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 03:40:01.761","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 03:40:01.771","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 03:40:01.777","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 03:40:01.777","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 03:40:01.777","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 03:40:01.777","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 03:40:01.793","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 03:40:01.794","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 19:56:42.801","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 19:56:42.802","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 19:56:42.803","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 19:56:42.820","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 19:56:42.827","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 19:56:42.827","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 19:56:42.827","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 19:56:42.827","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 19:56:42.843","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 19:56:42.844","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 20:00:36.026","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:00:36.027","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 20:00:36.028","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 20:00:36.038","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 20:00:36.044","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 20:00:36.044","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 20:00:36.044","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 20:00:36.044","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:00:36.057","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 20:00:36.058","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 20:22:44.281","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:22:44.282","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 20:22:44.282","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 20:22:44.294","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 20:22:44.304","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 20:22:44.304","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 20:22:44.304","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 20:22:44.304","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:22:44.316","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 20:22:44.317","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 20:27:05.616","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:27:05.617","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 20:27:05.617","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 20:27:05.625","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 20:27:05.632","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 20:27:05.632","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 20:27:05.632","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 20:27:05.632","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:27:05.642","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 20:27:05.646","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 20:27:10.649","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"全局Stream机器人(自动创建)","error":"Post \"https://api.dingtalk.com/v1.0/gateway/connections/open\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 20:29:05.672","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:29:05.672","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 20:29:05.672","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 20:29:05.682","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 20:29:05.688","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 20:29:05.688","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 20:29:05.688","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 20:29:05.688","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:29:05.698","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 20:29:05.700","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 20:45:31.285","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:45:31.286","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 20:45:31.286","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 20:45:31.296","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 20:45:31.303","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 20:45:31.303","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 20:45:31.303","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"warn","timestamp":"2025-12-01 20:45:31.315","caller":"bootstrap/seed.go:53","msg":"执行种子数据语句失败","error":"Error 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IF NOT EXISTS `permissions` TINYINT UNSIGNED NOT NULL DEFAULT 15 COMMENT '权限' at line 1"}
{"level":"warn","timestamp":"2025-12-01 20:45:31.317","caller":"bootstrap/seed.go:53","msg":"执行种子数据语句失败","error":"Error 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IF NOT EXISTS `permissions` TINYINT UNSIGNED NOT NULL DEFAULT 15 COMMENT '权限' at line 1"}
{"level":"info","timestamp":"2025-12-01 20:45:31.327","caller":"bootstrap/seed.go:59","msg":"种子数据初始化完成","success":8,"skipped":0}
{"level":"info","timestamp":"2025-12-01 20:45:31.327","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:45:31.343","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 20:45:31.344","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 20:47:01.943","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:47:01.944","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 20:47:01.944","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 20:47:01.954","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 20:47:01.960","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 20:47:01.960","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 20:47:01.964","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 20:47:02.966","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 20:47:02.967","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 20:47:02.968","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 20:47:02.968","caller":"bootstrap/seed.go:24","msg":"种子数据已初始化，跳过执行"}
{"level":"info","timestamp":"2025-12-01 20:47:02.968","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:47:02.980","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 20:47:02.981","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 20:57:11.949","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:57:11.950","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 20:57:11.950","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 20:57:11.959","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 20:57:11.969","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 20:57:11.969","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 20:57:11.972","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 20:57:12.821","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 20:57:12.822","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 20:57:12.823","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 20:57:12.823","caller":"bootstrap/seed.go:24","msg":"种子数据已初始化，跳过执行"}
{"level":"info","timestamp":"2025-12-01 20:57:12.823","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:57:12.834","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 20:57:12.835","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 20:59:15.196","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:59:15.197","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 20:59:15.197","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 20:59:15.206","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 20:59:15.217","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 20:59:15.217","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 20:59:16.218","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 20:59:16.220","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 20:59:16.370","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 20:59:16.370","caller":"bootstrap/seed.go:24","msg":"种子数据已初始化，跳过执行"}
{"level":"info","timestamp":"2025-12-01 20:59:16.371","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 20:59:16.386","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"全局Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-01 20:59:16.388","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 20:59:21.129","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"54D0E6CF-8EFA-7A2F-B153-83E4A20684B4\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 21:02:27.394","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:02:27.395","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:02:27.395","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:02:27.403","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:02:27.414","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:02:27.414","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:02:27.419","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 21:02:28.264","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:02:28.265","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:02:28.268","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:02:28.268","caller":"bootstrap/seed.go:24","msg":"种子数据已初始化，跳过执行"}
{"level":"info","timestamp":"2025-12-01 21:02:28.268","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:02:28.276","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 21:02:28.278","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 21:02:33.280","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"全局Stream机器人(自动创建)","error":"Post \"https://api.dingtalk.com/v1.0/gateway/connections/open\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 21:10:10.616","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:10:10.617","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:10:10.617","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:10:10.626","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:10:10.633","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:10:10.633","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:10:11.613","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:10:11.614","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:10:11.765","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"warn","timestamp":"2025-12-01 21:10:11.776","caller":"bootstrap/seed.go:53","msg":"执行种子数据语句失败","error":"Error 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IF NOT EXISTS `permissions` TINYINT UNSIGNED NOT NULL DEFAULT 15 COMMENT '权限' at line 1"}
{"level":"warn","timestamp":"2025-12-01 21:10:11.777","caller":"bootstrap/seed.go:53","msg":"执行种子数据语句失败","error":"Error 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IF NOT EXISTS `permissions` TINYINT UNSIGNED NOT NULL DEFAULT 15 COMMENT '权限' at line 1"}
{"level":"info","timestamp":"2025-12-01 21:10:11.786","caller":"bootstrap/seed.go:59","msg":"种子数据初始化完成","success":8,"skipped":0}
{"level":"info","timestamp":"2025-12-01 21:10:11.786","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:10:11.801","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-01 21:10:11.802","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 21:10:16.710","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"D232E4A3-7F01-70A6-A915-3F05235791D7\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 21:10:19.663","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:10:19.664","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:10:19.664","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:10:19.672","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:10:19.679","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:10:19.679","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:10:19.683","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 21:10:20.522","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:10:20.523","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:10:20.525","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:10:20.525","caller":"bootstrap/seed.go:24","msg":"种子数据已初始化，跳过执行"}
{"level":"info","timestamp":"2025-12-01 21:10:20.525","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:10:20.533","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 21:10:20.535","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 21:10:24.694","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"A000C251-EFB0-78FF-80EA-C9B5060AFE76\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 21:13:47.473","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:13:47.474","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:13:47.474","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:13:47.484","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:13:47.489","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:13:47.489","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:13:48.481","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:13:48.482","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:13:48.624","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:13:48.625","caller":"bootstrap/seed.go:24","msg":"种子数据已初始化，跳过执行"}
{"level":"info","timestamp":"2025-12-01 21:13:48.625","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:13:48.642","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-01 21:13:48.643","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 21:13:52.161","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:13:52.162","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:13:52.162","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:13:52.171","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:13:52.181","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:13:52.181","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:13:52.185","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 21:13:53.069","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:13:53.070","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:13:53.072","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:13:53.072","caller":"bootstrap/seed.go:24","msg":"种子数据已初始化，跳过执行"}
{"level":"info","timestamp":"2025-12-01 21:13:53.072","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:13:53.080","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 21:13:53.081","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 21:13:56.527","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"4012C97C-0652-76C2-B54F-417B4C131C9F\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 21:15:02.969","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:15:02.970","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:15:02.970","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:15:02.979","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:15:02.985","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:15:02.985","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:15:02.988","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 21:15:03.832","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:15:03.833","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:15:03.834","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:15:03.835","caller":"bootstrap/seed.go:24","msg":"种子数据已初始化，跳过执行"}
{"level":"info","timestamp":"2025-12-01 21:15:03.835","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:15:03.843","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 21:15:03.846","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 21:15:08.849","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"Post \"https://api.dingtalk.com/v1.0/gateway/connections/open\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 21:18:25.775","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:18:25.775","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:18:25.776","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:18:25.785","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:18:25.791","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:18:25.791","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:18:25.795","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 21:18:26.616","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:18:26.617","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:18:26.618","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:18:26.637","caller":"bootstrap/seed.go:59","msg":"种子数据初始化完成","success":8,"skipped":0}
{"level":"info","timestamp":"2025-12-01 21:18:26.638","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:18:26.646","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 21:18:26.647","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 21:18:30.846","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"5C929C65-5899-767E-9CBC-DE8F3A1D7C1F\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 21:18:54.101","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:18:54.101","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:18:54.101","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:18:54.111","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:18:54.116","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:18:54.116","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:18:54.121","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 21:18:54.951","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:18:54.952","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:18:54.954","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:18:54.954","caller":"bootstrap/seed.go:24","msg":"种子数据已初始化，跳过执行"}
{"level":"info","timestamp":"2025-12-01 21:18:54.954","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:18:54.964","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 21:18:54.965","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 21:18:58.171","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"9B1846FA-8283-7CDB-9344-4FF26A35CF49\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 21:26:33.102","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:26:33.103","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:26:33.103","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:26:33.113","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:26:33.120","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:26:33.120","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:26:33.123","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 21:26:33.961","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:26:33.962","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:26:33.964","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:26:33.979","caller":"bootstrap/seed.go:59","msg":"种子数据初始化完成","success":8,"skipped":0}
{"level":"info","timestamp":"2025-12-01 21:26:33.980","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:26:33.988","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 21:26:33.989","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 21:26:37.605","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"303A01ED-CEDC-7766-988D-A84B4BE91D06\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 21:30:13.501","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:30:13.502","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:30:13.502","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:30:13.512","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:30:13.520","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:30:13.520","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:30:14.526","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:30:14.528","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:30:14.669","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:30:14.669","caller":"bootstrap/seed.go:24","msg":"种子数据已初始化，跳过执行"}
{"level":"info","timestamp":"2025-12-01 21:30:14.669","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:30:14.683","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-01 21:30:14.685","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 21:30:19.271","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"344BF013-7410-7E40-9897-8C13EBB3D3C9\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 21:35:45.502","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:35:45.502","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:35:45.503","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:35:45.513","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:35:45.520","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:35:45.520","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:35:46.519","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:35:46.520","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:35:46.678","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:35:46.704","caller":"bootstrap/seed.go:67","msg":"种子数据初始化完成","success":8,"skipped":0}
{"level":"info","timestamp":"2025-12-01 21:35:46.704","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:35:46.718","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-01 21:35:46.720","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 21:35:51.712","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:35:51.713","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:35:51.713","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:35:51.722","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:35:51.727","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:35:51.727","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:35:51.731","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 21:35:52.628","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:35:52.629","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:35:52.631","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:35:52.631","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-01 21:35:52.632","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:35:52.641","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 21:35:52.643","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 21:35:57.111","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"0FF5AEF7-DF71-7A77-AEC9-321EE496B9A1\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 21:45:31.981","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:45:31.982","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:45:31.982","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:45:31.991","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:45:31.997","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:45:31.997","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:45:32.001","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 21:45:32.897","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:45:32.898","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:45:32.899","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:45:32.900","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-01 21:45:32.900","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:45:32.908","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 21:45:32.909","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 21:45:37.273","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"E8300811-2142-7109-B8F2-D9CCA64D229E\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 21:52:25.603","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:52:25.606","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:52:25.606","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:52:25.616","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:52:25.623","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:52:25.623","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:52:25.631","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 21:52:26.559","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:52:26.560","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:52:26.562","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:52:26.563","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-01 21:52:26.563","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:52:26.571","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 21:52:26.572","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 21:52:30.720","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"76E0958C-EDFA-76F8-BDBA-BD6736BDD095\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 21:54:21.133","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:54:21.134","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 21:54:21.134","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 21:54:21.144","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 21:54:21.150","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 21:54:21.150","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 21:54:21.156","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 21:54:22.097","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:54:22.098","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 21:54:22.100","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 21:54:22.101","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-01 21:54:22.101","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 21:54:22.110","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 21:54:22.111","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 21:54:26.084","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"792929C7-9961-7803-BE4F-0CB54490085D\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 22:11:19.400","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 22:11:19.401","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 22:11:19.401","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 22:11:19.409","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 22:11:19.416","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 22:11:19.416","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 22:11:19.423","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 22:11:20.377","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 22:11:20.377","caller":"bootstrap/migrate.go:64","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-12-01 22:11:20.380","caller":"bootstrap/migrate.go:73","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 22:11:20.380","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-01 22:11:20.380","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 22:11:20.390","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 22:11:20.391","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 22:11:25.394","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"Post \"https://api.dingtalk.com/v1.0/gateway/connections/open\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 22:28:43.505","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 22:28:43.512","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 22:28:43.512","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 22:28:43.523","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 22:28:43.529","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 22:28:43.529","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 22:28:44.196","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 22:28:44.302","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 22:28:44.319","caller":"bootstrap/seed.go:67","msg":"种子数据初始化完成","success":8,"skipped":0}
{"level":"info","timestamp":"2025-12-01 22:28:44.319","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 22:28:44.332","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-01 22:28:44.333","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 22:28:49.336","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"Post \"https://api.dingtalk.com/v1.0/gateway/connections/open\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"error","timestamp":"2025-12-01 23:28:56.112","caller":"utils/employee.go:40","msg":"工号已达到最大值","stacktrace":"github.com/Kevin-Jii/tower-go/utils.GenerateEmployeeNo\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/employee.go:40\ngithub.com/Kevin-Jii/tower-go/service.(*UserService).CreateUser\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/user.go:39\ngithub.com/Kevin-Jii/tower-go/controller.(*UserController).CreateUser\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/user.go:63\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/router/api.RegisterUserRoutes.StoreAuthMiddleware.AuthMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"info","timestamp":"2025-12-01 23:31:58.963","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 23:31:58.970","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 23:31:58.970","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 23:31:58.981","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 23:31:58.988","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 23:31:58.988","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 23:31:59.001","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 23:31:59.803","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 23:31:59.809","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 23:31:59.810","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-01 23:31:59.810","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 23:31:59.822","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 23:31:59.824","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 23:32:03.668","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"87CD7C20-EC5B-7F2F-803F-6CF04E320190\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-01 23:32:23.159","caller":"utils/employee.go:46","msg":"生成新工号"}
{"level":"info","timestamp":"2025-12-01 23:35:14.004","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 23:35:14.014","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 23:35:14.014","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 23:35:14.026","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 23:35:14.036","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 23:35:14.036","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 23:35:14.046","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-01 23:35:14.891","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-01 23:35:14.904","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-01 23:35:14.906","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-01 23:35:14.906","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 23:35:14.915","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 23:35:14.916","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-01 23:35:19.537","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"EF63905E-2B10-7C23-B2D8-C59D1DDFF5B9\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 00:00:37.346","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 00:00:37.353","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 00:00:37.353","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 00:00:37.384","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 00:00:37.392","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 00:00:37.392","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 00:00:37.440","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 00:00:59.997","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 00:01:00.045","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 00:01:00.046","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 00:01:00.046","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 00:01:00.051","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 00:01:00.096","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 00:01:00.239","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"FC1E1936-D27E-7822-B52A-8D7666750748\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 00:03:17.655","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 00:03:17.661","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 00:03:17.662","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 00:03:17.670","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 00:03:17.680","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 00:03:17.680","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 00:03:17.725","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 00:03:40.273","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 00:03:40.322","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 00:03:40.323","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 00:03:40.323","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 00:03:40.328","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 00:03:40.373","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 00:03:40.551","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"74B30921-15F1-7A7A-9796-946D6FA49E88\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 00:09:11.040","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 00:09:11.047","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 00:09:11.047","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 00:09:11.056","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 00:09:11.062","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 00:09:11.062","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 00:09:11.110","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 00:09:33.672","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 00:09:33.720","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 00:09:33.721","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 00:09:33.721","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 00:09:33.727","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 00:09:33.771","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 00:09:33.930","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"DDC7F8B3-575F-74FC-9AE2-5B7FD20358D7\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 00:10:50.314","caller":"cache/cache.go:122","msg":"缓存批量删除成功","pattern":"role:menus:*","count":2}
{"level":"info","timestamp":"2025-12-02 17:40:06.759","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 17:40:06.765","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 17:40:06.765","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 17:40:06.792","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 17:40:06.800","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 17:40:06.800","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 17:40:06.861","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 17:40:32.138","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 17:40:32.187","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 17:40:32.188","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 17:40:32.188","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 17:40:32.201","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 17:40:32.244","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 17:40:32.512","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"114044A1-0CD4-7889-99C2-5AC657515A09\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 17:43:23.202","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 17:43:23.209","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 17:43:23.209","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 17:43:23.218","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 17:43:23.225","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 17:43:23.225","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 17:43:23.274","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 17:43:48.884","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 17:43:49.014","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 17:43:49.015","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 17:43:49.015","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 17:43:49.022","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 17:43:49.065","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 17:43:49.214","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"156D3624-AAF8-72B7-8526-0D37E297BFEC\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 17:48:50.187","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 17:48:50.193","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 17:48:50.193","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 17:48:50.201","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 17:48:50.208","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 17:48:50.208","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 17:48:50.262","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 17:49:15.172","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 17:49:15.220","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 17:49:15.221","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 17:49:15.221","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 17:49:15.233","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 17:49:15.280","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 17:49:15.444","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"DC921FB5-7FD9-782A-9707-A4213653691A\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 17:50:46.080","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 17:50:46.086","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 17:50:46.086","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 17:50:46.094","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 17:50:46.100","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 17:50:46.100","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 17:50:46.149","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 17:51:10.679","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 17:51:10.727","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 17:51:10.729","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 17:51:10.729","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 17:51:10.732","caller":"api/container.go:66","msg":"AList文件服务未启用"}
{"level":"info","timestamp":"2025-12-02 17:51:10.759","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 17:51:10.804","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 17:51:10.954","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"A9A0C777-FA82-7B84-AE22-2266B968B1C8\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 17:53:06.575","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 17:53:06.583","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 17:53:06.584","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 17:53:06.592","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 17:53:06.600","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 17:53:06.600","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 17:53:06.652","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 17:53:31.026","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 17:53:31.104","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 17:53:31.106","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 17:53:31.106","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 17:53:31.106","caller":"api/container.go:66","msg":"AList文件服务未启用"}
{"level":"info","timestamp":"2025-12-02 17:53:31.123","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 17:53:31.164","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 17:53:31.322","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"039F9162-0654-75C3-AFFB-3CBDE64D3EBD\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 17:54:00.110","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 17:54:00.116","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 17:54:00.117","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 17:54:00.125","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 17:54:00.130","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 17:54:00.130","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 17:54:00.179","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 17:54:24.393","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 17:54:24.437","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 17:54:24.438","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 17:54:24.438","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 17:54:24.457","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 17:54:24.501","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 17:54:24.658","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"15126A30-D31A-77E6-A66D-3D58D0F1462C\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 18:25:47.873","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 18:25:47.880","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 18:25:47.880","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 18:25:47.889","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 18:25:47.897","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 18:25:47.897","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 18:25:47.943","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 18:26:12.674","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 18:26:12.720","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 18:26:12.722","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 18:26:12.723","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 18:26:12.746","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 18:26:12.791","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"fatal","timestamp":"2025-12-02 18:26:12.796","caller":"bootstrap/app.go:46","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:46\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-12-02 18:26:36.300","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 18:26:36.307","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 18:26:36.307","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 18:26:36.315","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 18:26:36.321","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 18:26:36.321","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 18:26:36.367","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 18:27:01.259","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 18:27:01.303","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 18:27:01.307","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 18:27:01.307","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 18:27:01.325","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 18:27:01.367","caller":"bootstrap/app.go:41","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 18:27:01.529","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"9B36DBF6-C3C4-7792-AE14-C18DC06A8DC8\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 18:28:46.633","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 18:28:46.640","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 18:28:46.640","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 18:28:46.648","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 18:28:46.657","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 18:28:46.657","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 18:28:46.705","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 18:29:11.224","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 18:29:11.278","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 18:29:11.279","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 18:29:11.279","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 18:29:11.295","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 18:29:11.339","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 18:29:11.488","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"913A65AE-5681-7327-8289-56904FA86849\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 18:30:18.181","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 18:30:18.187","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 18:30:18.187","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 18:30:18.195","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 18:30:18.201","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 18:30:18.201","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 18:30:18.252","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 18:30:43.233","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 18:30:43.279","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 18:30:43.281","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 18:30:43.281","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"error","timestamp":"2025-12-02 18:30:43.294","caller":"service/alist.go:92","msg":"AList登录请求失败","error":"Post \"http://localhost:5244/api/auth/login\": dial tcp [::1]:5244: connectex: No connection could be made because the target machine actively refused it.","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*AListService).Login\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/alist.go:92\ngithub.com/Kevin-Jii/tower-go/router/api.BuildControllers\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/router/api/container.go:62\ngithub.com/Kevin-Jii/tower-go/bootstrap.BuildControllers\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/routes.go:11\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-12-02 18:30:43.294","caller":"api/container.go:64","msg":"AList服务连接失败，文件服务不可用: 登录请求失败: Post \"http://localhost:5244/api/auth/login\": dial tcp [::1]:5244: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-02 18:30:43.309","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 18:30:43.353","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 18:30:43.567","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"FEAF6F3C-3FC3-7BBB-872F-140AFA2C745E\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 19:11:16.224","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 19:11:16.230","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 19:11:16.230","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 19:11:16.244","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 19:11:16.252","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 19:11:16.252","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 19:11:16.300","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 19:11:40.613","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 19:11:40.656","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 19:11:40.659","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 19:11:40.659","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 19:11:40.685","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 19:11:40.727","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 19:11:40.911","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"7F7AADEA-299D-772E-90FC-16DFC41E3CAE\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 19:42:39.386","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 19:42:39.392","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 19:42:39.392","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 19:42:39.405","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 19:42:39.412","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 19:42:39.412","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 19:42:39.462","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 19:43:03.597","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 19:43:03.641","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 19:43:03.642","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 19:43:03.642","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 19:43:03.648","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 19:43:03.692","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 19:43:03.845","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"A2065EFC-B82E-78FB-9229-0BE61B3C434E\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 19:43:22.441","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 19:43:22.447","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 19:43:22.447","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 19:43:22.456","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 19:43:22.463","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 19:43:22.463","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 19:43:22.516","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 19:43:47.371","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 19:43:47.414","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 19:43:47.415","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 19:43:47.415","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-02 19:43:47.422","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://localhost:9000/tower/?location=\": dial tcp [::1]:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-02 19:43:47.434","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 19:43:47.478","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 19:43:47.629","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"0E9661CF-F9CA-71A0-A967-FD8403F02AB1\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 19:44:26.134","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 19:44:26.139","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 19:44:26.140","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 19:44:26.148","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 19:44:26.154","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 19:44:26.154","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 19:44:26.208","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 19:44:50.962","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 19:44:51.009","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 19:44:51.011","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 19:44:51.011","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-02 19:44:51.074","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: The Access Key Id you provided does not exist in our records."}
{"level":"info","timestamp":"2025-12-02 19:44:51.082","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 19:44:51.129","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 19:44:51.289","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"C3339982-63C6-73D3-9BAB-049306E59CCA\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 19:47:25.389","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 19:47:25.395","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 19:47:25.395","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 19:47:25.403","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 19:47:25.409","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 19:47:25.409","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 19:47:25.461","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 19:47:50.084","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 19:47:50.133","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 19:47:50.136","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 19:47:50.136","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 19:47:50.231","caller":"service/minio.go:58","msg":"MinIO服务初始化成功","endpoint":"47.120.27.64:9000","bucket":"images"}
{"level":"info","timestamp":"2025-12-02 19:47:50.231","caller":"api/container.go:74","msg":"MinIO文件服务已启用"}
{"level":"info","timestamp":"2025-12-02 19:47:50.266","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 19:47:50.311","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 19:47:50.455","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"0650A9B0-BCA8-744C-A9B8-C2872E150B79\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 19:53:45.490","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 19:53:45.496","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 19:53:45.496","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 19:53:45.506","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 19:53:45.514","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 19:53:45.514","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 19:53:45.561","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 19:54:09.920","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 19:54:09.964","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 19:54:09.965","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 19:54:09.966","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 19:54:10.058","caller":"service/minio.go:58","msg":"MinIO服务初始化成功","endpoint":"47.120.27.64:9000","bucket":"images"}
{"level":"info","timestamp":"2025-12-02 19:54:10.058","caller":"api/container.go:74","msg":"MinIO文件服务已启用"}
{"level":"info","timestamp":"2025-12-02 19:54:10.063","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 19:54:10.113","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 19:54:10.270","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"695271C3-F995-773E-9359-6E3A4334A3D9\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 19:57:00.308","caller":"service/minio.go:98","msg":"MinIO文件上传成功","object":"images/products/20251202_c5d123dd.jpg","size":1101046}
{"level":"info","timestamp":"2025-12-02 20:09:56.730","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 20:09:56.736","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 20:09:56.736","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 20:09:56.744","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 20:09:56.751","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 20:09:56.751","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 20:09:56.799","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 20:10:20.889","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 20:10:20.934","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 20:10:20.935","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 20:10:20.935","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 20:10:21.019","caller":"service/minio.go:58","msg":"MinIO服务初始化成功","endpoint":"47.120.27.64:9000","bucket":"images"}
{"level":"info","timestamp":"2025-12-02 20:10:21.019","caller":"api/container.go:74","msg":"MinIO文件服务已启用"}
{"level":"info","timestamp":"2025-12-02 20:10:21.025","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 20:10:21.069","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 20:10:21.201","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"4DBD30F8-95D0-7E3A-9697-88B7C89C435C\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 20:10:51.788","caller":"service/minio.go:98","msg":"MinIO文件上传成功","object":"products/20251202_1ac1be64.jpg","size":642987}
{"level":"info","timestamp":"2025-12-02 20:14:51.367","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-02 20:14:51.373","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-02 20:14:51.373","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-02 20:14:51.384","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-02 20:14:51.391","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-02 20:14:51.391","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-02 20:14:51.444","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-02 20:15:15.548","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-02 20:15:15.592","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-02 20:15:15.593","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-02 20:15:15.593","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-02 20:15:15.701","caller":"service/minio.go:58","msg":"MinIO服务初始化成功","endpoint":"47.120.27.64:9000","bucket":"images"}
{"level":"info","timestamp":"2025-12-02 20:15:15.703","caller":"api/container.go:74","msg":"MinIO文件服务已启用"}
{"level":"info","timestamp":"2025-12-02 20:15:15.743","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-02 20:15:15.788","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-02 20:15:15.948","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"91F049BA-1671-75D5-A934-1D3DFC777285\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-02 20:15:41.949","caller":"service/minio.go:98","msg":"MinIO文件上传成功","object":"suppliers/2025/12/02/201541_560effcb.jpg","size":1141822}
{"level":"info","timestamp":"2025-12-03 01:04:01.304","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 01:04:01.309","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 01:04:01.309","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 01:04:01.319","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 01:04:01.326","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 01:04:01.326","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 01:04:01.380","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-03 01:04:25.648","caller":"bootstrap/migrate.go:54","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-03 01:04:25.696","caller":"bootstrap/migrate.go:62","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-03 01:04:25.697","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 01:04:25.697","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 01:04:27.929","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 01:04:27.968","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 01:04:28.013","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 01:04:28.197","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"74D296E0-751D-7DDD-A884-698B27759C65\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 01:51:34.372","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 01:51:34.378","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 01:51:34.378","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 01:51:34.395","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 01:51:34.403","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 01:51:34.403","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 01:51:34.457","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-03 01:51:59.558","caller":"bootstrap/migrate.go:55","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-03 01:51:59.603","caller":"bootstrap/migrate.go:63","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-03 01:51:59.603","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 01:51:59.603","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 01:52:01.816","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 01:52:01.856","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 01:52:01.903","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 01:52:02.062","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"2B410860-2828-7F87-BA1D-5CA682157ADF\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 01:55:35.069","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 01:55:35.075","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 01:55:35.075","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 01:55:35.086","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 01:55:35.096","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 01:55:35.096","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 01:55:35.148","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-03 01:56:01.470","caller":"bootstrap/migrate.go:55","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-03 01:56:01.517","caller":"bootstrap/migrate.go:63","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-03 01:56:01.518","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 01:56:01.518","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 01:56:03.741","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 01:57:03.619","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 01:57:03.625","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 01:57:03.625","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 01:57:03.635","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 01:57:03.641","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 01:57:03.641","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 01:57:03.693","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-03 01:57:30.431","caller":"bootstrap/migrate.go:55","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-03 01:57:30.480","caller":"bootstrap/migrate.go:63","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-03 01:57:30.481","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 01:57:30.481","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 01:57:32.702","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 01:59:54.658","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 01:59:54.664","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 01:59:54.664","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 01:59:54.674","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 01:59:54.681","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 01:59:54.681","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 01:59:54.740","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-03 02:00:21.700","caller":"bootstrap/migrate.go:55","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-03 02:00:21.749","caller":"bootstrap/migrate.go:63","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-03 02:00:21.750","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 02:00:21.750","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 02:00:23.957","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 02:00:24.005","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 02:00:24.049","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 02:00:24.200","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"EF03E76B-CBB2-7F8B-942D-5D0335873489\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 02:03:28.234","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 02:03:28.240","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 02:03:28.240","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 02:03:28.251","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 02:03:28.258","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 02:03:28.258","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 02:03:28.314","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-03 02:03:55.251","caller":"bootstrap/migrate.go:55","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-03 02:03:55.297","caller":"bootstrap/migrate.go:63","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-03 02:03:55.298","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 02:03:55.298","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 02:03:57.512","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 02:03:57.545","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 02:03:57.589","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 02:03:57.765","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"C785F6D6-F7D4-74A1-8582-72E5ED283D98\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 02:07:36.275","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 02:07:36.281","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 02:07:36.281","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 02:07:36.292","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 02:07:36.299","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 02:07:36.299","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 02:07:36.351","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-03 02:08:02.811","caller":"bootstrap/migrate.go:55","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-03 02:08:02.860","caller":"bootstrap/migrate.go:63","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-03 02:08:02.862","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 02:08:02.862","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 02:08:05.079","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 02:08:05.107","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 02:08:05.150","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 02:08:05.340","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"6D762554-1696-7BD5-B951-1443E9AE2DB5\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 02:10:40.956","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 02:10:40.962","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 02:10:40.962","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 02:10:40.973","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 02:10:40.979","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 02:10:40.979","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 02:10:41.034","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-03 02:11:07.747","caller":"bootstrap/migrate.go:55","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-03 02:11:07.792","caller":"bootstrap/migrate.go:63","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-03 02:11:07.794","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 02:11:07.795","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 02:11:09.947","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 02:11:09.991","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 02:11:10.032","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 02:11:10.198","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"995230D1-E700-72D5-AC9C-C421324CE5C2\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 17:37:52.256","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 17:37:52.262","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 17:37:52.262","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 17:37:52.271","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 17:37:52.278","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 17:37:52.278","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 17:37:52.325","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-03 17:38:19.293","caller":"bootstrap/migrate.go:55","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-03 17:38:19.337","caller":"bootstrap/migrate.go:63","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-03 17:38:19.340","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 17:38:19.341","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 17:38:21.504","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 17:38:21.538","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 17:38:21.587","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 17:38:21.747","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"56D9D5E1-6C0A-77C3-BDF4-67F806C48887\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 17:40:35.517","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 17:40:35.523","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 17:40:35.523","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 17:40:35.532","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 17:40:35.538","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 17:40:35.538","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 17:40:35.587","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-03 17:41:01.491","caller":"bootstrap/migrate.go:55","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-03 17:41:01.537","caller":"bootstrap/migrate.go:63","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-03 17:41:01.538","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 17:41:01.539","caller":"bootstrap/app.go:32","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 17:41:03.693","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 17:41:03.735","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 17:41:03.783","caller":"bootstrap/app.go:43","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 17:41:03.938","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"E4AFA19E-BAEC-7EC9-89BC-B124DAD590C5\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 19:05:53.931","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 19:05:53.936","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 19:05:53.936","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 19:05:53.963","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 19:05:53.972","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 19:05:53.972","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 19:05:54.033","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-03 19:06:19.176","caller":"bootstrap/migrate.go:55","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-03 19:06:19.223","caller":"bootstrap/migrate.go:63","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-03 19:06:19.224","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 19:06:19.225","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 19:06:21.397","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 19:06:21.409","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 19:06:21.451","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 19:06:21.597","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"1C9A0FBB-F919-776F-BA68-D3D2AA6319CC\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 19:10:22.025","caller":"bootstrap/events.go:42","msg":"🔗 门店 999 绑定了供应商: [3 4]"}
{"level":"info","timestamp":"2025-12-03 19:12:55.370","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 19:12:55.375","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 19:12:55.375","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 19:12:55.387","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 19:12:55.394","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 19:12:55.394","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 19:12:55.449","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-03 19:13:21.193","caller":"bootstrap/migrate.go:55","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-03 19:13:21.239","caller":"bootstrap/migrate.go:63","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-03 19:13:21.243","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 19:13:21.245","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 19:13:23.453","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 19:13:23.460","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 19:13:23.505","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 19:13:23.681","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"8E85DF09-19D8-7FA3-9D60-1AD61672AE30\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 19:13:42.985","caller":"bootstrap/events.go:42","msg":"🔗 门店 999 绑定了供应商: [5 4]"}
{"level":"info","timestamp":"2025-12-03 19:13:55.943","caller":"bootstrap/events.go:42","msg":"🔗 门店 2 绑定了供应商: [4 3 2]"}
{"level":"info","timestamp":"2025-12-03 19:14:44.564","caller":"cache/cache.go:122","msg":"缓存批量删除成功","pattern":"role:menus:*","count":1}
{"level":"info","timestamp":"2025-12-03 19:49:45.717","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 19:49:45.722","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 19:49:45.722","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 19:49:45.734","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 19:49:45.742","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 19:49:45.742","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 19:49:45.791","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-03 19:50:11.242","caller":"bootstrap/migrate.go:55","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-03 19:50:11.287","caller":"bootstrap/migrate.go:63","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-03 19:50:11.288","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 19:50:11.289","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 19:50:13.492","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 19:50:13.498","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 19:50:13.542","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 19:50:13.689","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"6CB43DCE-C6C2-7C82-9D0D-4AB6DE2301F0\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 19:51:29.948","caller":"bootstrap/events.go:42","msg":"🔗 门店 2 绑定了供应商: [3 4]"}
{"level":"info","timestamp":"2025-12-03 19:53:31.363","caller":"bootstrap/events.go:42","msg":"🔗 门店 2 绑定了供应商: [3 4]"}
{"level":"info","timestamp":"2025-12-03 19:56:07.843","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 19:56:07.849","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 19:56:07.849","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 19:56:07.862","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 19:56:07.870","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 19:56:07.870","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 19:56:07.871","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-03 19:56:07.877","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 19:56:07.878","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 19:56:10.073","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 19:56:10.088","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 19:56:10.132","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 19:56:10.279","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"2D36D0B0-4F06-7A96-B23D-8B7AFED16CBE\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 19:56:15.571","caller":"bootstrap/events.go:42","msg":"🔗 门店 2 绑定了供应商: [3 4]"}
{"level":"info","timestamp":"2025-12-03 19:56:21.948","caller":"bootstrap/events.go:42","msg":"🔗 门店 2 绑定了供应商: [3 5 4 2 1]"}
{"level":"info","timestamp":"2025-12-03 20:03:23.485","caller":"bootstrap/events.go:42","msg":"🔗 门店 999 绑定了供应商: [5 4]"}
{"level":"info","timestamp":"2025-12-03 20:03:31.152","caller":"bootstrap/events.go:42","msg":"🔗 门店 2 绑定了供应商: [5 4 3 2 1]"}
{"level":"info","timestamp":"2025-12-03 20:05:53.523","caller":"bootstrap/events.go:42","msg":"🔗 门店 2 绑定了供应商: [4 3 2]"}
{"level":"info","timestamp":"2025-12-03 20:43:12.572","caller":"bootstrap/events.go:42","msg":"🔗 门店 1 绑定了供应商: [5]"}
{"level":"info","timestamp":"2025-12-03 20:52:10.156","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 20:52:10.162","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 20:52:10.162","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 20:52:10.180","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 20:52:10.188","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 20:52:10.188","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 20:52:10.188","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-03 20:52:10.190","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 20:52:10.190","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 20:52:12.374","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 20:52:12.420","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 20:52:12.473","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 20:52:12.631","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"6D1C9C02-2270-7233-BB1C-52D25F5C5CE9\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 21:59:09.617","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 21:59:09.623","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 21:59:09.624","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 21:59:09.640","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 21:59:09.648","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 21:59:09.648","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 21:59:09.648","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-03 21:59:09.649","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 21:59:09.649","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 21:59:11.855","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 21:59:11.904","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 21:59:11.948","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 21:59:12.120","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"45A6D001-770A-7727-A520-B76E55673B8B\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 22:04:38.335","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 22:04:38.341","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 22:04:38.341","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 22:04:38.352","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 22:04:38.359","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 22:04:38.359","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 22:04:38.359","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-03 22:04:38.360","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 22:04:38.360","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 22:04:40.555","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 22:04:40.602","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 22:04:40.645","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 22:04:41.051","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"7F91C58F-F9A3-73FB-B2D2-B08DE6D8CC74\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 22:21:18.068","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 22:21:18.074","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 22:21:18.074","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 22:21:18.087","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 22:21:18.098","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 22:21:18.098","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 22:21:18.098","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-03 22:21:18.099","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 22:21:18.099","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 22:21:20.322","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 22:21:20.339","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 22:21:20.382","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 22:21:20.526","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"B071CEEA-C90D-7C52-8EEB-DF23B817D9A9\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 23:03:27.423","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 23:03:27.429","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 23:03:27.429","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 23:03:27.441","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 23:03:27.449","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 23:03:27.449","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 23:03:27.449","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-03 23:03:27.450","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 23:03:27.451","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 23:03:29.655","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 23:03:29.675","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 23:03:29.717","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 23:03:29.868","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"8878A250-C95F-7C44-A427-C504F1CC76AA\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 23:06:08.185","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 23:06:08.194","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 23:06:08.195","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 23:06:08.207","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 23:06:08.218","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 23:06:08.218","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 23:06:08.218","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-03 23:06:08.219","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 23:06:08.220","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 23:06:10.441","caller":"api/container.go:70","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 23:06:10.450","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 23:06:10.491","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 23:06:10.654","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"D3F6F938-4F22-7236-BC03-D0F38DA0D93E\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 23:18:25.668","caller":"bootstrap/events.go:16","msg":"📦 新采购单创建: PO202512032318253600, 门店ID: 2"}
{"level":"info","timestamp":"2025-12-03 23:18:35.194","caller":"bootstrap/events.go:23","msg":"✅ 采购单已确认"}
{"level":"info","timestamp":"2025-12-03 23:19:13.039","caller":"bootstrap/events.go:16","msg":"📦 新采购单创建: PO202512032319124300, 门店ID: 2"}
{"level":"info","timestamp":"2025-12-03 23:19:20.620","caller":"bootstrap/events.go:35","msg":"❌ 采购单已取消"}
{"level":"info","timestamp":"2025-12-03 23:36:06.278","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 23:36:06.284","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 23:36:06.284","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 23:36:06.297","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 23:36:06.304","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 23:36:06.304","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 23:36:06.304","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-03 23:36:06.306","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 23:36:06.306","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 23:36:08.516","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 23:36:08.567","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 23:36:08.614","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 23:36:08.770","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"7FCEB9A9-68D9-7195-AA5B-665F07DE60EA\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 23:38:11.770","caller":"bootstrap/events.go:16","msg":"📦 新采购单创建: PO202512032338119900, 门店ID: 999"}
{"level":"info","timestamp":"2025-12-03 23:38:17.164","caller":"bootstrap/events.go:23","msg":"✅ 采购单已确认"}
{"level":"info","timestamp":"2025-12-03 23:43:21.203","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 23:43:21.209","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 23:43:21.209","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 23:43:21.221","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 23:43:21.231","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 23:43:21.231","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 23:43:21.231","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-03 23:43:21.232","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 23:43:21.232","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 23:43:23.441","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 23:43:23.472","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 23:43:23.516","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 23:43:23.649","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"3D7999EA-41B5-7258-91B8-6E763B70CC5D\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 23:52:08.616","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 23:52:08.622","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 23:52:08.622","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 23:52:08.633","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 23:52:08.640","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 23:52:08.640","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 23:52:08.640","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-03 23:52:08.642","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 23:52:08.642","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 23:52:10.843","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 23:52:10.891","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 23:52:10.936","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 23:52:11.108","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"F8D4E604-0DF7-7E10-BC5D-271A8D9F5B58\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 23:53:19.263","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 23:53:19.269","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 23:53:19.269","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 23:53:19.289","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 23:53:19.302","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 23:53:19.302","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 23:53:19.302","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-03 23:53:19.304","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 23:53:19.304","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 23:53:21.501","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 23:53:21.509","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 23:53:21.558","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 23:53:21.698","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"5520C077-293F-7AD0-BF6B-C6B82414E9C8\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-03 23:54:25.920","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-03 23:54:25.926","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-03 23:54:25.926","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-03 23:54:25.935","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-03 23:54:25.942","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-03 23:54:25.942","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-03 23:54:25.942","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-03 23:54:25.943","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-03 23:54:25.943","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-03 23:54:28.162","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": dial tcp 47.120.27.64:9000: connectex: No connection could be made because the target machine actively refused it."}
{"level":"info","timestamp":"2025-12-03 23:54:28.211","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-03 23:54:28.257","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-03 23:54:28.407","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"08DCFA61-1BD7-7DCF-A87F-CAA9B6FC0478\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-04 17:35:38.309","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-04 17:35:38.315","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-04 17:35:38.315","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-04 17:35:38.324","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-04 17:35:38.330","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-04 17:35:38.330","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-04 17:35:38.330","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-04 17:35:38.331","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-04 17:35:38.331","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-04 17:35:41.679","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-04 17:35:41.725","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-04 17:35:41.727","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-04 17:35:46.676","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"BF10FE1A-B0ED-7721-8120-7962AAD88C66\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-04 17:43:18.479","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-04 17:43:18.484","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-04 17:43:18.485","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-04 17:43:18.498","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-04 17:43:18.506","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-04 17:43:18.506","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-04 17:43:18.506","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-04 17:43:18.507","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-04 17:43:18.507","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-04 17:43:22.019","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-04 17:43:22.055","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-04 17:43:22.057","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-04 17:43:26.448","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"CB08C552-5D63-711D-883F-EFBE30260216\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-04 17:46:50.725","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-04 17:46:50.730","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-04 17:46:50.730","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-04 17:46:50.741","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-04 17:46:50.747","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-04 17:46:50.747","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-04 17:46:51.624","caller":"bootstrap/migrate.go:56","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-04 17:46:51.817","caller":"bootstrap/migrate.go:64","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-04 17:46:51.839","caller":"bootstrap/seed.go:67","msg":"种子数据初始化完成","success":8,"skipped":0}
{"level":"info","timestamp":"2025-12-04 17:46:51.839","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-04 17:46:58.371","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-04 17:46:58.422","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-04 17:46:58.424","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-04 17:47:01.942","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"E736DEEE-7569-744C-B2AC-D02D5074D9D9\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-04 17:47:05.388","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-04 17:47:05.394","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-04 17:47:05.394","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-04 17:47:05.403","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-04 17:47:05.409","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-04 17:47:05.409","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-04 17:47:05.416","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-04 17:47:06.089","caller":"bootstrap/migrate.go:56","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-04 17:47:06.090","caller":"bootstrap/migrate.go:64","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-04 17:47:06.091","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-04 17:47:06.091","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-04 17:47:09.457","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-04 17:47:09.503","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-04 17:47:09.504","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-04 17:47:12.536","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"29B2EC28-2AB9-7864-8750-77B731C159EA\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-04 18:16:27.548","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-04 18:16:27.555","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-04 18:16:27.555","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-04 18:16:27.564","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-04 18:16:27.574","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-04 18:16:27.574","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-04 18:16:28.265","caller":"bootstrap/migrate.go:56","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-04 18:16:28.469","caller":"bootstrap/migrate.go:64","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-04 18:16:28.521","caller":"bootstrap/seed.go:67","msg":"种子数据初始化完成","success":36,"skipped":0}
{"level":"info","timestamp":"2025-12-04 18:16:28.521","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-04 18:16:32.028","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-04 18:16:32.074","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-04 18:16:32.075","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-04 18:16:41.513","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-04 18:16:41.518","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-04 18:16:41.518","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-04 18:16:41.527","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-04 18:16:41.533","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-04 18:16:41.533","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-04 18:16:41.533","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-04 18:16:41.535","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-04 18:16:41.535","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-04 18:16:44.904","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-04 18:16:44.952","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-04 18:16:44.954","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-04 18:16:48.641","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"CFD2EF32-17A2-720C-BB95-0C0B3B53AAE5\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-04 18:25:09.106","caller":"bootstrap/events.go:42","msg":"🔗 门店 999 绑定了供应商: [4 3]"}
{"level":"info","timestamp":"2025-12-04 18:28:45.017","caller":"cache/cache.go:122","msg":"缓存批量删除成功","pattern":"role:menus:*","count":1}
{"level":"info","timestamp":"2025-12-04 18:36:48.386","caller":"utils/employee.go:46","msg":"生成新工号"}
{"level":"info","timestamp":"2025-12-04 18:42:14.733","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-04 18:42:14.738","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-04 18:42:14.738","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-04 18:42:14.750","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-04 18:42:14.756","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-04 18:42:14.756","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-04 18:42:14.756","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-04 18:42:14.758","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-04 18:42:14.758","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-04 18:42:18.049","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-04 18:42:18.080","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-04 18:42:18.082","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-04 18:42:22.531","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"0D656D09-F056-742D-B419-29FE946AEAF9\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-04 18:47:37.216","caller":"bootstrap/events.go:42","msg":"🔗 门店 1 绑定了供应商: [3 4]"}
{"level":"info","timestamp":"2025-12-04 18:47:46.665","caller":"bootstrap/events.go:42","msg":"🔗 门店 2 绑定了供应商: [5 4]"}
{"level":"info","timestamp":"2025-12-04 18:47:53.481","caller":"bootstrap/events.go:42","msg":"🔗 门店 2 绑定了供应商: [3]"}
{"level":"info","timestamp":"2025-12-04 18:49:04.047","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-04 18:49:04.053","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-04 18:49:04.053","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-04 18:49:04.062","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-04 18:49:04.068","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-04 18:49:04.068","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-04 18:49:04.068","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-04 18:49:04.069","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-04 18:49:04.069","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-04 18:49:08.387","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-04 18:49:08.401","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-04 18:49:08.402","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-04 18:49:12.225","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"E1B2B956-6984-7D5C-8882-8D87B4B7CC48\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-04 18:50:49.729","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-04 18:50:49.740","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-04 18:50:49.740","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-04 18:50:49.757","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-04 18:50:49.767","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-04 18:50:49.767","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-04 18:50:49.767","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-04 18:50:49.769","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-04 18:50:49.769","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-04 18:50:53.035","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-04 18:50:53.076","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-04 18:50:53.078","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-04 18:50:57.896","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"75DAA333-EA31-771E-B378-AEA0DCB1C49D\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-04 18:53:25.848","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-04 18:53:25.854","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-04 18:53:25.854","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-04 18:53:25.863","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-04 18:53:25.870","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-04 18:53:25.870","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-04 18:53:25.870","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-04 18:53:25.871","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-04 18:53:25.871","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-04 18:53:29.468","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-04 18:53:29.487","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-04 18:53:29.490","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-04 18:53:33.346","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"D5923418-08F7-7154-959B-2FE5DE36C60F\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-04 18:58:48.059","caller":"bootstrap/events.go:42","msg":"🔗 门店 999 绑定了供应商: [5 2 1]"}
{"level":"info","timestamp":"2025-12-04 18:59:28.080","caller":"bootstrap/events.go:16","msg":"📦 新采购单创建: PO202512041859284800, 门店ID: 999"}
{"level":"info","timestamp":"2025-12-04 19:11:06.968","caller":"bootstrap/events.go:16","msg":"📦 新采购单创建: PO202512041911060000, 门店ID: 999"}
{"level":"info","timestamp":"2025-12-04 19:11:26.412","caller":"bootstrap/events.go:16","msg":"📦 新采购单创建: PO202512041911265200, 门店ID: 999"}
{"level":"info","timestamp":"2025-12-04 19:12:53.036","caller":"bootstrap/events.go:16","msg":"📦 新采购单创建: PO202512041912538300, 门店ID: 999"}
{"level":"info","timestamp":"2025-12-04 19:13:27.329","caller":"bootstrap/events.go:23","msg":"✅ 采购单已确认"}
{"level":"error","timestamp":"2025-12-05 17:10:19.121","caller":"cache/cache.go:74","msg":"缓存设置失败","key":"menu:tree","error":"dial tcp [::1]:6379: connectex: An attempt was made to access a socket in a way forbidden by its access permissions.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/cache.CacheSet\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/cache/cache.go:74\ngithub.com/Kevin-Jii/tower-go/module.(*MenuModule).List\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/module/menu.go:55\ngithub.com/Kevin-Jii/tower-go/service.(*MenuService).GetMenuTree\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu.go:65\ngithub.com/Kevin-Jii/tower-go/controller.(*MenuController).GetUserMenus\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/menu.go:470\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/router/api.RegisterMenuRoutes.AuthMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"error","timestamp":"2025-12-05 17:10:40.830","caller":"cache/cache.go:74","msg":"缓存设置失败","key":"menu:tree","error":"dial tcp [::1]:6379: connectex: An attempt was made to access a socket in a way forbidden by its access permissions.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/cache.CacheSet\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/cache/cache.go:74\ngithub.com/Kevin-Jii/tower-go/module.(*MenuModule).List\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/module/menu.go:55\ngithub.com/Kevin-Jii/tower-go/service.(*MenuService).GetAllPermissions\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu.go:244\ngithub.com/Kevin-Jii/tower-go/controller.(*MenuController).GetUserPermissions\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/menu.go:507\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/router/api.RegisterMenuRoutes.AuthMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"error","timestamp":"2025-12-05 17:10:45.111","caller":"cache/cache.go:74","msg":"缓存设置失败","key":"menu:tree","error":"dial tcp [::1]:6379: connectex: An attempt was made to access a socket in a way forbidden by its access permissions.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/cache.CacheSet\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/cache/cache.go:74\ngithub.com/Kevin-Jii/tower-go/module.(*MenuModule).List\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/module/menu.go:55\ngithub.com/Kevin-Jii/tower-go/service.(*MenuService).GetMenuTree\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu.go:65\ngithub.com/Kevin-Jii/tower-go/controller.(*MenuController).GetUserMenus\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/menu.go:470\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/router/api.RegisterMenuRoutes.AuthMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"error","timestamp":"2025-12-05 17:10:55.241","caller":"cache/cache.go:74","msg":"缓存设置失败","key":"menu:tree","error":"dial tcp [::1]:6379: connectex: An attempt was made to access a socket in a way forbidden by its access permissions.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/cache.CacheSet\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/cache/cache.go:74\ngithub.com/Kevin-Jii/tower-go/module.(*MenuModule).List\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/module/menu.go:55\ngithub.com/Kevin-Jii/tower-go/service.(*MenuService).GetMenuTree\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu.go:65\ngithub.com/Kevin-Jii/tower-go/controller.(*MenuController).GetMenuTree\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/menu.go:107\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/router/api.RegisterMenuRoutes.AuthMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"error","timestamp":"2025-12-05 17:27:48.418","caller":"cache/cache.go:74","msg":"缓存设置失败","key":"menu:tree","error":"dial tcp [::1]:6379: connectex: An attempt was made to access a socket in a way forbidden by its access permissions.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/cache.CacheSet\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/cache/cache.go:74\ngithub.com/Kevin-Jii/tower-go/module.(*MenuModule).List\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/module/menu.go:55\ngithub.com/Kevin-Jii/tower-go/service.(*MenuService).GetMenuTree\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu.go:65\ngithub.com/Kevin-Jii/tower-go/controller.(*MenuController).GetUserMenus\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/menu.go:470\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/router/api.RegisterMenuRoutes.AuthMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"error","timestamp":"2025-12-05 17:33:51.854","caller":"cache/cache.go:74","msg":"缓存设置失败","key":"menu:tree","error":"dial tcp [::1]:6379: connectex: An attempt was made to access a socket in a way forbidden by its access permissions.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/cache.CacheSet\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/cache/cache.go:74\ngithub.com/Kevin-Jii/tower-go/module.(*MenuModule).List\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/module/menu.go:55\ngithub.com/Kevin-Jii/tower-go/service.(*MenuService).GetMenuTree\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu.go:65\ngithub.com/Kevin-Jii/tower-go/controller.(*MenuController).GetUserMenus\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/menu.go:470\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/router/api.RegisterMenuRoutes.AuthMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"error","timestamp":"2025-12-05 17:34:02.148","caller":"cache/cache.go:74","msg":"缓存设置失败","key":"menu:tree","error":"dial tcp [::1]:6379: connectex: An attempt was made to access a socket in a way forbidden by its access permissions.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/cache.CacheSet\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/cache/cache.go:74\ngithub.com/Kevin-Jii/tower-go/module.(*MenuModule).List\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/module/menu.go:55\ngithub.com/Kevin-Jii/tower-go/service.(*MenuService).GetMenuTree\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu.go:65\ngithub.com/Kevin-Jii/tower-go/controller.(*MenuController).GetMenuTree\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/menu.go:107\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/router/api.RegisterMenuRoutes.AuthMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"error","timestamp":"2025-12-05 17:34:17.887","caller":"cache/cache.go:74","msg":"缓存设置失败","key":"menu:tree","error":"dial tcp [::1]:6379: connectex: An attempt was made to access a socket in a way forbidden by its access permissions.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/cache.CacheSet\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/cache/cache.go:74\ngithub.com/Kevin-Jii/tower-go/module.(*MenuModule).List\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/module/menu.go:55\ngithub.com/Kevin-Jii/tower-go/service.(*MenuService).GetMenuTree\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu.go:65\ngithub.com/Kevin-Jii/tower-go/controller.(*MenuController).GetMenuTree\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/menu.go:107\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/router/api.RegisterMenuRoutes.AuthMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"error","timestamp":"2025-12-05 17:34:56.715","caller":"cache/cache.go:74","msg":"缓存设置失败","key":"menu:tree","error":"dial tcp [::1]:6379: connectex: An attempt was made to access a socket in a way forbidden by its access permissions.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/cache.CacheSet\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/cache/cache.go:74\ngithub.com/Kevin-Jii/tower-go/module.(*MenuModule).List\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/module/menu.go:55\ngithub.com/Kevin-Jii/tower-go/service.(*MenuService).GetAllPermissions\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu.go:244\ngithub.com/Kevin-Jii/tower-go/controller.(*MenuController).GetUserPermissions\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/menu.go:507\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/router/api.RegisterMenuRoutes.AuthMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"error","timestamp":"2025-12-05 17:35:00.947","caller":"cache/cache.go:74","msg":"缓存设置失败","key":"menu:tree","error":"dial tcp [::1]:6379: connectex: An attempt was made to access a socket in a way forbidden by its access permissions.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/cache.CacheSet\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/cache/cache.go:74\ngithub.com/Kevin-Jii/tower-go/module.(*MenuModule).List\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/module/menu.go:55\ngithub.com/Kevin-Jii/tower-go/service.(*MenuService).GetMenuTree\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu.go:65\ngithub.com/Kevin-Jii/tower-go/controller.(*MenuController).GetUserMenus\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/menu.go:470\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/router/api.RegisterMenuRoutes.AuthMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"info","timestamp":"2025-12-05 17:35:23.712","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-05 17:35:23.719","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-05 17:35:23.719","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-05 17:35:23.727","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-05 17:35:23.734","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-05 17:35:23.734","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-05 17:35:23.734","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-05 17:35:23.735","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-05 17:35:23.735","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-05 17:35:28.096","caller":"api/container.go:73","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-05 17:35:28.145","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-05 17:35:28.147","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-05 17:35:32.281","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"0D5AFC9F-C2EC-7850-9770-9C63A73EE20E\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-05 17:37:58.488","caller":"bootstrap/events.go:23","msg":"✅ 采购单已确认"}
{"level":"info","timestamp":"2025-12-05 18:40:11.724","caller":"bootstrap/events.go:16","msg":"📦 新采购单创建: PO202512051840116600, 门店ID: 999"}
{"level":"info","timestamp":"2025-12-05 18:40:31.719","caller":"bootstrap/events.go:16","msg":"📦 新采购单创建: PO202512051840319700, 门店ID: 999"}
{"level":"info","timestamp":"2025-12-05 18:42:47.539","caller":"bootstrap/events.go:23","msg":"✅ 采购单已确认"}
{"level":"info","timestamp":"2025-12-05 19:17:42.622","caller":"bootstrap/events.go:23","msg":"✅ 采购单已确认"}
{"level":"info","timestamp":"2025-12-05 19:32:56.318","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-05 19:32:56.324","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-05 19:32:56.324","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-05 19:32:56.333","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-05 19:32:56.344","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-05 19:32:56.344","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-05 19:32:56.377","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-05 19:32:57.240","caller":"bootstrap/migrate.go:58","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-05 19:32:57.242","caller":"bootstrap/migrate.go:66","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-05 19:32:57.243","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-05 19:32:57.243","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-05 19:33:00.556","caller":"api/container.go:76","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-05 19:33:00.570","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-05 19:33:00.571","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-05 19:33:04.325","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"16203580-62CF-7C13-B505-7E86B8C5C3CB\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-05 19:33:19.496","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-05 19:33:19.502","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-05 19:33:19.502","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-05 19:33:19.511","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-05 19:33:19.521","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-05 19:33:19.521","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-05 19:33:19.525","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-05 19:33:20.357","caller":"bootstrap/migrate.go:58","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-05 19:33:20.361","caller":"bootstrap/migrate.go:66","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-05 19:33:20.361","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-05 19:33:20.362","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-05 19:33:23.692","caller":"api/container.go:76","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-05 19:33:23.738","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-05 19:33:23.739","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-05 19:33:26.796","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"6F59692E-9A4E-7DAA-955E-54D1413F94EA\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-05 19:34:02.113","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-05 19:34:02.119","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-05 19:34:02.119","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-05 19:34:02.127","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-05 19:34:02.133","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-05 19:34:02.133","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-05 19:34:02.136","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-05 19:34:02.951","caller":"bootstrap/migrate.go:58","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-05 19:34:02.952","caller":"bootstrap/migrate.go:66","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-05 19:34:02.954","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-05 19:34:02.954","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-05 19:34:08.875","caller":"api/container.go:76","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-05 19:34:08.928","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-05 19:34:08.929","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-05 19:34:12.259","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"5322379C-03B4-78AE-9AD5-4536CFBB495F\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-05 19:35:49.211","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-05 19:35:49.216","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-05 19:35:49.216","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-05 19:35:49.226","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-05 19:35:49.232","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-05 19:35:49.232","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-05 19:35:49.239","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-05 19:35:50.040","caller":"bootstrap/migrate.go:58","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-05 19:35:50.042","caller":"bootstrap/migrate.go:66","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-05 19:35:50.042","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-05 19:35:50.043","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-05 19:35:56.733","caller":"api/container.go:76","msg":"MinIO服务连接失败，文件服务不可用: 检查bucket失败: Get \"http://47.120.27.64:9000/images/?location=\": Connection closed by foreign host http://47.120.27.64:9000/images/?location=. Retry again."}
{"level":"info","timestamp":"2025-12-05 19:35:56.741","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-05 19:35:56.742","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-05 19:36:01.129","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"89BA8CAA-C5F3-7F2C-94A6-0DC6169586B5\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-05 20:40:59.837","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-05 20:40:59.846","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-05 20:40:59.846","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-05 20:40:59.886","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-05 20:40:59.899","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-05 20:40:59.900","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-05 20:40:59.969","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-05 20:41:32.544","caller":"bootstrap/migrate.go:58","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-05 20:41:32.593","caller":"bootstrap/migrate.go:66","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-05 20:41:32.597","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-05 20:41:32.598","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-05 20:41:32.705","caller":"service/minio.go:58","msg":"MinIO服务初始化成功","endpoint":"47.120.27.64:9000","bucket":"images"}
{"level":"info","timestamp":"2025-12-05 20:41:32.706","caller":"api/container.go:80","msg":"MinIO文件服务已启用"}
{"level":"info","timestamp":"2025-12-05 20:41:32.752","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-05 20:41:32.800","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-05 20:41:33.142","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"8B36C8FC-07E4-7A1D-B48D-B236B04BF7ED\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-05 20:44:40.072","caller":"service/minio.go:98","msg":"MinIO文件上传成功","object":"uploads/2025/12/05/204439_bd074b24.jpg","size":158250}
{"level":"info","timestamp":"2025-12-06 20:27:47.302","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-06 20:27:47.313","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-06 20:27:47.313","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-06 20:27:47.354","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-06 20:27:47.369","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-06 20:27:47.369","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-06 20:27:47.442","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-06 20:28:12.663","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-06 20:28:12.668","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-06 20:28:12.669","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-06 20:28:12.830","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-06 20:28:12.841","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-06 20:28:12.852","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-06 20:28:12.852","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-06 20:28:12.905","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-06 20:28:44.887","caller":"bootstrap/migrate.go:58","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-06 20:28:44.933","caller":"bootstrap/migrate.go:66","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-06 20:28:44.935","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-06 20:28:44.935","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-06 20:28:45.035","caller":"service/minio.go:58","msg":"MinIO服务初始化成功","endpoint":"47.120.27.64:9000","bucket":"images"}
{"level":"info","timestamp":"2025-12-06 20:28:45.039","caller":"api/container.go:80","msg":"MinIO文件服务已启用"}
{"level":"info","timestamp":"2025-12-06 20:28:45.087","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-06 20:28:45.130","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-06 20:28:45.310","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"59F21A91-7B89-7C78-A574-F6A27466ACC0\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-06 22:12:03.562","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-06 22:12:03.568","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-06 22:12:03.568","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-06 22:12:03.581","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-06 22:12:03.592","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-06 22:12:03.592","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-06 22:12:03.649","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-06 22:12:37.846","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-06 22:12:37.849","caller":"bootstrap/migrate.go:67","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-06 22:12:37.850","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-06 22:12:37.850","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-06 22:12:37.963","caller":"service/minio.go:58","msg":"RustFS服务初始化成功","endpoint":"47.120.27.64:9000","bucket":"images"}
{"level":"info","timestamp":"2025-12-06 22:12:37.965","caller":"api/container.go:88","msg":"RustFS文件服务已启用"}
{"level":"info","timestamp":"2025-12-06 22:12:38.003","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-06 22:12:38.046","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-06 22:12:38.188","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"C5A030B9-93DA-7404-AA27-C9FFE969015B\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-06 22:38:52.537","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-06 22:38:52.543","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-06 22:38:52.543","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-06 22:38:52.552","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-06 22:38:52.559","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-06 22:38:52.559","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-06 22:38:52.609","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-06 22:39:25.691","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-06 22:39:25.740","caller":"bootstrap/migrate.go:67","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-06 22:39:25.741","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-06 22:39:25.742","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-06 22:39:25.856","caller":"service/minio.go:58","msg":"RustFS服务初始化成功","endpoint":"47.120.27.64:9000","bucket":"images"}
{"level":"info","timestamp":"2025-12-06 22:39:25.859","caller":"api/container.go:88","msg":"RustFS文件服务已启用"}
{"level":"info","timestamp":"2025-12-06 22:39:25.907","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-06 22:39:25.952","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-06 22:39:26.131","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"26E28BFB-3579-7320-8725-C8F0DE692754\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-06 22:54:06.329","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-06 22:54:06.335","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-06 22:54:06.335","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-06 22:54:06.443","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-06 22:54:06.452","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-06 22:54:06.459","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-06 22:54:06.459","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-06 22:54:06.459","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-06 22:54:06.461","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-06 22:54:06.461","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-06 22:54:06.569","caller":"service/minio.go:58","msg":"RustFS服务初始化成功","endpoint":"47.120.27.64:9000","bucket":"images"}
{"level":"info","timestamp":"2025-12-06 22:54:06.571","caller":"api/container.go:88","msg":"RustFS文件服务已启用"}
{"level":"info","timestamp":"2025-12-06 22:54:06.615","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-06 22:54:06.658","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-06 22:54:06.814","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"7ADE9330-3B13-74F1-87B6-373BA57D81FF\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-06 23:09:37.343","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-06 23:09:37.349","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-06 23:09:37.349","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-06 23:09:37.452","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-06 23:09:37.461","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-06 23:09:37.468","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-06 23:09:37.468","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-06 23:09:37.516","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-06 23:10:10.260","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-06 23:10:10.336","caller":"bootstrap/migrate.go:67","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-06 23:10:10.337","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-06 23:10:10.337","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-06 23:10:10.456","caller":"service/minio.go:58","msg":"RustFS服务初始化成功","endpoint":"47.120.27.64:9000","bucket":"images"}
{"level":"info","timestamp":"2025-12-06 23:10:10.458","caller":"api/container.go:88","msg":"RustFS文件服务已启用"}
{"level":"info","timestamp":"2025-12-06 23:10:10.470","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-06 23:10:10.515","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-06 23:10:10.688","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"69BE1F7D-53BB-7CA9-9DA5-B7F7B93CAEE4\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-06 23:23:43.355","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-06 23:23:43.361","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-06 23:23:43.361","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-06 23:23:43.461","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-06 23:23:43.471","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-06 23:23:43.479","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-06 23:23:43.479","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-06 23:23:43.479","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-06 23:23:43.480","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-06 23:23:43.480","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-06 23:23:43.556","caller":"api/container.go:82","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-06 23:23:43.567","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-06 23:23:43.612","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-06 23:23:43.737","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"D564680B-7225-70A6-AF5D-CBEE2B330D75\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-06 23:48:47.214","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-06 23:48:47.221","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-06 23:48:47.221","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-06 23:48:47.322","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-06 23:48:47.331","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-06 23:48:47.339","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-06 23:48:47.339","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-06 23:48:47.339","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-06 23:48:47.340","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-06 23:48:47.340","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-06 23:48:47.413","caller":"api/container.go:82","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-06 23:48:47.459","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-06 23:48:47.502","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-06 23:48:47.652","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"EEB6A919-3B0C-79B5-A705-037F115D3A0B\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-06 23:48:56.387","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-06 23:48:56.393","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-06 23:48:56.393","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-06 23:48:56.496","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-06 23:48:56.504","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-06 23:48:56.510","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-06 23:48:56.510","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-06 23:48:56.561","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-06 23:49:26.826","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-06 23:49:26.891","caller":"bootstrap/migrate.go:67","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-06 23:49:26.891","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-06 23:49:26.891","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-06 23:49:26.963","caller":"api/container.go:82","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-06 23:49:26.971","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-06 23:49:27.014","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-06 23:49:27.146","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"D04897C6-CC36-7AC4-BC17-2E38F41B8A01\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 00:01:59.313","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 00:01:59.319","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 00:01:59.319","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 00:01:59.434","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 00:01:59.442","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 00:01:59.448","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 00:01:59.448","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 00:02:23.740","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 00:02:23.895","caller":"bootstrap/migrate.go:67","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 00:02:23.952","caller":"bootstrap/seed.go:67","msg":"种子数据初始化完成","success":42,"skipped":0}
{"level":"info","timestamp":"2025-12-07 00:02:23.952","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 00:02:24.033","caller":"api/container.go:82","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 00:02:24.216","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-07 00:02:24.217","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 00:02:24.368","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"DD250304-3F5D-7A22-962A-7C58A93C2269\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 00:02:29.430","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 00:02:29.436","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 00:02:29.436","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 00:02:29.535","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 00:02:29.543","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 00:02:29.550","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 00:02:29.550","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 00:02:29.595","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-07 00:03:01.880","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 00:03:01.924","caller":"bootstrap/migrate.go:67","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 00:03:01.925","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-07 00:03:01.925","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 00:03:01.993","caller":"api/container.go:82","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 00:03:02.001","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-07 00:03:02.044","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 00:03:02.197","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"9E305267-EF23-77A1-81B2-0BC788F0B94D\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 00:06:40.491","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 00:06:40.500","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 00:06:40.501","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 00:06:40.600","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 00:06:40.607","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 00:06:40.614","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 00:06:40.614","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 00:06:40.661","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-07 00:07:13.706","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 00:07:13.753","caller":"bootstrap/migrate.go:67","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 00:07:13.755","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-07 00:07:13.755","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 00:07:13.827","caller":"api/container.go:82","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 00:07:13.859","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-07 00:07:13.902","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 00:07:14.050","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"9E09333F-D494-7FB0-9CA1-8822188F545A\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 00:09:55.992","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 00:09:55.998","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 00:09:55.998","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 00:09:56.098","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 00:09:56.106","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 00:09:56.113","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 00:09:56.113","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 00:10:20.666","caller":"bootstrap/migrate.go:59","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 00:10:20.811","caller":"bootstrap/migrate.go:67","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 00:10:20.860","caller":"bootstrap/seed.go:67","msg":"种子数据初始化完成","success":42,"skipped":0}
{"level":"info","timestamp":"2025-12-07 00:10:20.861","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 00:10:20.945","caller":"api/container.go:82","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 00:10:21.110","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-07 00:10:21.112","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 00:10:21.271","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"866F705A-1F9A-7628-A936-2FB743ADAC9D\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 00:24:49.415","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 00:24:49.422","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 00:24:49.422","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 00:24:49.539","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 00:24:49.549","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 00:24:49.557","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 00:24:49.557","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 00:25:18.326","caller":"bootstrap/migrate.go:60","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 00:25:18.503","caller":"bootstrap/migrate.go:68","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 00:25:18.558","caller":"bootstrap/seed.go:67","msg":"种子数据初始化完成","success":45,"skipped":0}
{"level":"info","timestamp":"2025-12-07 00:25:18.558","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 00:25:18.630","caller":"api/container.go:85","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 00:25:18.786","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-07 00:25:18.787","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 00:25:18.944","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"F4D7A6DB-FBC0-7882-85E9-7A15F7C6E6EE\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 00:32:14.293","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 00:32:14.298","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 00:32:14.299","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 00:32:14.405","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 00:32:14.414","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 00:32:14.421","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 00:32:14.421","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 00:32:14.468","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-07 00:32:52.423","caller":"bootstrap/migrate.go:60","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 00:32:52.468","caller":"bootstrap/migrate.go:68","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 00:32:52.469","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-07 00:32:52.469","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 00:32:52.546","caller":"api/container.go:85","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 00:32:52.556","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-07 00:32:52.599","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 00:32:52.764","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"F3013C89-EBCA-7C21-80DA-48013100BF8A\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 00:46:30.000","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 00:46:30.006","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 00:46:30.007","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 00:46:30.128","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 00:46:30.138","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 00:46:30.148","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 00:46:30.149","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 00:47:00.046","caller":"bootstrap/migrate.go:60","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 00:47:00.211","caller":"bootstrap/migrate.go:68","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 00:47:00.270","caller":"bootstrap/seed.go:67","msg":"种子数据初始化完成","success":51,"skipped":0}
{"level":"info","timestamp":"2025-12-07 00:47:00.271","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 00:47:00.342","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 00:47:00.529","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-07 00:47:00.534","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 00:47:00.730","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"5B4DD25C-FB44-7B45-AC06-92B2573FA03D\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 00:49:28.158","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 00:49:28.165","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 00:49:28.165","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 00:49:28.275","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 00:49:28.283","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 00:49:28.293","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 00:49:28.293","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 00:49:56.766","caller":"bootstrap/migrate.go:60","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 00:49:56.948","caller":"bootstrap/migrate.go:68","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 00:49:57.008","caller":"bootstrap/seed.go:67","msg":"种子数据初始化完成","success":51,"skipped":0}
{"level":"info","timestamp":"2025-12-07 00:49:57.009","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 00:49:57.089","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 00:49:57.229","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-07 00:49:57.231","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 00:49:57.372","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"EE7C59FE-3C93-75B3-A03C-98C43AA773F1\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 00:53:11.815","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 00:53:11.821","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 00:53:11.822","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 00:53:11.929","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 00:53:11.937","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 00:53:11.943","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 00:53:11.943","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 00:53:40.482","caller":"bootstrap/migrate.go:60","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 00:53:40.641","caller":"bootstrap/migrate.go:68","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 00:53:40.699","caller":"bootstrap/seed.go:67","msg":"种子数据初始化完成","success":51,"skipped":0}
{"level":"info","timestamp":"2025-12-07 00:53:40.699","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 00:53:40.767","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 00:53:40.953","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-07 00:53:40.955","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 00:53:41.118","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"1CA5F0FA-7589-7EF0-A82A-A01DD7FF6B82\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 00:58:17.004","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 00:58:17.009","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 00:58:17.009","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 00:58:17.119","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 00:58:17.126","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 00:58:17.134","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 00:58:17.134","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 00:58:45.527","caller":"bootstrap/migrate.go:60","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 00:58:45.684","caller":"bootstrap/migrate.go:68","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 00:58:45.749","caller":"bootstrap/seed.go:67","msg":"种子数据初始化完成","success":51,"skipped":0}
{"level":"info","timestamp":"2025-12-07 00:58:45.749","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 00:58:45.818","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 00:58:45.980","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-07 00:58:45.981","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 00:58:46.124","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"50C55BE1-89A6-7609-AE2F-19DFB7289E9A\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 01:02:35.919","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 01:02:35.925","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 01:02:35.925","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 01:02:36.031","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 01:02:36.040","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 01:02:36.047","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 01:02:36.047","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 01:03:05.810","caller":"bootstrap/migrate.go:60","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 01:03:06.002","caller":"bootstrap/migrate.go:68","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 01:03:06.061","caller":"bootstrap/seed.go:67","msg":"种子数据初始化完成","success":51,"skipped":0}
{"level":"info","timestamp":"2025-12-07 01:03:06.062","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 01:03:06.140","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 01:03:06.329","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"总部Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"info","timestamp":"2025-12-07 01:03:06.336","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 01:03:06.496","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"991AD40F-01C2-7344-9CC4-3C23F3AAB87D\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 01:03:30.051","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 01:03:30.057","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 01:03:30.057","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 01:03:30.165","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 01:03:30.175","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 01:03:30.183","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 01:03:30.183","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 01:03:30.230","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-07 01:04:07.681","caller":"bootstrap/migrate.go:60","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 01:04:07.726","caller":"bootstrap/migrate.go:68","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 01:04:07.730","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-07 01:04:07.732","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 01:04:07.805","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 01:04:07.826","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-07 01:04:07.868","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 01:04:08.026","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"CE32276A-4AFC-7F2A-8D57-AE8571BB659B\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 01:04:15.446","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 01:04:15.452","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 01:04:15.452","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 01:04:15.554","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 01:04:15.562","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 01:04:15.569","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 01:04:15.569","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 01:04:15.615","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-07 01:04:52.859","caller":"bootstrap/migrate.go:60","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 01:04:52.905","caller":"bootstrap/migrate.go:68","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 01:04:52.908","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-07 01:04:52.910","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 01:04:52.982","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 01:04:53.006","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-07 01:04:53.050","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 01:04:53.193","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"5EB02D6E-0F9B-745E-B8BD-71E0AF452A48\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 01:06:40.937","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 01:06:40.943","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 01:06:40.943","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 01:06:41.050","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 01:06:41.058","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 01:06:41.064","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 01:06:41.064","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 01:06:41.112","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-07 01:07:18.443","caller":"bootstrap/migrate.go:60","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 01:07:18.487","caller":"bootstrap/migrate.go:68","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 01:07:18.488","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-07 01:07:18.488","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 01:07:18.556","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 01:07:18.571","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-07 01:07:18.615","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 01:07:18.738","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"9FF31270-7508-72F6-B006-42FA1659B9A1\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 01:14:01.032","caller":"bootstrap/events.go:42","msg":"🔗 门店 999 绑定了供应商: [5 4 3 2 1]"}
{"level":"info","timestamp":"2025-12-07 01:14:20.558","caller":"bootstrap/events.go:16","msg":"📦 新采购单创建: PO202512070114205700, 门店ID: 999"}
{"level":"info","timestamp":"2025-12-07 01:33:49.149","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 01:33:49.156","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 01:33:49.156","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 01:33:49.273","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 01:33:49.283","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 01:33:49.289","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 01:33:49.289","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 01:33:49.337","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-07 01:34:25.961","caller":"bootstrap/migrate.go:60","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 01:34:26.009","caller":"bootstrap/migrate.go:68","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 01:34:26.010","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-07 01:34:26.010","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 01:34:26.076","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 01:34:26.111","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-07 01:34:26.153","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 01:34:26.309","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"A19CDAB1-D34C-788B-A160-3DFAFC08AB61\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 01:38:34.104","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 01:38:34.111","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 01:38:34.111","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 01:38:34.231","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 01:38:34.241","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 01:38:34.250","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 01:38:34.250","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 01:38:34.297","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-07 01:39:11.529","caller":"bootstrap/migrate.go:60","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 01:39:11.584","caller":"bootstrap/migrate.go:68","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 01:39:11.589","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-07 01:39:11.590","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 01:39:11.671","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 01:39:11.714","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-07 01:39:11.756","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 01:39:11.928","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"A19AFFC7-DD46-7C5B-BD09-EEA17330A11A\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 01:46:02.888","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 01:46:02.894","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 01:46:02.894","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 01:46:02.996","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 01:46:03.006","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 01:46:03.014","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 01:46:03.014","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 01:46:03.071","caller":"bootstrap/migrate.go:22","msg":"数据表已存在，跳过迁移检查（如需强制迁移请删除表）"}
{"level":"info","timestamp":"2025-12-07 01:46:39.992","caller":"bootstrap/migrate.go:60","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-12-07 01:46:40.039","caller":"bootstrap/migrate.go:68","msg":"数据表迁移完成，种子数据请执行 migrations/init_seed_data.sql"}
{"level":"info","timestamp":"2025-12-07 01:46:40.040","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-07 01:46:40.041","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 01:46:40.124","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 01:46:40.161","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-07 01:46:40.204","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 01:46:40.347","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"9B3DE143-B09E-7B52-B3E4-71A98D3186A8\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 01:48:55.520","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 01:48:55.531","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 01:48:55.531","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 01:48:55.650","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 01:48:55.660","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 01:48:55.670","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 01:48:55.671","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 01:48:55.671","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-07 01:48:55.672","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-07 01:48:55.674","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 01:48:55.755","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 01:48:55.764","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-07 01:48:55.805","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 01:48:55.946","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"44862E9E-8A55-73D6-8B38-585CA0476B48\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 02:00:42.500","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 02:00:42.506","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 02:00:42.506","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 02:00:42.622","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 02:00:42.633","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 02:00:42.641","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 02:00:42.641","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 02:00:42.641","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-07 02:00:42.644","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-07 02:00:42.644","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 02:00:42.715","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 02:00:42.759","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-07 02:00:42.803","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 02:00:42.961","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"1291E9E2-73EA-7A30-8F8B-C5327709E31B\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-12-07 02:06:30.211","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-07 02:06:30.217","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-07 02:06:30.217","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-07 02:06:30.331","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-12-07 02:06:30.342","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-07 02:06:30.348","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-07 02:06:30.348","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-07 02:06:30.348","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-07 02:06:30.350","caller":"bootstrap/seed.go:29","msg":"数据库已有数据，跳过种子数据初始化"}
{"level":"info","timestamp":"2025-12-07 02:06:30.350","caller":"bootstrap/app.go:35","msg":"会话管理初始化完成"}
{"level":"warn","timestamp":"2025-12-07 02:06:30.427","caller":"api/container.go:88","msg":"RustFS服务连接失败，文件服务不可用: 检查bucket失败: The request signature we calculated does not match the signature you provided. Check your key and signing method."}
{"level":"info","timestamp":"2025-12-07 02:06:30.437","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-07 02:06:30.481","caller":"bootstrap/app.go:46","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-12-07 02:06:30.612","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"总部Stream机器人(自动创建)","error":"{\"requestid\":\"8A0A39D8-0EE6-70C1-BAD3-438413A8E3C0\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
