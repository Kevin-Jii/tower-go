{"level":"warn","timestamp":"2025-11-07 21:33:15.449","caller":"utils/response.go:120","msg":"Error Response","code":500,"message":"failed to get access token: failed to get access token: map[code:invalidClientIdOrSecret message:无效的clientId或者clientSecret requestid:386DF31D-5B40-7663-97C0-7673739A9FAA]","path":"/api/v1/dingtalk/robots/1/test","method":"POST","ip":"::1"}
{"level":"info","timestamp":"2025-11-07 21:36:36.978","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-07 21:36:37.071","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-07 21:36:37.071","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-07 21:36:37.080","caller":"bootstrap/database.go:15","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-07 21:36:37.088","caller":"utils/redis.go:38","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-07 21:36:37.088","caller":"bootstrap/redis.go:17","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-07 21:36:53.741","caller":"bootstrap/migrate.go:38","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-07 21:36:53.785","caller":"bootstrap/migrate.go:43","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-07 21:36:54.563","caller":"utils/seed.go:114","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-07 21:36:54.609","caller":"utils/seed.go:258","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-07 21:36:54.614","caller":"utils/seed_dingtalk_menus.go:19","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-07 21:36:54.615","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-07 21:36:54.756","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":2,"botName":"全局Stream机器人(自动创建)","clientID":"dinglsqvmdgbj5xaidwz"}
{"level":"error","timestamp":"2025-11-07 21:36:54.761","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-07 21:36:54.762","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-07 21:36:54.765","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":2,"success":1}
{"level":"error","timestamp":"2025-11-07 22:14:37.919","caller":"service/dingtalk.go:192","msg":"Failed to get access token from DingTalk","clientID":"","response":{"code":"invalidClientIdOrSecret","message":"无效的clientId或者clientSecret","requestid":"E0960A4A-2F37-7963-9C11-D13EB9EA3393"},"stacktrace":"tower-go/service.(*DingTalkService).sendStreamMarkdown\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:192\ntower-go/service.(*DingTalkService).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:564\ntower-go/controller.(*DingTalkBotController).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/dingtalk_bot.go:237\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.RegisterRoutes.AuthMiddleware.func4\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:44\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"warn","timestamp":"2025-11-07 22:14:37.930","caller":"utils/response.go:120","msg":"Error Response","code":500,"message":"failed to get access token: failed to get access token: map[code:invalidClientIdOrSecret message:无效的clientId或者clientSecret requestid:E0960A4A-2F37-7963-9C11-D13EB9EA3393]","path":"/api/v1/dingtalk/robots/1/test","method":"POST","ip":"::1"}
{"level":"error","timestamp":"2025-11-07 22:20:25.492","caller":"service/dingtalk.go:192","msg":"Failed to get access token from DingTalk","clientID":"","response":{"code":"invalidClientIdOrSecret","message":"无效的clientId或者clientSecret","requestid":"EB204A05-B1B6-7B59-A0E3-16CF757D8698"},"stacktrace":"tower-go/service.(*DingTalkService).sendStreamMarkdown\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:192\ntower-go/service.(*DingTalkService).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:564\ntower-go/controller.(*DingTalkBotController).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/dingtalk_bot.go:237\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.RegisterRoutes.AuthMiddleware.func4\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:44\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"warn","timestamp":"2025-11-07 22:20:25.498","caller":"utils/response.go:120","msg":"Error Response","code":500,"message":"failed to get access token: failed to get access token: map[code:invalidClientIdOrSecret message:无效的clientId或者clientSecret requestid:EB204A05-B1B6-7B59-A0E3-16CF757D8698]","path":"/api/v1/dingtalk/robots/1/test","method":"POST","ip":"127.0.0.1"}
{"level":"error","timestamp":"2025-11-07 22:20:28.195","caller":"service/dingtalk.go:192","msg":"Failed to get access token from DingTalk","clientID":"","response":{"code":"invalidClientIdOrSecret","message":"无效的clientId或者clientSecret","requestid":"F1F4281A-D682-7C6B-8962-0D6FD44AFD1B"},"stacktrace":"tower-go/service.(*DingTalkService).sendStreamMarkdown\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:192\ntower-go/service.(*DingTalkService).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:564\ntower-go/controller.(*DingTalkBotController).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/dingtalk_bot.go:237\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.RegisterRoutes.AuthMiddleware.func4\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:44\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"warn","timestamp":"2025-11-07 22:20:28.199","caller":"utils/response.go:120","msg":"Error Response","code":500,"message":"failed to get access token: failed to get access token: map[code:invalidClientIdOrSecret message:无效的clientId或者clientSecret requestid:F1F4281A-D682-7C6B-8962-0D6FD44AFD1B]","path":"/api/v1/dingtalk/robots/1/test","method":"POST","ip":"127.0.0.1"}
{"level":"error","timestamp":"2025-11-07 22:20:29.151","caller":"service/dingtalk.go:192","msg":"Failed to get access token from DingTalk","clientID":"","response":{"code":"invalidClientIdOrSecret","message":"无效的clientId或者clientSecret","requestid":"FC0640EB-646D-7DD0-A30A-54F4A2D86C57"},"stacktrace":"tower-go/service.(*DingTalkService).sendStreamMarkdown\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:192\ntower-go/service.(*DingTalkService).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:564\ntower-go/controller.(*DingTalkBotController).TestBot\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/dingtalk_bot.go:237\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.RegisterRoutes.AuthMiddleware.func4\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:44\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ntower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"warn","timestamp":"2025-11-07 22:20:29.159","caller":"utils/response.go:120","msg":"Error Response","code":500,"message":"failed to get access token: failed to get access token: map[code:invalidClientIdOrSecret message:无效的clientId或者clientSecret requestid:FC0640EB-646D-7DD0-A30A-54F4A2D86C57]","path":"/api/v1/dingtalk/robots/1/test","method":"POST","ip":"127.0.0.1"}
{"level":"info","timestamp":"2025-11-08 03:02:53.789","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:02:53.893","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:02:53.893","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:02:53.898","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"dial tcp [::1]:3306: connectex: No connection could be made because the target machine actively refused it.","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:08:34.691","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:08:34.781","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:08:34.782","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:08:34.792","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"Error 1045 (28000): Access denied for user 'root'@'172.17.0.1' (using password: YES)","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:26:01.830","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:26:01.945","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:26:01.945","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:26:01.951","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"dial tcp [::1]:3306: connectex: No connection could be made because the target machine actively refused it.","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:37:49.636","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:37:49.743","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:37:49.743","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:37:49.749","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"dial tcp [::1]:3306: connectex: No connection could be made because the target machine actively refused it.","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:39:21.299","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:39:21.386","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:39:21.386","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:39:21.398","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"Error 1045 (28000): Access denied for user 'root'@'172.17.0.1' (using password: YES)","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:40:03.548","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:40:03.629","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:40:03.629","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:40:03.639","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"Error 1045 (28000): Access denied for user 'root'@'172.17.0.1' (using password: YES)","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:44:34.431","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:44:34.517","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:44:34.517","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-08 03:44:34.527","caller":"bootstrap/database.go:15","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-08 03:44:34.531","caller":"utils/redis.go:32","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"tower-go/utils.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis.go:32\ntower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:12\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-08 03:44:34.531","caller":"bootstrap/redis.go:13","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-08 03:44:51.376","caller":"bootstrap/migrate.go:38","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-08 03:44:51.419","caller":"bootstrap/migrate.go:43","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-08 03:44:52.184","caller":"utils/seed.go:114","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-08 03:44:52.228","caller":"utils/seed.go:266","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-08 03:44:52.230","caller":"utils/seed_dingtalk_menus.go:19","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-08 03:44:52.230","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:44:52.276","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-08 03:44:52.322","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:44:52.323","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-08 03:44:52.323","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":2,"success":1}
{"level":"info","timestamp":"2025-11-08 03:47:27.137","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:47:27.223","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:47:27.223","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-08 03:47:27.231","caller":"bootstrap/database.go:15","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-08 03:47:27.237","caller":"utils/redis.go:38","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-08 03:47:27.237","caller":"bootstrap/redis.go:17","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-08 03:47:44.012","caller":"bootstrap/migrate.go:38","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-08 03:47:44.059","caller":"bootstrap/migrate.go:43","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-08 03:47:44.850","caller":"utils/seed.go:114","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-08 03:47:44.893","caller":"utils/seed.go:266","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-08 03:47:44.895","caller":"utils/seed_dingtalk_menus.go:19","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-08 03:47:44.895","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:47:44.942","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-08 03:47:44.988","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:47:44.989","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-08 03:47:44.989","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":2,"success":1}
{"level":"info","timestamp":"2025-11-08 03:57:06.903","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:57:06.987","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:57:06.987","caller":"bootstrap/config.go:22","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:57:06.994","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"Error 1045 (28000): Access denied for user 'root'@'172.17.0.1' (using password: NO)","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 03:57:55.694","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 03:57:55.779","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 03:57:55.779","caller":"bootstrap/config.go:22","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-08 03:57:55.787","caller":"bootstrap/database.go:13","msg":"数据库连接失败","error":"Error 1045 (28000): Access denied for user 'root'@'172.17.0.1' (using password: NO)","stacktrace":"tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:13\ntower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 04:00:00.962","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-08 04:00:01.050","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-08 04:00:01.050","caller":"bootstrap/config.go:19","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-08 04:00:01.050","caller":"bootstrap/config.go:22","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-08 04:00:01.058","caller":"bootstrap/database.go:15","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-08 04:00:01.064","caller":"utils/redis.go:38","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-08 04:00:01.064","caller":"bootstrap/redis.go:17","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-08 04:00:17.988","caller":"bootstrap/migrate.go:38","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-08 04:00:18.036","caller":"bootstrap/migrate.go:43","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-08 04:00:18.863","caller":"utils/seed.go:114","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-08 04:00:18.911","caller":"utils/seed.go:266","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-08 04:00:18.918","caller":"utils/seed_dingtalk_menus.go:19","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-08 04:00:18.918","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-08 04:00:19.068","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":3,"botName":"全局Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"error","timestamp":"2025-11-08 04:00:19.079","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-08 04:00:19.079","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-08 04:00:19.080","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-08 04:00:19.080","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-08 04:00:19.254","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"DF7F8F22-7A0C-74ED-B14F-3DA9D6DC5522\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:09:15.651","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:09:15.754","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:09:15.754","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:09:15.754","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:09:15.767","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:09:15.772","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:09:15.772","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:09:32.227","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:09:32.277","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:09:33.065","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:09:33.106","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:09:33.108","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:09:33.108","caller":"bootstrap/app.go:30","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:09:33.152","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:09:33.202","caller":"bootstrap/app.go:39","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:39\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:09:33.203","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:09:33.203","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:09:33.203","caller":"bootstrap/app.go:39","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:09:33.360","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"69109328-3CF9-7B85-BC62-6A9AC8E5A319\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:11:06.750","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:11:06.811","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:11:06.811","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:11:06.811","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:11:06.820","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:11:06.825","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:11:06.825","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:11:23.368","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:11:23.413","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:11:24.183","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:11:24.227","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:11:24.230","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:11:24.230","caller":"bootstrap/app.go:30","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:11:24.274","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:11:24.322","caller":"bootstrap/app.go:39","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:39\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:11:24.322","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:11:24.322","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:11:24.322","caller":"bootstrap/app.go:39","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:11:24.475","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"ADBABD2A-FB59-7A43-AAFC-9854F066F055\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:11:59.620","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:11:59.679","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:11:59.679","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:11:59.679","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:11:59.686","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:11:59.692","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:11:59.692","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:12:16.110","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:12:16.154","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:12:16.978","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:12:17.025","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:12:17.032","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:12:17.032","caller":"bootstrap/app.go:30","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:12:17.080","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:12:17.127","caller":"bootstrap/app.go:39","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:39\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:12:17.127","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:12:17.128","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:12:17.128","caller":"bootstrap/app.go:39","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:12:17.261","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"3C0E33C5-A6D9-7289-BA37-967F30F11F15\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:17:47.072","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:17:47.125","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:17:47.125","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:17:47.125","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:17:47.135","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:17:47.144","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:17:47.144","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:18:03.217","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:18:03.260","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:18:04.045","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:18:04.087","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:18:04.089","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:18:04.089","caller":"bootstrap/app.go:30","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:18:04.136","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:18:04.185","caller":"bootstrap/app.go:39","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:39\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:18:04.185","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:18:04.185","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:18:04.185","caller":"bootstrap/app.go:39","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:18:04.353","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"D7B4279B-DF54-799C-8F41-E49AC3D653A6\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:20:09.226","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:20:09.286","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:20:09.286","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:20:09.286","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:20:09.295","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:20:09.301","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:20:09.301","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:20:25.299","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:20:25.341","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:20:26.113","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:20:26.156","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:20:26.157","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:20:26.157","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:20:26.201","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:20:26.245","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:20:26.245","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:20:26.245","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:20:26.245","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:20:26.386","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"1A90A7DD-5FAE-70D1-8A02-56BDF0A0B7F8\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:20:49.961","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:20:50.014","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:20:50.015","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:20:50.015","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:20:50.023","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:20:50.028","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:20:50.028","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:21:06.596","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:21:06.639","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:21:07.448","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:21:07.494","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:21:07.500","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:21:07.500","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:21:07.549","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:21:07.594","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:21:07.594","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:21:07.594","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:21:07.594","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 21:21:07.596","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:23:49.275","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:23:49.332","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:23:49.332","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:23:49.332","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:23:49.341","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:23:49.347","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:23:49.347","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:24:06.133","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:24:06.182","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:24:07.019","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:24:07.064","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:24:07.071","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:24:07.072","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:24:07.123","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:24:07.172","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:24:07.173","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:24:07.173","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:24:07.173","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:24:07.325","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"B6BFB78D-B73E-7CD0-9370-68BFD7FF4632\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:41:59.085","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:41:59.159","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:41:59.159","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:41:59.159","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:41:59.167","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:41:59.174","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:41:59.174","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:42:15.156","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:42:15.201","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:42:15.987","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:42:16.030","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:42:16.035","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:42:16.035","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:42:16.077","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:42:16.121","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:42:16.121","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:42:16.121","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:42:16.121","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 21:42:16.256","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"74FDAF87-4EB3-72FD-A061-D6D742EA42E3\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 21:42:36.162","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:42:36.224","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:42:36.224","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:42:36.224","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:42:36.232","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:42:36.238","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:42:36.238","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:42:52.679","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:42:52.727","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:42:53.543","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:42:53.586","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:42:53.589","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:42:53.589","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:42:53.636","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:42:53.679","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:42:53.679","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:42:53.680","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:42:53.680","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 21:42:53.681","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:43:27.817","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:43:27.878","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:43:27.878","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:43:27.878","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:43:27.886","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:43:27.892","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:43:27.892","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:43:40.700","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:43:40.760","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:43:40.760","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:43:40.760","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:43:40.768","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:43:40.774","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:43:40.774","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:43:57.422","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:43:57.468","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:43:58.312","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:43:58.357","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:43:58.365","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:43:58.365","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:43:58.408","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:43:58.457","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:43:58.458","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:43:58.458","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:43:58.458","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 21:43:58.459","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:49:00.514","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:49:00.579","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:49:00.580","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:49:00.580","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:49:00.588","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:49:00.598","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:49:00.598","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:49:17.312","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:49:17.360","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:49:18.159","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:49:18.204","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:49:18.206","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:49:18.206","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:49:18.248","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:49:18.296","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:49:18.296","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:49:18.297","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:49:18.297","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 21:49:18.299","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:50:07.926","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:50:07.989","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:50:07.989","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:50:07.989","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:50:07.997","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:50:08.004","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:50:08.004","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:50:24.325","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:50:24.369","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:50:25.146","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:50:25.188","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:50:25.189","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:50:25.190","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:50:25.235","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:50:25.276","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:50:25.276","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:50:25.276","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:50:25.276","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 21:50:25.276","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:53:53.462","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 21:53:53.526","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 21:53:53.526","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 21:53:53.526","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 21:53:53.535","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 21:53:53.545","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 21:53:53.545","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 21:54:09.124","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:54:09.174","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 21:54:09.986","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 21:54:10.027","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 21:54:10.030","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 21:54:10.030","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 21:54:10.074","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 21:54:10.121","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 21:54:10.122","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:54:10.122","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 21:54:10.123","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 21:54:10.125","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:07:33.328","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 22:07:33.392","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 22:07:33.392","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 22:07:33.392","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 22:07:33.401","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 22:07:33.408","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 22:07:33.408","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 22:07:50.870","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:07:50.914","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:07:51.757","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 22:07:51.803","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 22:07:51.807","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 22:07:51.807","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 22:07:51.856","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 22:07:51.907","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:07:51.908","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:07:51.908","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:07:51.908","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"fatal","timestamp":"2025-11-09 22:07:51.910","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:09:14.294","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 22:09:14.359","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 22:09:14.359","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 22:09:14.359","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 22:09:14.368","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 22:09:14.375","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 22:09:14.375","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 22:09:31.561","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:09:31.607","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:09:32.433","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 22:09:32.477","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 22:09:32.481","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 22:09:32.481","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 22:09:32.525","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 22:09:32.570","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:09:32.570","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:09:32.571","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:09:32.571","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 22:09:32.724","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"4D27AE09-88DC-7325-8F7B-2724BB27E0DC\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 22:10:35.560","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 22:10:35.624","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 22:10:35.624","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 22:10:35.624","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 22:10:35.633","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 22:10:35.643","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 22:10:35.643","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 22:10:52.210","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:10:52.256","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:10:53.078","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 22:10:53.124","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 22:10:53.126","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 22:10:53.126","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 22:10:53.176","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 22:10:53.218","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:10:53.219","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:10:53.219","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:10:53.219","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 22:10:53.367","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"52AFDE4B-E9F1-7DBA-80EB-10A2D64ABA97\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 22:11:20.977","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 22:11:21.040","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 22:11:21.040","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 22:11:21.040","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 22:11:21.050","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 22:11:21.056","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 22:11:21.056","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 22:11:37.187","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:11:37.233","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:11:38.011","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 22:11:38.052","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 22:11:38.058","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 22:11:38.058","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 22:11:38.106","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 22:11:38.154","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:11:38.154","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:11:38.155","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:11:38.155","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 22:11:38.295","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"401F488C-ED22-759D-ABE1-8D4D4FE561B9\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 22:29:52.865","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 22:29:52.931","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 22:29:52.931","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 22:29:52.931","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 22:29:52.943","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 22:29:52.950","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 22:29:52.950","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 22:30:09.445","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:30:09.492","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:30:10.307","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 22:30:10.353","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 22:30:10.358","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 22:30:10.359","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 22:30:10.409","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-09 22:30:10.457","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:30:10.457","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":2,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:30:10.457","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":3,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:30:10.457","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":3,"success":2}
{"level":"error","timestamp":"2025-11-09 22:30:10.591","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":3,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"6E1EC619-D1D5-7AE9-A8A4-6EA216EA22F8\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-09 22:35:42.497","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-09 22:35:42.562","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-09 22:35:42.562","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-09 22:35:42.562","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-09 22:35:42.572","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-09 22:35:42.579","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-09 22:35:42.579","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-09 22:35:59.538","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:35:59.585","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-09 22:36:00.421","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-09 22:36:00.467","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-09 22:36:00.473","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-09 22:36:00.473","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-09 22:36:00.625","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":4,"botName":"全局Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"error","timestamp":"2025-11-09 22:36:00.631","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-09 22:36:00.632","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":4,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-09 22:36:00.632","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":2,"success":1}
{"level":"error","timestamp":"2025-11-09 22:36:00.799","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":4,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"69842D8E-77DA-7F94-A8FF-7774F4773C2C\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-10 19:44:24.942","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-10 19:44:25.017","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-10 19:44:25.017","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 19:44:25.017","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 19:44:25.045","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 19:44:25.060","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 19:44:25.060","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 19:44:41.910","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:44:41.956","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:44:42.732","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 19:44:42.775","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 19:44:42.778","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 19:44:42.778","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 19:44:42.927","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":5,"botName":"全局Stream机器人(自动创建)","clientID":"05081379-c8ed-4269-9569-f412df4915d6"}
{"level":"error","timestamp":"2025-11-10 19:44:42.937","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 19:44:42.940","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":5,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 19:44:42.941","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":2,"success":1}
{"level":"error","timestamp":"2025-11-10 19:44:43.106","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":5,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"E9867D28-B815-7F89-BFD1-9AA04A501355\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-10 19:48:57.153","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-10 19:48:57.217","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-10 19:48:57.217","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 19:48:57.217","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 19:48:57.228","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 19:48:57.235","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 19:48:57.235","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 19:49:14.145","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:49:14.195","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:49:15.015","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 19:49:15.063","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 19:49:15.069","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 19:49:15.069","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 19:49:15.113","caller":"bootstrap/stream.go:20","msg":"Stream bot already exists","botID":5,"botName":"全局Stream机器人(自动创建)"}
{"level":"error","timestamp":"2025-11-10 19:49:15.162","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 19:49:15.162","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":5,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 19:49:15.162","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":2,"success":1}
{"level":"error","timestamp":"2025-11-10 19:49:15.311","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":5,"botName":"全局Stream机器人(自动创建)","error":"{\"requestid\":\"7EAC6A6E-E2CC-7029-B967-576BC833A651\",\"code\":\"authFailed\",\"message\":\"鉴权失败\"}","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-10 19:52:06.492","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-10 19:52:06.565","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-10 19:52:06.565","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 19:52:06.565","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 19:52:06.577","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 19:52:06.585","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 19:52:06.585","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 19:52:24.503","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:52:24.549","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:52:25.349","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 19:52:25.391","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 19:52:25.392","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 19:52:25.392","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 19:52:25.439","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"error","timestamp":"2025-11-10 19:52:25.493","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 19:52:25.493","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":0}
{"level":"info","timestamp":"2025-11-10 19:52:57.394","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-10 19:52:57.459","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-10 19:52:57.459","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 19:52:57.459","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 19:52:57.470","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 19:52:57.478","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 19:52:57.478","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 19:53:14.215","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:53:14.258","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:53:15.035","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 19:53:15.077","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 19:53:15.078","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 19:53:15.078","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 19:53:15.122","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"error","timestamp":"2025-11-10 19:53:15.166","caller":"bootstrap/app.go:38","msg":"Failed to start stream bot","botID":1,"botName":"全局Stream机器人(自动创建)","error":"clientID or clientSecret is empty","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:38\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 19:53:15.166","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":0}
{"level":"info","timestamp":"2025-11-10 19:55:28.810","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"warn","timestamp":"2025-11-10 19:55:28.877","caller":"bootstrap/swagger.go:30","msg":"自动生成 swagger 失败","error":"exit status 1"}
{"level":"info","timestamp":"2025-11-10 19:55:28.877","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 19:55:28.877","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 19:55:28.887","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 19:55:28.895","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 19:55:28.895","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 19:55:45.577","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:55:45.626","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 19:55:46.464","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 19:55:46.512","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 19:55:46.520","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 19:55:46.520","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 19:55:46.566","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 19:55:46.615","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 19:55:46.615","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 20:10:43.881","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:10:43.971","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 20:10:43.971","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 20:10:43.971","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 20:10:43.980","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 20:10:43.987","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 20:10:43.987","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 20:11:00.163","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:11:00.207","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:11:00.964","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 20:11:01.009","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 20:11:01.013","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 20:11:01.013","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:11:01.058","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 20:11:01.103","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 20:11:01.103","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 20:17:14.204","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:17:14.293","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 20:17:14.293","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 20:17:14.293","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 20:17:14.304","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 20:17:14.311","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 20:17:14.311","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 20:17:30.937","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:17:30.981","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:17:31.788","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 20:17:31.834","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 20:17:31.839","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 20:17:31.839","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:17:31.889","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 20:17:31.936","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 20:17:31.936","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 20:19:44.151","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:19:44.240","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 20:19:44.240","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 20:19:44.240","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 20:19:44.259","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 20:19:44.269","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 20:19:44.269","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 20:20:00.416","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:20:00.461","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:20:01.255","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 20:20:01.298","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 20:20:01.300","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 20:20:01.300","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:20:01.343","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 20:20:01.387","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 20:20:01.387","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"fatal","timestamp":"2025-11-10 20:20:01.388","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:28\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 20:21:41.354","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:21:41.441","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 20:21:41.441","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 20:21:41.441","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 20:21:41.451","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 20:21:41.458","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 20:21:41.458","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 20:21:57.567","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:21:57.609","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:21:58.376","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 20:21:58.420","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 20:21:58.422","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 20:21:58.422","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:21:58.466","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 20:21:58.508","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 20:21:58.509","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 20:22:57.857","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:22:57.946","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 20:22:57.946","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 20:22:57.946","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 20:22:57.955","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 20:22:57.962","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 20:22:57.962","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 20:23:14.855","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:23:14.906","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:23:15.710","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 20:23:15.753","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 20:23:15.757","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 20:23:15.757","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:23:15.801","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 20:23:15.845","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 20:23:15.845","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"fatal","timestamp":"2025-11-10 20:23:15.845","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 20:25:40.308","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:25:40.395","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 20:25:40.395","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 20:25:40.395","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 20:25:40.405","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 20:25:40.411","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 20:25:40.411","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 20:25:57.050","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:25:57.098","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 20:25:57.923","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 20:25:57.967","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 20:25:57.970","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 20:25:57.970","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 20:25:58.019","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 20:25:58.066","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 20:25:58.066","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 21:21:14.436","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 21:21:14.573","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 21:21:14.573","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 21:21:14.573","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 21:21:14.584","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 21:21:14.590","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 21:21:14.590","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 21:21:31.329","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 21:21:31.376","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 21:21:32.227","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 21:21:32.271","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 21:21:32.273","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 21:21:32.273","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 21:21:32.321","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 21:21:32.370","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 21:21:32.371","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 21:26:46.323","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 21:26:46.414","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 21:26:46.414","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 21:26:46.414","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 21:26:46.423","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 21:26:46.430","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 21:26:46.430","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 21:27:03.985","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 21:27:04.026","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 21:27:04.798","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 21:27:04.845","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 21:27:04.850","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 21:27:04.850","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 21:27:04.901","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 21:27:04.953","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 21:27:04.953","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 21:56:10.776","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 21:56:10.911","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 21:56:10.911","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 21:56:10.911","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 21:56:10.923","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 21:56:10.932","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 21:56:10.932","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 21:56:28.214","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 21:56:28.263","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 21:56:29.111","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 21:56:29.154","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 21:56:29.156","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 21:56:29.156","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 21:56:29.204","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 21:56:29.253","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 21:56:29.253","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 22:07:56.292","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:07:56.383","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 22:07:56.383","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 22:07:56.383","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 22:07:56.393","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 22:07:56.400","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 22:07:56.400","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 22:08:14.509","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:08:14.556","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:08:15.391","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 22:08:15.438","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 22:08:15.445","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 22:08:15.445","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:08:15.493","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 22:08:15.540","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 22:08:15.541","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 22:33:41.274","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:33:41.365","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 22:33:41.365","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 22:33:41.365","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 22:33:41.375","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 22:33:41.382","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 22:33:41.382","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 22:33:59.157","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:33:59.205","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:34:00.024","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 22:34:00.071","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 22:34:00.078","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 22:34:00.078","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:34:00.121","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 22:34:00.171","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 22:34:00.172","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 22:34:19.582","caller":"service/dingtalk.go:212","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/oToMessages/batchSend","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"userIds":["010903622624-181076934"],"accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:34:19\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"robotCode\":\"dinglsqvmdgbj5xaidwz\",\"userIds\":[\"010903622624-181076934\"]}"}
{"level":"info","timestamp":"2025-11-10 22:34:19.645","caller":"service/dingtalk.go:212","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"F9A37D6E-3E05-7E57-842D-18A4A52D31E2\",\"code\":\"invalidParameter.robotCode.notExsit\",\"message\":\"错误描述: robot 不存在；解决方案:请确认 robotCode 是否正确；\"}","responseMap":{"code":"invalidParameter.robotCode.notExsit","message":"错误描述: robot 不存在；解决方案:请确认 robotCode 是否正确；","requestid":"F9A37D6E-3E05-7E57-842D-18A4A52D31E2"}}
{"level":"info","timestamp":"2025-11-10 22:43:38.829","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:43:38.921","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 22:43:38.921","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 22:43:38.921","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 22:43:38.931","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 22:43:38.938","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 22:43:38.938","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 22:43:55.684","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:43:55.728","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:43:56.514","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 22:43:56.557","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 22:43:56.557","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 22:43:56.557","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:43:56.601","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 22:43:56.647","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 22:43:56.647","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 22:44:04.899","caller":"service/dingtalk.go:212","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:44:04\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 22:44:04.958","caller":"service/dingtalk.go:212","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"7EB200EF-3A21-7A84-9D88-D8418CAE1E04\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"7EB200EF-3A21-7A84-9D88-D8418CAE1E04"}}
{"level":"info","timestamp":"2025-11-10 22:51:49.508","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:51:49.596","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 22:51:49.596","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 22:51:49.596","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 22:51:49.606","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 22:51:49.613","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 22:51:49.613","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 22:52:05.793","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:52:05.842","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:52:06.692","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 22:52:06.733","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 22:52:06.735","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 22:52:06.735","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:52:06.781","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 22:52:06.826","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 22:52:06.826","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 22:52:10.560","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:52:10\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 22:52:10.622","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"7628BDDF-981F-7EE5-A18F-2760B3996C24\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"7628BDDF-981F-7EE5-A18F-2760B3996C24"}}
{"level":"info","timestamp":"2025-11-10 22:52:37.488","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:52:37.577","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 22:52:37.577","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 22:52:37.577","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 22:52:37.587","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 22:52:37.594","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 22:52:37.594","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 22:52:54.694","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:52:54.740","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 22:52:55.544","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 22:52:55.589","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 22:52:55.593","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 22:52:55.593","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 22:52:55.638","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 22:52:55.686","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 22:52:55.686","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 22:53:03.442","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:53:03\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 22:53:03.496","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"280465B5-C7C8-7F0D-B913-DF854F9B6A5D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"280465B5-C7C8-7F0D-B913-DF854F9B6A5D"}}
{"level":"info","timestamp":"2025-11-10 22:56:41.503","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:56:41\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 22:56:41.556","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"D8758395-1017-7844-9266-0CC4B4607A77\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"D8758395-1017-7844-9266-0CC4B4607A77"}}
{"level":"info","timestamp":"2025-11-10 22:57:32.237","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:57:32\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 22:57:32.288","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"3C722B86-FD79-708E-8BEE-DAA080F7B119\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"3C722B86-FD79-708E-8BEE-DAA080F7B119"}}
{"level":"info","timestamp":"2025-11-10 22:57:38.183","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 22:57:38\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 22:57:38.235","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"BF5EC148-CDA9-7CBB-8420-B5E34E8B4A94\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"BF5EC148-CDA9-7CBB-8420-B5E34E8B4A94"}}
{"level":"info","timestamp":"2025-11-10 23:04:55.974","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 23:04:56.066","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 23:04:56.066","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 23:04:56.066","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 23:04:56.076","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 23:04:56.083","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 23:04:56.083","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 23:05:11.948","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 23:05:11.991","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 23:05:12.786","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 23:05:12.830","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 23:05:12.832","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 23:05:12.832","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 23:05:12.879","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 23:05:12.924","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 23:05:12.924","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 23:10:02.837","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 23:10:02.927","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 23:10:02.927","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 23:10:02.927","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 23:10:02.937","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 23:10:02.943","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 23:10:02.943","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 23:10:19.403","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 23:10:19.447","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 23:10:20.233","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 23:10:20.276","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 23:10:20.283","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 23:10:20.284","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 23:10:20.330","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 23:10:20.375","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 23:10:20.375","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-10 23:13:39.666","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-10 23:13:39.761","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-10 23:13:39.761","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-10 23:13:39.761","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-10 23:13:39.773","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-10 23:13:39.781","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-10 23:13:39.781","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-10 23:13:55.643","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-10 23:13:55.687","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-10 23:13:56.467","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-10 23:13:56.514","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-10 23:13:56.516","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-10 23:13:56.516","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-10 23:13:56.558","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-10 23:13:56.601","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-10 23:13:56.602","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"fatal","timestamp":"2025-11-10 23:13:56.602","caller":"bootstrap/app.go:43","msg":"服务启动失败","error":"listen tcp :10024: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:43\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-10 23:14:01.180","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 23:14:01\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 23:14:01.232","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"6090A2FE-4DC5-71BA-A0F9-FE32C61D3E2C\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"6090A2FE-4DC5-71BA-A0F9-FE32C61D3E2C"}}
{"level":"info","timestamp":"2025-11-10 23:16:16.714","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 23:16:14\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 23:16:16.772","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"2B218F97-41AE-7D10-B1E2-701D98DDD4D3\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"2B218F97-41AE-7D10-B1E2-701D98DDD4D3"}}
{"level":"info","timestamp":"2025-11-10 23:20:54.664","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 23:20:54\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 23:20:54.723","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"49A6E97C-CA82-70F1-B7F4-A1D4FB93B636\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"49A6E97C-CA82-70F1-B7F4-A1D4FB93B636"}}
{"level":"info","timestamp":"2025-11-10 23:23:10.903","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:23:23.249","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:23:52.658","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:24:33.401","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:24:37.440","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:25:53.814","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:25:55.053","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:25:56.220","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:26:00.432","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:37:01.285","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"eafd4e9a6e...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-10 23:37:01\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-10 23:37:01.341","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"5CE185DD-0517-7AD3-843A-ADF3BB7170A3\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"5CE185DD-0517-7AD3-843A-ADF3BB7170A3"}}
{"level":"info","timestamp":"2025-11-10 23:37:03.339","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:37:04.241","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:37:12.977","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-10 23:53:32.686","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 00:06:25.248","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 00:06:47.121","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 00:07:09.771","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 00:30:34.743","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 00:30:34.837","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 00:30:34.837","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 00:30:34.837","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-11 00:30:34.842","caller":"bootstrap/database.go:14","msg":"数据库连接失败","error":"dial tcp [::1]:3306: connectex: No connection could be made because the target machine actively refused it.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:14\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-11 00:30:45.279","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 00:30:45.368","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 00:30:45.368","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 00:30:45.368","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-11 00:30:45.374","caller":"bootstrap/database.go:14","msg":"数据库连接失败","error":"dial tcp [::1]:3306: connectex: No connection could be made because the target machine actively refused it.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:14\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-11 00:31:07.181","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 00:31:07.274","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 00:31:07.274","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 00:31:07.274","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 00:31:07.286","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 00:31:07.292","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 00:31:07.292","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 00:31:23.566","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 00:31:23.610","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 00:31:24.406","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 00:31:24.452","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 00:31:24.461","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 00:31:24.461","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 00:31:24.506","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 00:31:24.550","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 00:31:24.550","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 01:49:54.479","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:49:54.569","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 01:49:54.570","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 01:49:54.570","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 01:49:54.592","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 01:49:54.604","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 01:49:54.604","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 01:50:12.103","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:50:12.145","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:50:12.979","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 01:50:13.024","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 01:50:13.030","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 01:50:13.031","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:50:13.078","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 01:50:13.127","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 01:50:13.127","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 01:51:49.423","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:51:49.514","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 01:51:49.515","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 01:51:49.515","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 01:51:49.523","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 01:51:49.529","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 01:51:49.529","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 01:52:06.161","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:52:06.205","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:52:06.988","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 01:52:07.032","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 01:52:07.039","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 01:52:07.039","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:52:07.088","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 01:52:07.136","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 01:52:07.137","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 01:52:10.763","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:52:10.853","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 01:52:10.853","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 01:52:10.853","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 01:52:10.862","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 01:52:10.868","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 01:52:10.868","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 01:52:28.180","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:52:28.229","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:52:29.068","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 01:52:29.111","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 01:52:29.113","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 01:52:29.113","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:52:29.157","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 01:52:29.206","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 01:52:29.206","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 01:56:57.503","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:56:57.599","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 01:56:57.599","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 01:56:57.599","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 01:56:57.607","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 01:56:57.613","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 01:56:57.613","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 01:57:14.252","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:57:14.301","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 01:57:15.085","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 01:57:15.129","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 01:57:15.134","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 01:57:15.134","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 01:57:15.178","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 01:57:15.223","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 01:57:15.223","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 02:03:09.060","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 02:03:09.149","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 02:03:09.149","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 02:03:09.149","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 02:03:09.158","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 02:03:09.164","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 02:03:09.164","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 02:03:25.566","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 02:03:25.614","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 02:03:26.407","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 02:03:26.454","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 02:03:26.457","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 02:03:26.457","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 02:03:26.505","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 02:03:26.549","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 02:03:26.549","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 02:29:57.115","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 02:29:57.209","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 02:29:57.210","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 02:29:57.210","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 02:29:57.220","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 02:29:57.226","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 02:29:57.226","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 02:30:12.948","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 02:30:12.995","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 02:30:13.772","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 02:30:13.815","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 02:30:13.817","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 02:30:13.817","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 02:30:13.859","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 02:30:13.903","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 02:30:13.904","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-11 03:56:43.891","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 03:56:46.507","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"96a1cdd6ac...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-11 03:56:46\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-11 03:56:46.565","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"32A310EB-EB67-7CF7-9ED6-20937CF04ACE\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"32A310EB-EB67-7CF7-9ED6-20937CF04ACE"}}
{"level":"info","timestamp":"2025-11-11 04:22:29.252","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 04:22:30.279","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 04:22:32.218","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 04:22:33.280","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 04:22:34.284","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-11 21:59:35.766","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-11 21:59:35.923","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-11 21:59:35.923","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-11 21:59:35.923","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-11 21:59:36.021","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-11 21:59:36.039","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-11 21:59:36.039","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-11 21:59:52.160","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-11 21:59:52.203","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-11 21:59:52.964","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-11 21:59:53.016","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-11 21:59:53.022","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-11 21:59:53.022","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-11 21:59:53.069","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-11 21:59:53.112","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-11 21:59:53.112","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 15:04:04.247","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 15:04:04.399","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 15:04:04.399","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 15:04:04.399","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 15:04:04.411","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 15:04:04.418","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 15:04:04.418","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 15:04:20.727","caller":"bootstrap/migrate.go:40","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 15:04:20.778","caller":"bootstrap/migrate.go:45","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 15:04:21.580","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 15:04:21.625","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 15:04:21.631","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 15:04:21.632","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 15:04:21.677","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 15:04:21.727","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 15:04:21.728","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 15:04:48.798","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 15:05:04.731","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 16:26:00.357","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 16:36:12.784","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 百威  \\\\n**报菜数量:** 1  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:36:12  \\\\n**备注:** 22  \\\\n\\\\n---\\\\n*报菜记录ID: 1*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:36:12.843","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"EFF5B0FE-B2C1-7B22-9A44-29358AC0ADDC\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"EFF5B0FE-B2C1-7B22-9A44-29358AC0ADDC"}}
{"level":"error","timestamp":"2025-11-12 16:36:12.843","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:36:12.844","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":1,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:36:43.627","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 小青菜3  \\\\n**报菜数量:** 15  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:36:43  \\\\n\\\\n---\\\\n*报菜记录ID: 2*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:36:43.681","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"DC8B3ED2-9AEE-7F62-8251-3B68EDD7D336\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"DC8B3ED2-9AEE-7F62-8251-3B68EDD7D336"}}
{"level":"error","timestamp":"2025-11-12 16:36:43.681","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:36:43.681","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":2,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.001","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 小青菜3  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:32  \\\\n**备注:** 21434343  \\\\n\\\\n---\\\\n*报菜记录ID: 3*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.054","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"7FB23DE7-7167-7320-9924-2EECB52CE27D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"7FB23DE7-7167-7320-9924-2EECB52CE27D"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.054","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.054","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":3,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.078","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 32  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:32  \\\\n**备注:** 43443  \\\\n\\\\n---\\\\n*报菜记录ID: 4*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.130","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"6DFAFDFA-9065-7A3F-8427-42ACC9A8706A\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"6DFAFDFA-9065-7A3F-8427-42ACC9A8706A"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.131","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.131","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":4,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.241","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 5435345  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n**备注:** 3243  \\\\n\\\\n---\\\\n*报菜记录ID: 5*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.295","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"66021D80-7F4D-7AD2-9982-1CCF0F8FB729\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"66021D80-7F4D-7AD2-9982-1CCF0F8FB729"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.295","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.295","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":5,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.388","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 白打  \\\\n**报菜数量:** 1  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n**备注:** 43  \\\\n\\\\n---\\\\n*报菜记录ID: 6*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.443","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"EA6559E3-6C40-716D-A086-750B478B67B1\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"EA6559E3-6C40-716D-A086-750B478B67B1"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.443","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.443","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":6,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.534","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 和爱  \\\\n**报菜数量:** 1  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n\\\\n---\\\\n*报菜记录ID: 7*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.586","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"7A1CCC94-A76C-7604-B512-A63C1C838DBE\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"7A1CCC94-A76C-7604-B512-A63C1C838DBE"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.586","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.586","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":7,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.702","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 搭撒大师  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n\\\\n---\\\\n*报菜记录ID: 8*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.761","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"C698AA1E-54EB-7633-A808-D2AA8A8143CA\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"C698AA1E-54EB-7633-A808-D2AA8A8143CA"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.762","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.763","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":8,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:33.850","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 32法师道昉44  \\\\n**报菜数量:** 1  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n\\\\n---\\\\n*报菜记录ID: 9*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:33.905","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"22B2E47E-BE77-7E66-B4F4-0B86262E003D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"22B2E47E-BE77-7E66-B4F4-0B86262E003D"}}
{"level":"error","timestamp":"2025-11-12 16:57:33.905","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:33.905","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":9,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:34.010","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 道昉的  \\\\n**报菜数量:** 5  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n\\\\n---\\\\n*报菜记录ID: 10*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:34.070","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"FE473CBF-24BB-7951-8FE3-85AF761C72FB\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"FE473CBF-24BB-7951-8FE3-85AF761C72FB"}}
{"level":"error","timestamp":"2025-11-12 16:57:34.070","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:34.070","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":10,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:34.163","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** postman  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:33  \\\\n\\\\n---\\\\n*报菜记录ID: 11*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:34.219","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"C8B9917A-1FC3-7F29-B39F-F52528F8D2A2\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"C8B9917A-1FC3-7F29-B39F-F52528F8D2A2"}}
{"level":"error","timestamp":"2025-11-12 16:57:34.220","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:34.220","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":11,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:57:34.342","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 寡凫单鹄  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:57:34  \\\\n\\\\n---\\\\n*报菜记录ID: 12*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:57:34.394","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"2E72DA28-762E-7F34-A458-CA18C1CD6F14\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"2E72DA28-762E-7F34-A458-CA18C1CD6F14"}}
{"level":"error","timestamp":"2025-11-12 16:57:34.394","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:57:34.394","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":12,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:18.654","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 小青菜3  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:18  \\\\n**备注:** 534  \\\\n\\\\n---\\\\n*报菜记录ID: 13*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:18.704","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"5187000E-AFED-720A-829A-2CEA4A75AD6B\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"5187000E-AFED-720A-829A-2CEA4A75AD6B"}}
{"level":"error","timestamp":"2025-11-12 16:59:18.705","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:18.706","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":13,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:18.750","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 32  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:18  \\\\n**备注:** 543  \\\\n\\\\n---\\\\n*报菜记录ID: 14*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:18.802","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"160185E1-B6DF-7413-A577-99BDC5B43A24\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"160185E1-B6DF-7413-A577-99BDC5B43A24"}}
{"level":"error","timestamp":"2025-11-12 16:59:18.802","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:18.802","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":14,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:18.910","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 5435345  \\\\n**报菜数量:** 4  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:18  \\\\n\\\\n---\\\\n*报菜记录ID: 15*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:18.969","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"600873E4-C0D1-798E-A94A-5220EBBCDC44\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"600873E4-C0D1-798E-A94A-5220EBBCDC44"}}
{"level":"error","timestamp":"2025-11-12 16:59:18.969","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:18.969","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":15,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:19.058","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 寡凫单鹄  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:18  \\\\n**备注:** 543  \\\\n\\\\n---\\\\n*报菜记录ID: 16*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:19.108","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"8E8FF84A-356E-7031-BDD8-F41C2B830A3A\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"8E8FF84A-356E-7031-BDD8-F41C2B830A3A"}}
{"level":"error","timestamp":"2025-11-12 16:59:19.109","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:19.109","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":16,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:19.204","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 和爱  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:19  \\\\n**备注:** 434  \\\\n\\\\n---\\\\n*报菜记录ID: 17*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:19.250","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"8D4346BB-92D0-760A-AB21-BA47E425E7AC\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"8D4346BB-92D0-760A-AB21-BA47E425E7AC"}}
{"level":"error","timestamp":"2025-11-12 16:59:19.250","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:19.250","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":17,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:19.343","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 白打  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:19  \\\\n**备注:** 5435665  \\\\n\\\\n---\\\\n*报菜记录ID: 18*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:19.391","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"DA18EF1F-7966-7AAA-9094-5B7E4294BF7C\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"DA18EF1F-7966-7AAA-9094-5B7E4294BF7C"}}
{"level":"error","timestamp":"2025-11-12 16:59:19.391","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:19.391","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":18,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:19.494","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** 32法师道昉44  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:19  \\\\n**备注:** 5435  \\\\n\\\\n---\\\\n*报菜记录ID: 19*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:19.540","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"8536097E-8BF7-709B-913D-C66C72B3F98D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"8536097E-8BF7-709B-913D-C66C72B3F98D"}}
{"level":"error","timestamp":"2025-11-12 16:59:19.540","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:19.540","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":19,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:19.630","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"49d15833d2...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**菜品名称:** postman  \\\\n**报菜数量:** 3  \\\\n**门店名称:** 总部  \\\\n**操作人员:** admin  \\\\n**报菜时间:** 2025-11-12 16:59:19  \\\\n**备注:** 5435  \\\\n\\\\n---\\\\n*报菜记录ID: 20*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 16:59:19.676","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"0364DE3A-78BF-75C6-8E0E-D8A605D18A2E\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"0364DE3A-78BF-75C6-8E0E-D8A605D18A2E"}}
{"level":"error","timestamp":"2025-11-12 16:59:19.676","caller":"service/menu_report_listener.go:46","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:46\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 16:59:19.676","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report","reportID":20,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 16:59:51.118","caller":"service/menu_report_listener.go:46","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 17:42:09.319","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 17:42:09.410","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 17:42:09.410","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 17:42:09.410","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 17:42:09.437","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 17:42:09.450","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 17:42:09.450","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 17:42:28.165","caller":"bootstrap/migrate.go:41","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 17:42:28.209","caller":"bootstrap/migrate.go:46","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 17:42:29.134","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 17:42:29.176","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 17:42:29.176","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 17:42:29.176","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 17:42:29.278","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 17:42:29.320","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 17:42:29.320","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 17:53:12.879","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 17:53:12.999","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 17:53:12.999","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 17:53:12.999","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 17:53:13.013","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 17:53:13.022","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 17:53:13.022","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 17:53:32.686","caller":"bootstrap/migrate.go:41","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 17:53:32.730","caller":"bootstrap/migrate.go:46","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 17:53:33.585","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 17:53:33.631","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 17:53:33.634","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 17:53:33.634","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 17:53:33.680","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 17:53:33.728","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 17:53:33.729","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 18:19:50.015","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 18:19:50.157","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 18:19:50.157","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 18:19:50.157","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 18:19:50.166","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 18:19:50.175","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 18:19:50.175","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 18:20:11.084","caller":"bootstrap/migrate.go:42","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 18:20:11.131","caller":"bootstrap/migrate.go:47","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 18:20:12.058","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 18:20:12.105","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 18:20:12.111","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 18:20:12.111","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 18:20:12.160","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 18:20:12.209","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 18:20:12.209","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 18:25:20.289","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 18:25:20.385","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 18:25:20.385","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 18:25:20.385","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 18:25:20.397","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 18:25:20.403","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 18:25:20.403","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 18:25:41.914","caller":"bootstrap/migrate.go:42","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 18:25:41.959","caller":"bootstrap/migrate.go:47","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 18:25:42.876","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 18:25:42.921","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 18:25:42.925","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 18:25:42.925","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 18:25:42.973","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 18:25:43.021","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 18:25:43.022","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 18:26:08.405","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 18:26:08.496","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 18:26:08.496","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 18:26:08.496","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 18:26:08.505","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 18:26:08.512","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 18:26:08.512","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 18:26:30.269","caller":"bootstrap/migrate.go:42","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 18:26:30.319","caller":"bootstrap/migrate.go:47","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 18:26:31.254","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 18:26:31.298","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 18:26:31.299","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 18:26:31.299","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 18:26:31.344","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 18:26:31.394","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 18:26:31.394","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 21:38:25.276","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 21:38:25.376","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 21:38:25.376","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 21:38:25.376","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 21:38:25.388","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 21:38:25.394","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 21:38:25.394","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 21:38:45.406","caller":"bootstrap/migrate.go:42","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 21:38:45.458","caller":"bootstrap/migrate.go:47","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 21:38:46.331","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 21:38:46.375","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 21:38:46.379","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 21:38:46.379","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 21:38:46.427","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 21:38:46.476","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 21:38:46.477","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 21:39:00.998","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"7100462abd...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 总部\\\\n**操作人员:** admin\\\\n**报菜时间:** 2025-11-12 21:39:00\\\\n\\\\n**报菜明细:**\\\\n\\\\n---\\\\n*报菜记录单ID: 7*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 21:39:01.054","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"F1C6C594-7948-74EC-9BB9-5E8943EEA615\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"F1C6C594-7948-74EC-9BB9-5E8943EEA615"}}
{"level":"error","timestamp":"2025-11-12 21:39:01.054","caller":"service/menu_report_listener.go:45","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:45\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 21:39:01.054","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":7,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 21:39:40.284","caller":"service/menu_report_listener.go:45","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 21:43:45.041","caller":"service/menu_report_listener.go:45","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 21:44:10.611","caller":"service/menu_report_listener.go:45","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 21:49:25.291","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 21:49:28.514","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"7100462abd...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-12 21:49:28\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 21:49:28.573","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"E976A7FB-0784-73C2-B676-A446B910D8F6\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"E976A7FB-0784-73C2-B676-A446B910D8F6"}}
{"level":"info","timestamp":"2025-11-12 21:49:29.804","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 21:49:33.165","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 21:49:34.220","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 21:49:34.624","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 21:49:35.512","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 21:49:37.595","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:00:23.303","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 22:00:23.397","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 22:00:23.397","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 22:00:23.397","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 22:00:23.408","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 22:00:23.415","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 22:00:23.415","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 22:00:43.437","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 22:00:43.484","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 22:00:44.351","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 22:00:44.393","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 22:00:44.393","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 22:00:44.395","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 22:00:44.438","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 22:00:44.483","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 22:00:44.484","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 22:01:41.532","caller":"service/dingtalk_notifier.go:39","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 22:01:41.606","caller":"service/menu_report_listener.go:45","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 22:02:05.606","caller":"service/dingtalk_notifier.go:39","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 22:02:05.698","caller":"service/menu_report_listener.go:45","msg":"No enabled bots for store","storeID":1000}
{"level":"info","timestamp":"2025-11-12 22:04:05.428","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-12 22:04:05.523","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-12 22:04:05.523","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-12 22:04:05.523","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-12 22:04:05.531","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-12 22:04:05.539","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-12 22:04:05.539","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-12 22:04:25.498","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-12 22:04:25.541","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-12 22:04:26.432","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-12 22:04:26.475","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-12 22:04:26.480","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-12 22:04:26.480","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-12 22:04:26.526","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-12 22:04:26.574","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-12 22:04:26.575","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-12 22:04:30.398","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"7100462abd...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-12 22:04:30\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 22:04:30.457","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"073FF3FB-577C-7DEF-A579-B1B2407E5B92\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"073FF3FB-577C-7DEF-A579-B1B2407E5B92"}}
{"level":"info","timestamp":"2025-11-12 22:04:31.968","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"7100462abd...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-12 22:04:31\\\",\\\"title\\\":\\\"机器人测试\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 22:04:32.023","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"4750B1F1-2B81-727B-88B5-FC65DCB1B871\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"4750B1F1-2B81-727B-88B5-FC65DCB1B871"}}
{"level":"info","timestamp":"2025-11-12 22:04:34.081","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:05:00.330","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"7100462abd...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"### 📋 新报菜通知\\\\n\\\\n**门店**: 总部\\\\n\\\\n**操作员**: %!s(MISSING)\\\\n\\\\n**报菜品项**:\\\\n- **小青菜3**: 3 份\\\\n- **32**: 3 份\\\\n- **5435345**: 2 份\\\\n- **白打**: 3 份\\\\n- **和爱**: 2 份\\\\n- **32法师道昉44**: 3 份\\\\n- **postman**: 2 份\\\\n- **寡凫单鹄**: 2 份\\\\n- **小青菜3**: 3 份\\\\n- **32**: 3 份\\\\n- **5435345**: 2 份\\\\n- **白打**: 3 份\\\\n- **和爱**: 2 份\\\\n- **32法师道昉44**: 3 份\\\\n- **postman**: 2 份\\\\n- **寡凫单鹄**: 2 份\\\\n\\\\n**时间**: 2025-11-12 22:04:59\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 22:05:00.384","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"7440BF1E-E3B5-7FB0-8F5F-0D694CB0989A\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"7440BF1E-E3B5-7FB0-8F5F-0D694CB0989A"}}
{"level":"error","timestamp":"2025-11-12 22:05:00.384","caller":"service/dingtalk_notifier.go:39","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportNotifier).sendMenuReportNotification.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk_notifier.go:39"}
{"level":"info","timestamp":"2025-11-12 22:05:00.403","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"7100462abd...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 总部\\\\n**操作人员:** admin\\\\n**报菜时间:** 2025-11-12 22:04:59\\\\n\\\\n**报菜明细:**\\\\n- **小青菜3**: 数量 3\\\\n- **32**: 数量 3\\\\n- **5435345**: 数量 2\\\\n- **白打**: 数量 3\\\\n- **和爱**: 数量 2\\\\n- **32法师道昉44**: 数量 3\\\\n- **postman**: 数量 2\\\\n- **寡凫单鹄**: 数量 2\\\\n- **小青菜3**: 数量 3\\\\n- **32**: 数量 3\\\\n- **5435345**: 数量 2\\\\n- **白打**: 数量 3\\\\n- **和爱**: 数量 2\\\\n- **32法师道昉44**: 数量 3\\\\n- **postman**: 数量 2\\\\n- **寡凫单鹄**: 数量 2\\\\n\\\\n---\\\\n*报菜记录单ID: 13*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-12 22:05:00.456","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"21066B6D-08BE-7DD4-B134-6572836FB121\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"21066B6D-08BE-7DD4-B134-6572836FB121"}}
{"level":"error","timestamp":"2025-11-12 22:05:00.456","caller":"service/menu_report_listener.go:45","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:45\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-12 22:05:00.456","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":13,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-12 22:06:00.064","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:00.162","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:20.955","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:21.042","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:32.153","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:32.246","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:44.088","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-12 22:06:44.175","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 19:48:58.056","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-13 19:48:58.161","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-13 19:48:58.161","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-13 19:48:58.161","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-13 19:48:58.202","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-13 19:48:58.213","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-13 19:48:58.213","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-13 19:49:18.345","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-13 19:49:18.389","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-13 19:49:19.238","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-13 19:49:19.282","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-13 19:49:19.286","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-13 19:49:19.286","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-13 19:49:19.329","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-13 19:49:19.378","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-13 19:49:19.378","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-13 20:02:23.459","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 20:02:23.462","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 20:12:28.862","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 20:12:28.868","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 23:15:59.777","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 23:16:13.923","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"08e862fa4f...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"### 📋 新报菜通知\\\\n\\\\n**门店**: 总部\\\\n\\\\n**操作员**: %!s(MISSING)\\\\n\\\\n**报菜品项**:\\\\n- **和爱**: 3 份\\\\n- **白打**: 2 份\\\\n- **小青菜3**: 2 份\\\\n- **32**: 2 份\\\\n- **和爱**: 3 份\\\\n- **白打**: 2 份\\\\n- **小青菜3**: 2 份\\\\n- **32**: 2 份\\\\n\\\\n**时间**: 2025-11-13 23:16:13\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-13 23:16:13.924","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"20112f8a9b...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 总部\\\\n**操作人员:** admin\\\\n**报菜时间:** 2025-11-13 23:16:13\\\\n\\\\n**报菜明细:**\\\\n- **和爱**: 数量 3\\\\n- **白打**: 数量 2\\\\n- **小青菜3**: 数量 2\\\\n- **32**: 数量 2\\\\n- **和爱**: 数量 3\\\\n- **白打**: 数量 2\\\\n- **小青菜3**: 数量 2\\\\n- **32**: 数量 2\\\\n\\\\n---\\\\n*报菜记录单ID: 20*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-13 23:16:13.982","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"B0B341AF-3B63-702A-AF51-6424BE110D04\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"B0B341AF-3B63-702A-AF51-6424BE110D04"}}
{"level":"info","timestamp":"2025-11-13 23:16:13.983","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"422D51AC-206C-767A-8D7C-BBBE86A565CF\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"422D51AC-206C-767A-8D7C-BBBE86A565CF"}}
{"level":"error","timestamp":"2025-11-13 23:16:13.983","caller":"service/dingtalk_notifier.go:39","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportNotifier).sendMenuReportNotification.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk_notifier.go:39"}
{"level":"error","timestamp":"2025-11-13 23:16:13.982","caller":"service/menu_report_listener.go:45","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:45\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-13 23:16:13.983","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":20,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-13 23:16:55.536","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-13 23:16:55.621","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-14 19:32:01.179","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-14 19:32:01.324","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-14 19:32:01.324","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-14 19:32:01.324","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-14 19:32:01.338","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-14 19:32:01.348","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-14 19:32:01.348","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-14 19:32:20.789","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-14 19:32:20.833","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-14 19:32:21.678","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-14 19:32:21.720","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-14 19:32:21.720","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-14 19:32:21.720","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-14 19:32:21.763","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-14 19:32:21.807","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-14 19:32:21.808","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 18:40:31.469","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"fc1a62bbee...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 总部\\\\n**操作人员:** admin\\\\n**报菜时间:** 2025-11-16 18:40:30\\\\n\\\\n**报菜明细:**\\\\n- **白打**: 数量 2\\\\n- **和爱**: 数量 3\\\\n- **postman**: 数量 2\\\\n- **白打**: 数量 2\\\\n- **和爱**: 数量 3\\\\n- **postman**: 数量 2\\\\n\\\\n---\\\\n*报菜记录单ID: 22*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 18:40:31.470","caller":"service/dingtalk.go:213","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"c88a9c49d8...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"### 📋 新报菜通知\\\\n\\\\n**门店**: 总部\\\\n\\\\n**操作员**: %!s(MISSING)\\\\n\\\\n**报菜品项**:\\\\n- **白打**: 2 份\\\\n- **和爱**: 3 份\\\\n- **postman**: 2 份\\\\n- **白打**: 2 份\\\\n- **和爱**: 3 份\\\\n- **postman**: 2 份\\\\n\\\\n**时间**: 2025-11-16 18:40:30\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 18:40:31.523","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"D4A1D597-CFD5-7730-86E3-D5ABD5EAB65F\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"D4A1D597-CFD5-7730-86E3-D5ABD5EAB65F"}}
{"level":"info","timestamp":"2025-11-16 18:40:31.523","caller":"service/dingtalk.go:213","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"E9220B5C-B26D-75C7-BE8C-64C001A5CFC3\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"E9220B5C-B26D-75C7-BE8C-64C001A5CFC3"}}
{"level":"error","timestamp":"2025-11-16 18:40:31.523","caller":"service/dingtalk_notifier.go:39","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportNotifier).sendMenuReportNotification.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk_notifier.go:39"}
{"level":"error","timestamp":"2025-11-16 18:40:31.523","caller":"service/menu_report_listener.go:45","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:45\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-16 18:40:31.523","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":22,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 18:44:35.137","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 18:44:35.277","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 18:44:35.278","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 18:44:35.278","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 18:44:35.292","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 18:44:35.300","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 18:44:35.300","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 18:44:54.681","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 18:44:54.726","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 18:44:55.569","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 18:44:55.613","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 18:44:55.613","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 18:44:55.613","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 18:44:55.656","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 18:44:55.702","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 18:44:55.702","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 18:45:33.418","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 18:45:59.682","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 18:46:19.402","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 18:47:00.189","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 18:52:15.496","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 18:52:15.602","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 18:52:15.603","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 18:52:15.603","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 18:52:15.615","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 18:52:15.624","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 18:52:15.624","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 18:52:35.044","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 18:52:35.086","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 18:52:35.950","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 18:52:35.993","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 18:52:35.997","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 18:52:35.997","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 18:52:36.042","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 18:52:36.086","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 18:52:36.086","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 18:54:16.200","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 18:56:17.311","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 18:58:18.703","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 18:58:18.798","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 18:58:18.798","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 18:58:18.798","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 18:58:18.810","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 18:58:18.818","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 18:58:18.818","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 18:58:38.684","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 18:58:38.729","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 18:58:39.578","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 18:58:39.621","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 18:58:39.622","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 18:58:39.622","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 18:58:39.665","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 18:58:39.709","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 18:58:39.709","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:00:21.291","caller":"service/dingtalk.go:166","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 19:29:11.667","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:29:11.770","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 19:29:11.771","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 19:29:11.771","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 19:29:11.787","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 19:29:11.799","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 19:29:11.799","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 19:29:31.150","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:29:31.194","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:29:32.031","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 19:29:32.073","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 19:29:32.074","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 19:29:32.074","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:29:32.117","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 19:29:32.162","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 19:29:32.162","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:29:39.495","caller":"service/dingtalk.go:174","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 19:36:14.839","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:36:14.946","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 19:36:14.946","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 19:36:14.946","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 19:36:14.958","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 19:36:14.966","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 19:36:14.966","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 19:36:34.546","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:36:34.592","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:36:35.444","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 19:36:35.488","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 19:36:35.490","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 19:36:35.490","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:36:35.532","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 19:36:35.576","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 19:36:35.576","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:36:54.037","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":31,"imageSize":3755}
{"level":"info","timestamp":"2025-11-16 19:36:54.197","caller":"service/dingtalk.go:174","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 19:37:26.039","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:37:26.139","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 19:37:26.139","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 19:37:26.139","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 19:37:26.150","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 19:37:26.156","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 19:37:26.156","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 19:37:45.807","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:37:45.851","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:37:46.701","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 19:37:46.744","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 19:37:46.753","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 19:37:46.753","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:37:46.799","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 19:37:46.843","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 19:37:46.843","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:38:19.805","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":32,"imageSize":3350}
{"level":"info","timestamp":"2025-11-16 19:38:19.959","caller":"service/dingtalk.go:174","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 19:38:49.478","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":33,"imageSize":2963}
{"level":"info","timestamp":"2025-11-16 19:38:49.554","caller":"service/dingtalk.go:174","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-16 19:43:32.861","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":34,"imageSize":3428}
{"level":"info","timestamp":"2025-11-16 19:43:32.862","caller":"service/menu_report_listener.go:64","msg":"No enabled bots for store","storeID":999}
{"level":"info","timestamp":"2025-11-16 19:45:03.151","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":35,"imageSize":3363}
{"level":"info","timestamp":"2025-11-16 19:45:03.292","caller":"service/dingtalk.go:128","msg":"Uploading image to DingTalk","imageSize":3363}
{"level":"error","timestamp":"2025-11-16 19:45:03.455","caller":"service/dingtalk.go:128","msg":"Failed to upload image to DingTalk","error":"dingtalk upload error: code=43008, msg=参数需要multipart类型","imageSize":3363,"stacktrace":"github.com/Kevin-Jii/tower-go/service.(*DingTalkService).BroadcastToStoreWithImage\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/dingtalk.go:128\ngithub.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-16 19:45:03.455","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"failed to upload image: dingtalk upload error: code=43008, msg=参数需要multipart类型","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 19:45:03.520","caller":"service/dingtalk.go:174","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 19:45:03.520","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":35,"storeID":1000,"error":"failed to upload image: dingtalk upload error: code=43008, msg=参数需要multipart类型","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 19:50:16.160","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:50:16.282","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 19:50:16.282","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 19:50:16.282","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 19:50:16.292","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 19:50:16.299","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 19:50:16.299","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 19:50:35.785","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:50:35.829","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:50:36.673","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 19:50:36.716","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 19:50:36.717","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 19:50:36.717","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:50:36.760","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 19:50:36.804","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 19:50:36.804","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:50:52.223","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":36,"imageSize":3744}
{"level":"info","timestamp":"2025-11-16 19:50:52.291","caller":"service/dingtalk.go:129","msg":"Uploading image to DingTalk","imageSize":3744}
{"level":"info","timestamp":"2025-11-16 19:50:52.800","caller":"service/dingtalk.go:129","msg":"Image uploaded successfully","mediaID":"@lALPD2CVmsLF4S_NAczNAyA"}
{"level":"info","timestamp":"2025-11-16 19:50:52.800","caller":"service/dingtalk.go:271","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"c88a9c49d8...","requestBody":"{\"msgKey\":\"sampleImageMsg\",\"msgParam\":\"{\\\"image\\\":{\\\"mediaId\\\":\\\"@lALPD2CVmsLF4S_NAczNAyA\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 19:50:52.852","caller":"service/dingtalk.go:271","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"8E0555C6-7DF9-73D4-B286-3F2179CC9AD0\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"8E0555C6-7DF9-73D4-B286-3F2179CC9AD0"}}
{"level":"warn","timestamp":"2025-11-16 19:50:52.852","caller":"service/dingtalk.go:129","msg":"Failed to send image, continuing with text","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法"}
{"level":"info","timestamp":"2025-11-16 19:50:52.903","caller":"service/dingtalk.go:227","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"c88a9c49d8...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 千岛湖野鱼馆\\\\n**操作人员:** 井康\\\\n**报菜时间:** 2025-11-16 19:50:51\\\\n\\\\n**报菜明细:**\\\\n- **鸡蛋**: 数量 2\\\\n- **辣椒**: 数量 1\\\\n- **小青菜**: 数量 1\\\\n\\\\n---\\\\n*报菜记录单ID: 36*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 19:50:52.954","caller":"service/dingtalk.go:227","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"55905D4D-24F6-7980-9E41-68119A1B093E\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"55905D4D-24F6-7980-9E41-68119A1B093E"}}
{"level":"error","timestamp":"2025-11-16 19:50:52.954","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 19:50:52.954","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 19:50:53.020","caller":"service/dingtalk.go:180","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 19:50:53.020","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":36,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 19:52:21.073","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:52:21.163","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 19:52:21.163","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 19:52:21.164","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 19:52:21.184","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 19:52:21.190","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 19:52:21.190","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 19:52:40.275","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:52:40.318","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:52:41.155","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 19:52:41.198","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 19:52:41.199","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 19:52:41.199","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:52:41.243","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 19:52:41.287","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 19:52:41.287","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:53:21.756","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:53:21.846","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 19:53:21.846","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 19:53:21.846","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 19:53:21.857","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 19:53:21.864","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 19:53:21.864","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 19:53:41.444","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:53:41.493","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 19:53:42.404","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 19:53:42.450","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 19:53:42.456","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 19:53:42.456","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 19:53:42.506","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 19:53:42.554","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 19:53:42.554","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 19:53:49.496","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":37,"imageSize":2961}
{"level":"warn","timestamp":"2025-11-16 19:53:49.503","caller":"service/dingtalk.go:129","msg":"Stream mode image sending not fully supported yet, sending text only","botID":1,"imageSize":2961}
{"level":"info","timestamp":"2025-11-16 19:53:49.572","caller":"service/dingtalk.go:227","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"c88a9c49d8...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 千岛湖野鱼馆\\\\n**操作人员:** 井康\\\\n**报菜时间:** 2025-11-16 19:53:49\\\\n\\\\n**报菜明细:**\\\\n- **鸡蛋**: 数量 1\\\\n\\\\n---\\\\n*报菜记录单ID: 37*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 19:53:49.636","caller":"service/dingtalk.go:227","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"8135B67D-0962-74DB-95AD-AD23495A8BE7\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"8135B67D-0962-74DB-95AD-AD23495A8BE7"}}
{"level":"error","timestamp":"2025-11-16 19:53:49.637","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 19:53:49.637","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 19:53:49.791","caller":"service/dingtalk.go:180","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 19:53:49.791","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":37,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 19:54:26.233","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":38,"imageSize":3373}
{"level":"warn","timestamp":"2025-11-16 19:54:26.235","caller":"service/dingtalk.go:129","msg":"Stream mode image sending not fully supported yet, sending text only","botID":1,"imageSize":3373}
{"level":"info","timestamp":"2025-11-16 19:54:26.296","caller":"service/dingtalk.go:227","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"c88a9c49d8...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 千岛湖野鱼馆\\\\n**操作人员:** 井康\\\\n**报菜时间:** 2025-11-16 19:54:25\\\\n\\\\n**报菜明细:**\\\\n- **鸡蛋**: 数量 1\\\\n- **辣椒**: 数量 1\\\\n\\\\n---\\\\n*报菜记录单ID: 38*\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 19:54:26.359","caller":"service/dingtalk.go:227","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"05F0979A-53A9-7E47-9982-AE5E74F22A3D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"05F0979A-53A9-7E47-9982-AE5E74F22A3D"}}
{"level":"error","timestamp":"2025-11-16 19:54:26.360","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 19:54:26.360","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 19:54:26.426","caller":"service/dingtalk.go:180","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 19:54:26.426","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":38,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 19:54:46.841","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":39,"imageSize":5618}
{"level":"info","timestamp":"2025-11-16 19:54:46.843","caller":"service/menu_report_listener.go:64","msg":"No enabled bots for store","storeID":999}
{"level":"info","timestamp":"2025-11-16 20:08:09.410","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 20:08:09.501","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 20:08:09.501","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 20:08:09.501","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 20:08:09.511","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 20:08:09.518","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 20:08:09.518","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 20:08:28.784","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 20:08:28.828","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 20:08:29.664","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 20:08:29.707","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 20:08:29.708","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 20:08:29.708","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 20:08:29.752","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 20:08:29.796","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 20:08:29.796","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 20:08:41.148","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":40,"imageSize":3432}
{"level":"info","timestamp":"2025-11-16 20:08:41.154","caller":"service/menu_report_listener.go:64","msg":"No enabled bots for store","storeID":999}
{"level":"info","timestamp":"2025-11-16 20:09:01.339","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":41,"imageSize":3330}
{"level":"info","timestamp":"2025-11-16 20:09:01.939","caller":"service/dingtalk.go:257","msg":"Upload image response","statusCode":200,"response":{"created_at":1763294941663,"errcode":0,"errmsg":"ok","media_id":"@lALPD2Cw46egEo_NAZrNAyA","type":"image"}}
{"level":"info","timestamp":"2025-11-16 20:09:01.939","caller":"service/dingtalk.go:129","msg":"Image uploaded successfully, preparing announcement","botID":1,"mediaID":"@lALPD2Cw46egEo_NAZrNAyA","imageSize":3330}
{"level":"info","timestamp":"2025-11-16 20:09:01.939","caller":"service/dingtalk.go:276","msg":"Sending announcement to DingTalk","url":"https://oapi.dingtalk.com/topapi/message/corpconversation/asyncsend_v2?access_token=c88a9c49d8e73b3ab47ec52539a347a6","agentID":2974263828,"title":"📋 新报菜通知","mediaID":"@lALPD2Cw46egEo_NAZrNAyA","requestBody":"{\"agent_id\":2974263828,\"msg\":\"{\\\"msgtype\\\":\\\"oa\\\",\\\"oa\\\":{\\\"body\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 20:09:00\\\\n\\\\n报菜明细:\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 41\\\",\\\"form\\\":[{\\\"key\\\":\\\"详细信息\\\",\\\"value\\\":\\\"📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 20:09:00\\\\n\\\\n报菜明细:\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 41\\\"}],\\\"image\\\":\\\"@lALPD2Cw46egEo_NAZrNAyA\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"},\\\"head\\\":{\\\"bgcolor\\\":\\\"FFBBBBBB\\\",\\\"text\\\":\\\"📋 新报菜通知\\\"},\\\"message_url\\\":\\\"dingtalk://dingtalkclient/page/link?url=https://www.dingtalk.com\\\"}}\",\"to_all_user\":true}"}
{"level":"info","timestamp":"2025-11-16 20:09:01.980","caller":"service/dingtalk.go:276","msg":"Announcement response from DingTalk","statusCode":200,"response":{"errcode":41,"errmsg":"Invalid arguments:msg","request_id":"16mai73j6d3ui"}}
{"level":"error","timestamp":"2025-11-16 20:09:01.980","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk announcement error: code=41, msg=Invalid arguments:msg","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 20:09:01.980","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 20:09:02.040","caller":"service/dingtalk.go:180","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 20:09:02.040","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":41,"storeID":1000,"error":"dingtalk announcement error: code=41, msg=Invalid arguments:msg","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:25:15.014","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:25:15.113","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 23:25:15.113","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 23:25:15.113","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 23:25:15.143","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 23:25:15.152","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 23:25:15.152","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 23:25:34.330","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:25:34.374","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:25:35.210","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 23:25:35.253","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 23:25:35.254","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 23:25:35.254","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:25:35.298","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 23:25:35.341","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 23:25:35.341","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 23:26:11.546","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":42,"imageSize":3734}
{"level":"info","timestamp":"2025-11-16 23:26:11.608","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/232611_ff3c8fd1.png","imageSize":3734}
{"level":"info","timestamp":"2025-11-16 23:26:11.608","caller":"service/dingtalk.go:265","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"sampleMarkdown\",\"msgParam\":\"{\\\"markdown\\\":{\\\"text\\\":\\\"## 📋 新报菜通知\\\\n\\\\n**门店名称:** 千岛湖野鱼馆\\\\n**操作人员:** 井康\\\\n**报菜时间:** 2025-11-16 23:26:11\\\\n\\\\n**报菜明细:**\\\\n- **鸡蛋**: 数量 1\\\\n- **辣椒**: 数量 1\\\\n- **小青菜**: 数量 1\\\\n\\\\n---\\\\n*报菜记录单ID: 42*\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/232611_ff3c8fd1.png)\\\",\\\"title\\\":\\\"📋 新报菜通知\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:26:11.676","caller":"service/dingtalk.go:265","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"05722F35-1EB3-7CA9-A10A-7C56A06632BC\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"05722F35-1EB3-7CA9-A10A-7C56A06632BC"}}
{"level":"warn","timestamp":"2025-11-16 23:26:11.676","caller":"service/dingtalk.go:326","msg":"Markdown format not supported, falling back to plain text with link","botID":1,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法"}
{"level":"info","timestamp":"2025-11-16 23:26:11.676","caller":"service/dingtalk.go:284","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":null,"openConversationIds":"[] (broadcast to all groups)","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n## 📋 新报菜通知\\\\n\\\\n**门店名称:** 千岛湖野鱼馆\\\\n**操作人员:** 井康\\\\n**报菜时间:** 2025-11-16 23:26:11\\\\n\\\\n**报菜明细:**\\\\n- **鸡蛋**: 数量 1\\\\n- **辣椒**: 数量 1\\\\n- **小青菜**: 数量 1\\\\n\\\\n---\\\\n*报菜记录单ID: 42*\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/232611_ff3c8fd1.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:26:11.725","caller":"service/dingtalk.go:284","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"D64B8479-F76C-7179-894F-0F12329FF062\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"D64B8479-F76C-7179-894F-0F12329FF062"}}
{"level":"error","timestamp":"2025-11-16 23:26:11.725","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:26:11.725","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:26:11.931","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:26:11.931","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":42,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:28:41.165","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:28:41.278","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 23:28:41.278","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 23:28:41.278","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 23:28:41.292","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 23:28:41.298","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 23:28:41.298","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 23:29:00.369","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:29:00.412","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:29:01.248","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 23:29:01.291","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 23:29:01.292","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 23:29:01.292","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:29:01.336","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 23:29:01.380","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 23:29:01.380","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 23:29:14.476","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":43,"imageSize":3370}
{"level":"info","timestamp":"2025-11-16 23:29:14.541","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/232914_e79224cc.png","imageSize":3370}
{"level":"info","timestamp":"2025-11-16 23:29:14.542","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:29:14\\\\n\\\\n报菜明细:\\\\n• 辣椒: 数量 1\\\\n• 鸡蛋: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 43\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/232914_e79224cc.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:29:14.594","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"D6452C0B-98C1-76F4-A3DF-48019F5BA747\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"D6452C0B-98C1-76F4-A3DF-48019F5BA747"}}
{"level":"error","timestamp":"2025-11-16 23:29:14.594","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:29:14.594","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:29:14.757","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:29:14.757","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":43,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:30:32.405","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:30:32.527","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 23:30:32.527","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 23:30:32.527","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 23:30:32.536","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 23:30:32.546","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 23:30:32.546","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 23:30:37.904","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:30:37.989","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 23:30:37.989","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 23:30:37.989","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 23:30:37.999","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 23:30:38.006","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 23:30:38.006","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 23:30:51.643","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:30:51.686","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:30:52.523","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 23:30:52.566","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 23:30:52.567","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 23:30:52.567","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:30:52.611","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 23:30:52.655","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 23:30:52.655","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 23:31:06.121","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":44,"imageSize":22735}
{"level":"info","timestamp":"2025-11-16 23:31:06.182","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/233106_89244100.png","imageSize":22735}
{"level":"info","timestamp":"2025-11-16 23:31:06.182","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:31:05\\\\n\\\\n报菜明细:\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 44\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/233106_89244100.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:31:06.237","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"B692DB8A-205D-7E92-B34E-664FEDC609F9\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"B692DB8A-205D-7E92-B34E-664FEDC609F9"}}
{"level":"error","timestamp":"2025-11-16 23:31:06.237","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:31:06.237","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:31:06.384","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:31:06.384","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":44,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:32:24.230","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":45,"imageSize":26473}
{"level":"info","timestamp":"2025-11-16 23:32:24.298","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/233224_f7d9237c.png","imageSize":26473}
{"level":"info","timestamp":"2025-11-16 23:32:24.298","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:32:23\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1 (22)\\\\n• 小青菜: 数量 1 (备注信息11)\\\\n\\\\n---\\\\n报菜记录单ID: 45\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/233224_f7d9237c.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:32:24.354","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"05B5AE6A-954E-711D-8FEE-BDD3A292D141\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"05B5AE6A-954E-711D-8FEE-BDD3A292D141"}}
{"level":"error","timestamp":"2025-11-16 23:32:24.354","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:32:24.354","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:32:24.418","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:32:24.418","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":45,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:34:28.320","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":46,"imageSize":24626}
{"level":"info","timestamp":"2025-11-16 23:34:28.459","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/233428_5d46d655.png","imageSize":24626}
{"level":"info","timestamp":"2025-11-16 23:34:28.460","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:34:27\\\\n\\\\n报菜明细:\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 鸡蛋: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 46\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/233428_5d46d655.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:34:28.514","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"59E72509-757C-7A52-AEDA-1C2ECB67A097\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"59E72509-757C-7A52-AEDA-1C2ECB67A097"}}
{"level":"error","timestamp":"2025-11-16 23:34:28.514","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:34:28.514","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:34:28.666","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:34:28.666","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":46,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:41:20.837","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":47,"imageSize":38530}
{"level":"info","timestamp":"2025-11-16 23:41:20.838","caller":"service/menu_report_listener.go:64","msg":"No enabled bots for store","storeID":999}
{"level":"info","timestamp":"2025-11-16 23:41:44.355","caller":"utils/employee.go:127","msg":"生成菜品分类编码"}
{"level":"info","timestamp":"2025-11-16 23:42:34.374","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":48,"imageSize":30547}
{"level":"info","timestamp":"2025-11-16 23:42:34.532","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/234234_44061b62.png","imageSize":30547}
{"level":"info","timestamp":"2025-11-16 23:42:34.532","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:42:33\\\\n\\\\n报菜明细:\\\\n• 小黄鱼: 数量 6\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 3\\\\n• 鸡蛋: 数量 9\\\\n• 辣椒: 数量 3\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 48\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/234234_44061b62.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:42:34.585","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"0DF648D5-385F-7188-B4CF-180689528F6D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"0DF648D5-385F-7188-B4CF-180689528F6D"}}
{"level":"error","timestamp":"2025-11-16 23:42:34.585","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:42:34.585","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:42:34.743","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:42:34.743","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":48,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:53:38.564","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:53:38.653","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-16 23:53:38.653","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-16 23:53:38.653","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-16 23:53:38.662","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-16 23:53:38.668","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-16 23:53:38.668","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-16 23:53:59.171","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:53:59.214","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-16 23:54:00.065","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-16 23:54:00.106","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-16 23:54:00.107","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-16 23:54:00.107","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-16 23:54:00.150","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-16 23:54:00.194","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-16 23:54:00.194","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-16 23:54:37.712","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":49,"imageSize":30710}
{"level":"info","timestamp":"2025-11-16 23:54:37.780","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/235437_b833be04.png","imageSize":30710}
{"level":"info","timestamp":"2025-11-16 23:54:37.780","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:54:37\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 3\\\\n• 辣椒: 数量 3\\\\n• 小青菜: 数量 5\\\\n• 小黄鱼: 数量 3\\\\n• 牛肉: 数量 3\\\\n• 里脊肉: 数量 4\\\\n\\\\n---\\\\n报菜记录单ID: 49\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/235437_b833be04.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:54:37.839","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"539CCAD2-D118-78F1-8A82-D67FEEBF099C\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"539CCAD2-D118-78F1-8A82-D67FEEBF099C"}}
{"level":"error","timestamp":"2025-11-16 23:54:37.840","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:54:37.840","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:54:37.992","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:54:37.992","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":49,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-16 23:55:12.606","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":50,"imageSize":27663}
{"level":"info","timestamp":"2025-11-16 23:55:12.664","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/16/235512_5265f894.png","imageSize":27663}
{"level":"info","timestamp":"2025-11-16 23:55:12.664","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"d860bef948...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-16 23:55:12\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 50\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/16/235512_5265f894.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-16 23:55:12.719","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"4B00B4DF-0CA5-7A74-A3AE-8C4D30169725\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"4B00B4DF-0CA5-7A74-A3AE-8C4D30169725"}}
{"level":"error","timestamp":"2025-11-16 23:55:12.719","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-16 23:55:12.719","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-16 23:55:12.780","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-16 23:55:12.781","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":50,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 15:57:48.939","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-17 15:57:49.079","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-17 15:57:49.079","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-17 15:57:49.079","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-17 15:57:49.095","caller":"bootstrap/database.go:14","msg":"数据库连接失败","error":"Error 1045 (28000): Access denied for user 'root'@'172.17.0.1' (using password: YES)","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:14\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:22\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-17 15:58:44.191","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-17 15:58:44.276","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-17 15:58:44.277","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-17 15:58:44.277","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-17 15:58:44.466","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-17 15:58:44.486","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-17 15:58:44.486","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-17 15:59:07.953","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-17 15:59:07.985","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-17 15:59:10.985","caller":"seeding/seed.go:139","msg":"超级门店创建成功","store_id":999}
{"level":"info","timestamp":"2025-11-17 15:59:11.220","caller":"seeding/seed.go:167","msg":"超级管理员角色创建成功","role_id":999}
{"level":"info","timestamp":"2025-11-17 15:59:11.340","caller":"seeding/seed.go:197","msg":"✅ 超级管理员创建成功","user_id":999,"username":"admin","phone":"13082848180","employee_no":"999999","default_password":"$X:NUFxq[x1yb24U"}
{"level":"warn","timestamp":"2025-11-17 15:59:11.340","caller":"seeding/seed.go:204","msg":"⚠️  重要提示：请立即修改默认密码，首次登录后请修改为自定义密码！"}
{"level":"info","timestamp":"2025-11-17 15:59:11.427","caller":"utils/employee.go:99","msg":"生成门店编码"}
{"level":"info","timestamp":"2025-11-17 15:59:11.547","caller":"seeding/seed.go:282","msg":"门店编码已补全","store_id":999}
{"level":"info","timestamp":"2025-11-17 15:59:11.722","caller":"seeding/seed_dingtalk_menus.go:118","msg":"✅ 钉钉管理菜单创建成功","count":7}
{"level":"info","timestamp":"2025-11-17 15:59:13.089","caller":"seeding/seed_dingtalk_menus.go:152","msg":"✅ admin 角色钉钉权限分配成功","role_id":1}
{"level":"info","timestamp":"2025-11-17 15:59:14.344","caller":"seeding/seed_dingtalk_menus.go:159","msg":"✅ 超级管理员钉钉权限分配成功","role_id":999}
{"level":"info","timestamp":"2025-11-17 15:59:14.345","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-17 15:59:14.976","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-17 15:59:15.090","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-17 15:59:15.091","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-17 15:59:15.091","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-17 15:59:15.288","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-17 15:59:15.297","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-17 15:59:15.297","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-17 15:59:49.885","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-17 15:59:49.918","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-17 15:59:51.321","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-17 15:59:51.353","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-17 15:59:51.417","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-17 15:59:51.417","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-17 15:59:51.680","caller":"bootstrap/stream.go:20","msg":"✅ Stream bot created from config","botID":1,"botName":"全局Stream机器人(自动创建)","clientID":"dinglsqvmdgbj5xaidwz"}
{"level":"info","timestamp":"2025-11-17 15:59:51.743","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-17 15:59:51.743","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-17 16:00:12.192","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-17 16:00:12.278","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-17 16:00:12.278","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-17 16:00:12.278","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-17 16:00:12.462","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-17 16:00:12.470","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-17 16:00:12.470","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-17 16:00:44.720","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-17 16:00:44.751","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-17 16:00:46.013","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-17 16:00:46.043","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-17 16:00:46.103","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-17 16:00:46.103","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-17 16:00:46.174","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-17 16:00:46.234","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-17 16:00:46.234","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-17 16:02:31.146","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-17 16:02:31.230","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-17 16:02:31.230","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-17 16:02:31.230","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-17 16:02:31.413","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-17 16:02:31.422","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-17 16:02:31.422","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-17 16:03:03.805","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-17 16:03:03.834","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-17 16:03:05.100","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-17 16:03:05.129","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-17 16:03:05.190","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-17 16:03:05.190","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-17 16:03:05.254","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-17 16:03:05.313","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-17 16:03:05.313","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-17 16:04:53.517","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-17 16:04:53.613","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-17 16:04:53.613","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-17 16:04:53.613","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-17 16:04:53.797","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-17 16:04:53.806","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-17 16:04:53.806","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-17 16:05:26.271","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-17 16:05:26.301","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-17 16:05:27.559","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-17 16:05:27.589","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-17 16:05:27.651","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-17 16:05:27.651","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-17 16:05:27.712","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-17 16:05:27.772","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-17 16:05:27.772","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-17 16:09:04.278","caller":"utils/employee.go:127","msg":"生成菜品分类编码"}
{"level":"info","timestamp":"2025-11-17 16:09:40.924","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":1,"imageSize":22491}
{"level":"error","timestamp":"2025-11-17 16:09:41.115","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:09:41.115","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":1,"storeID":999,"error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 16:13:28.631","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":2}
{"level":"info","timestamp":"2025-11-17 16:13:43.764","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":2,"imageSize":22599}
{"level":"error","timestamp":"2025-11-17 16:13:43.826","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:13:43.826","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":2,"storeID":999,"error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 16:14:52.987","caller":"utils/employee.go:99","msg":"生成门店编码"}
{"level":"error","timestamp":"2025-11-17 16:19:51.965","caller":"utils/employee.go:32","msg":"解析工号失败","stacktrace":"github.com/Kevin-Jii/tower-go/utils.GenerateEmployeeNo\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/employee.go:32\ngithub.com/Kevin-Jii/tower-go/service.(*UserService).CreateUser\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/user.go:39\ngithub.com/Kevin-Jii/tower-go/controller.(*UserController).CreateUser\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/controller/user.go:67\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.RegisterRoutes.StoreAuthMiddleware.AuthMiddleware.func6\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/auth.go:44\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run.RequestLoggerMiddleware.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/middleware/request_logger.go:38\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/recovery.go:92\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/Administrator/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Application/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\tC:/Program Files/Application/go/src/net/http/server.go:2109"}
{"level":"info","timestamp":"2025-11-17 16:22:26.087","caller":"utils/employee.go:46","msg":"生成新工号"}
{"level":"info","timestamp":"2025-11-17 16:23:46.303","caller":"utils/employee.go:46","msg":"生成新工号"}
{"level":"info","timestamp":"2025-11-17 16:24:07.915","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":2}
{"level":"info","timestamp":"2025-11-17 16:25:10.380","caller":"utils/employee.go:127","msg":"生成菜品分类编码"}
{"level":"info","timestamp":"2025-11-17 16:25:44.241","caller":"utils/employee.go:127","msg":"生成菜品分类编码"}
{"level":"info","timestamp":"2025-11-17 16:27:32.678","caller":"utils/employee.go:127","msg":"生成菜品分类编码"}
{"level":"info","timestamp":"2025-11-17 16:28:45.618","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":3,"imageSize":42712}
{"level":"error","timestamp":"2025-11-17 16:28:45.685","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:28:45.686","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":3,"storeID":1000,"error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 16:30:15.515","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":4,"imageSize":40907}
{"level":"error","timestamp":"2025-11-17 16:30:15.583","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:30:15.583","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":4,"storeID":1000,"error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 16:32:25.603","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":5,"imageSize":29577}
{"level":"error","timestamp":"2025-11-17 16:32:25.670","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:32:25.670","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":5,"storeID":1000,"error":"robotCode is required for stream mode","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 16:34:26.180","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":6,"imageSize":42989}
{"level":"info","timestamp":"2025-11-17 16:34:26.394","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://47.120.27.64:8899/images/2025/11/17/163426_6c72dcea.png","imageSize":42989}
{"level":"info","timestamp":"2025-11-17 16:34:26.394","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"2cc804cef3...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 李四\\\\n报菜时间: 2025-11-17 16:34:25\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 鸭蛋: 数量 1\\\\n• 鹅蛋: 数量 1\\\\n• 甲鱼: 数量 1\\\\n• 鲫鱼片: 数量 1\\\\n• 鸡肉(肉鸡): 数量 1\\\\n• 鸡肉(公鸡): 数量 1\\\\n• 鸭头: 数量 1\\\\n• 鸭爪: 数量 1\\\\n• 彩椒: 数量 1\\\\n• 毛毛菜: 数量 4\\\\n• 红椒: 数量 7\\\\n• 青椒: 数量 5\\\\n\\\\n---\\\\n报菜记录单ID: 6\\\\n\\\\n![报菜明细](http://47.120.27.64:8899/images/2025/11/17/163426_6c72dcea.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-17 16:34:26.444","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"6526E0DD-F7F8-7BB0-A04C-26CB16793554\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"6526E0DD-F7F8-7BB0-A04C-26CB16793554"}}
{"level":"error","timestamp":"2025-11-17 16:34:26.444","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:34:26.444","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":6,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 16:41:07.015","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":7,"imageSize":28724}
{"level":"info","timestamp":"2025-11-17 16:41:07.210","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://47.120.27.64:8899/images/2025/11/17/164107_e8d6dbc5.png","imageSize":28724}
{"level":"info","timestamp":"2025-11-17 16:41:07.211","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"2cc804cef3...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 李四\\\\n报菜时间: 2025-11-17 16:41:06\\\\n\\\\n报菜明细:\\\\n• 甲鱼: 数量 1\\\\n• 鲫鱼片: 数量 1\\\\n• 鸡肉(公鸡): 数量 1\\\\n• 鸡肉(肉鸡): 数量 1\\\\n• 鸭头: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 7\\\\n\\\\n![报菜明细](http://47.120.27.64:8899/images/2025/11/17/164107_e8d6dbc5.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-17 16:41:07.266","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"C9F1614C-60E3-7124-B0F4-AB8B63315F32\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"C9F1614C-60E3-7124-B0F4-AB8B63315F32"}}
{"level":"error","timestamp":"2025-11-17 16:41:07.266","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 16:41:07.266","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":7,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 17:34:34.513","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":8,"imageSize":22548}
{"level":"info","timestamp":"2025-11-17 17:34:34.881","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://47.120.27.64:8899/images/2025/11/17/173434_c0087e89.png","imageSize":22548}
{"level":"info","timestamp":"2025-11-17 17:34:34.881","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"2cc804cef3...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 总部\\\\n操作人员: 超级管理员\\\\n报菜时间: 2025-11-17 17:34:33\\\\n\\\\n报菜明细:\\\\n• 小酥肉: 数量 1\\\\n• 猪大肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 8\\\\n\\\\n![报菜明细](http://47.120.27.64:8899/images/2025/11/17/173434_c0087e89.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-17 17:34:34.941","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"40ED7DE2-67F2-7559-A912-AF94EBC3AD3D\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"40ED7DE2-67F2-7559-A912-AF94EBC3AD3D"}}
{"level":"error","timestamp":"2025-11-17 17:34:34.941","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 17:34:34.941","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":8,"storeID":999,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-17 17:35:05.802","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":9,"imageSize":24638}
{"level":"info","timestamp":"2025-11-17 17:35:05.923","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://47.120.27.64:8899/images/2025/11/17/173505_96101e4c.png","imageSize":24638}
{"level":"info","timestamp":"2025-11-17 17:35:05.923","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"2cc804cef3...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 李四\\\\n报菜时间: 2025-11-17 17:35:05\\\\n\\\\n报菜明细:\\\\n• 甲鱼: 数量 2\\\\n• 鲫鱼片: 数量 2\\\\n• 鸡肉(公鸡): 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 9\\\\n\\\\n![报菜明细](http://47.120.27.64:8899/images/2025/11/17/173505_96101e4c.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-17 17:35:05.981","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"F2875BA8-7CF0-7F65-829A-49D8E3460B21\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"F2875BA8-7CF0-7F65-829A-49D8E3460B21"}}
{"level":"error","timestamp":"2025-11-17 17:35:05.981","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"error","timestamp":"2025-11-17 17:35:05.981","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":9,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 19:18:22.338","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 19:18:22.478","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 19:18:22.478","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 19:18:22.478","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 19:18:22.523","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 19:18:22.543","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 19:18:22.543","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 19:18:43.494","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 19:18:43.540","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 19:18:44.432","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 19:18:44.478","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 19:18:44.480","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 19:18:44.480","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 19:18:44.523","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 19:18:44.567","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 19:18:44.567","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 19:19:54.729","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":51,"imageSize":27604}
{"level":"info","timestamp":"2025-11-18 19:19:54.823","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/191954_49783fab.png","imageSize":27604}
{"level":"info","timestamp":"2025-11-18 19:19:54.823","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 19:19:54\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 51\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/191954_49783fab.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 19:19:54.883","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"089B5808-0729-739D-BAC9-1150B182BC05\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"089B5808-0729-739D-BAC9-1150B182BC05"}}
{"level":"error","timestamp":"2025-11-18 19:19:54.883","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 19:19:54.883","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 19:19:55.054","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 19:19:55.054","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":51,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 20:11:26.078","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 20:11:26.177","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 20:11:26.178","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 20:11:26.178","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 20:11:26.209","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 20:11:26.219","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 20:11:26.219","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 20:11:46.493","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 20:11:46.536","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 20:11:47.377","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 20:11:47.419","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 20:11:47.421","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 20:11:47.421","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 20:11:47.464","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 20:11:47.508","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 20:11:47.508","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 20:13:14.227","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 20:13:14.314","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 20:13:14.314","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 20:13:14.314","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 20:13:14.325","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 20:13:14.333","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 20:13:14.333","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 20:13:34.475","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 20:13:34.521","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 20:13:35.423","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 20:13:35.465","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 20:13:35.466","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 20:13:35.466","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 20:13:35.509","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 20:13:35.555","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 20:13:35.555","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 20:13:54.255","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":52,"imageSize":22133}
{"level":"info","timestamp":"2025-11-18 20:13:54.318","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/201354_e37a0e8d.png","imageSize":22133}
{"level":"info","timestamp":"2025-11-18 20:13:54.318","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 20:13:53\\\\n\\\\n报菜明细:\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 52\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/201354_e37a0e8d.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 20:13:54.376","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"72A516E6-F265-7C92-8908-1112A3FDE7D5\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"72A516E6-F265-7C92-8908-1112A3FDE7D5"}}
{"level":"error","timestamp":"2025-11-18 20:13:54.376","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 20:13:54.376","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 20:13:54.519","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 20:13:54.519","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":52,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 20:54:33.776","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 20:54:33.870","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 20:54:33.870","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 20:54:33.870","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 20:54:33.885","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 20:54:33.893","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 20:54:33.893","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 20:54:54.365","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 20:54:54.410","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 20:54:55.278","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 20:54:55.321","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 20:54:55.321","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 20:54:55.322","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 20:54:55.365","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 20:54:55.411","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 20:54:55.412","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 20:55:04.242","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":53,"imageSize":18858}
{"level":"info","timestamp":"2025-11-18 20:55:04.316","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/205504_af2dc6b8.png","imageSize":18858}
{"level":"info","timestamp":"2025-11-18 20:55:04.317","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 20:55:03\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 53\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/205504_af2dc6b8.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 20:55:04.375","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"5E06CE07-01BB-7D08-BE46-131B234284C2\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"5E06CE07-01BB-7D08-BE46-131B234284C2"}}
{"level":"error","timestamp":"2025-11-18 20:55:04.375","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 20:55:04.375","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 20:55:04.522","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 20:55:04.522","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":53,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 21:01:24.031","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":54,"imageSize":17687}
{"level":"info","timestamp":"2025-11-18 21:01:24.034","caller":"service/menu_report_listener.go:64","msg":"No enabled bots for store","storeID":999}
{"level":"info","timestamp":"2025-11-18 21:04:50.849","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:04:50.947","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 21:04:50.947","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 21:04:50.948","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 21:04:50.958","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 21:04:50.964","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 21:04:50.964","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 21:05:11.155","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:05:11.199","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:05:12.071","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 21:05:12.114","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 21:05:12.115","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 21:05:12.116","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:05:12.161","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 21:05:12.208","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 21:05:12.211","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 21:05:24.451","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":55,"imageSize":18985}
{"level":"info","timestamp":"2025-11-18 21:05:24.511","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/210524_605e19ab.png","imageSize":18985}
{"level":"info","timestamp":"2025-11-18 21:05:24.511","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 21:05:24\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 55\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/210524_605e19ab.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:05:24.568","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"0BB8B206-F4E5-7A93-AB97-A0C2F59F038E\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"0BB8B206-F4E5-7A93-AB97-A0C2F59F038E"}}
{"level":"error","timestamp":"2025-11-18 21:05:24.568","caller":"service/menu_report_listener.go:64","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:64\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 21:05:24.570","caller":"service/menu_report_listener.go:64","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 21:05:24.730","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 21:05:24.730","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":55,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 21:12:28.980","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:12:29.082","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 21:12:29.082","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 21:12:29.082","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 21:12:29.091","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 21:12:29.101","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 21:12:29.101","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 21:12:49.250","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:12:49.296","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:12:50.172","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 21:12:50.217","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 21:12:50.227","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 21:12:50.229","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:12:50.271","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 21:12:50.316","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 21:12:50.316","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 21:14:01.301","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":56,"imageSize":17078}
{"level":"info","timestamp":"2025-11-18 21:14:01.361","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/211401_cc1d36ba.png","imageSize":17078}
{"level":"info","timestamp":"2025-11-18 21:14:01.362","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 21:14:00\\\\n\\\\n报菜明细:\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 56\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/211401_cc1d36ba.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:14:01.413","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"9333E974-66A5-7475-8A25-E0EB9C7B8F85\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"9333E974-66A5-7475-8A25-E0EB9C7B8F85"}}
{"level":"error","timestamp":"2025-11-18 21:14:01.413","caller":"service/menu_report_listener.go:65","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:65\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 21:14:01.413","caller":"service/menu_report_listener.go:65","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 21:14:01.545","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 21:14:01.545","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":56,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 21:15:20.193","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:15:20.286","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 21:15:20.287","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 21:15:20.287","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 21:15:20.296","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 21:15:20.303","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 21:15:20.303","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 21:15:40.537","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:15:40.580","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:15:41.452","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 21:15:41.496","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 21:15:41.497","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 21:15:41.497","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:15:41.545","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 21:15:41.588","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 21:15:41.588","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 21:22:46.849","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:22:46.940","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 21:22:46.940","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 21:22:46.940","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 21:22:46.949","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 21:22:46.956","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 21:22:46.956","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 21:23:07.327","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:23:07.370","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:23:08.256","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 21:23:08.300","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 21:23:08.303","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 21:23:08.304","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:23:08.349","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 21:23:08.395","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 21:23:08.396","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 21:23:21.176","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":57,"imageSize":51792}
{"level":"info","timestamp":"2025-11-18 21:23:21.245","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/212321_e0e149d7.png","imageSize":51792}
{"level":"info","timestamp":"2025-11-18 21:23:21.246","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 21:23:20\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 57\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/212321_e0e149d7.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:23:21.309","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"59A40899-7321-7286-9656-6A86F1A86C10\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"59A40899-7321-7286-9656-6A86F1A86C10"}}
{"level":"error","timestamp":"2025-11-18 21:23:21.310","caller":"service/menu_report_listener.go:65","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:65\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 21:23:21.315","caller":"service/menu_report_listener.go:65","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 21:23:21.857","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 21:23:21.858","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":57,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 21:32:07.394","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:32:07.485","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-18 21:32:07.486","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-18 21:32:07.486","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-18 21:32:07.496","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-18 21:32:07.503","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-18 21:32:07.503","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-18 21:32:27.768","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:32:27.811","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-18 21:32:28.693","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-18 21:32:28.736","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-18 21:32:28.742","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-18 21:32:28.745","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-18 21:32:28.787","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-18 21:32:28.833","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-18 21:32:28.833","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-18 21:32:40.868","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-18 21:32:40\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:32:40.918","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"2D869D63-BBD6-7751-97E6-DB0D0AA341BA\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"2D869D63-BBD6-7751-97E6-DB0D0AA341BA"}}
{"level":"info","timestamp":"2025-11-18 21:33:02.776","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":58,"imageSize":51054}
{"level":"info","timestamp":"2025-11-18 21:33:02.829","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/213302_94c5e5c5.png","imageSize":51054}
{"level":"info","timestamp":"2025-11-18 21:33:02.829","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-18 21:33:02\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1 (2)\\\\n• 辣椒: 数量 1 (34)\\\\n• 小青菜: 数量 1 (444)\\\\n\\\\n---\\\\n报菜记录单ID: 58\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/213302_94c5e5c5.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:33:02.877","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"FAF7ABFA-FF22-7AC6-90D6-7BCD1DBA66EC\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"FAF7ABFA-FF22-7AC6-90D6-7BCD1DBA66EC"}}
{"level":"error","timestamp":"2025-11-18 21:33:02.877","caller":"service/menu_report_listener.go:66","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:66\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 21:33:02.879","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 21:33:03.027","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 21:33:03.027","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":58,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-18 21:37:45.493","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-18 21:37:45\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:37:45.555","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"E073CF6F-65B7-7207-B35A-FFF2EB6700F2\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"E073CF6F-65B7-7207-B35A-FFF2EB6700F2"}}
{"level":"info","timestamp":"2025-11-18 21:37:54.632","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-18 21:37:54\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:37:54.694","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"40DF3A5E-11D3-72DE-9685-34BB1A42052F\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"40DF3A5E-11D3-72DE-9685-34BB1A42052F"}}
{"level":"info","timestamp":"2025-11-18 21:39:48.295","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"624a633906...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-18 21:39:48\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 21:39:48.355","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"9DB7BEE5-3508-78C9-A934-52ED368572EB\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"9DB7BEE5-3508-78C9-A934-52ED368572EB"}}
{"level":"info","timestamp":"2025-11-18 23:51:15.522","caller":"utils/employee.go:46","msg":"生成新工号"}
{"level":"info","timestamp":"2025-11-18 23:51:31.451","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":59,"imageSize":49869}
{"level":"info","timestamp":"2025-11-18 23:51:31.614","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/18/235131_166d7308.png","imageSize":49869}
{"level":"info","timestamp":"2025-11-18 23:51:31.616","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 包贝尔\\\\n报菜时间: 2025-11-18 23:51:31\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 59\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/18/235131_166d7308.png)\\\"}}\",\"openConversationIds\":[],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-18 23:51:31.673","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"19B1EB7D-568C-7DFC-9CE3-0F203E951490\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"19B1EB7D-568C-7DFC-9CE3-0F203E951490"}}
{"level":"error","timestamp":"2025-11-18 23:51:31.673","caller":"service/menu_report_listener.go:66","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:66\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-18 23:51:31.674","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-18 23:51:31.829","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-18 23:51:31.830","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":59,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 00:04:29.919","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 00:04:30.068","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 00:04:30.070","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 00:04:30.070","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 00:04:30.083","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 00:04:30.091","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 00:04:30.091","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 00:04:50.323","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 00:04:50.371","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 00:04:51.234","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 00:04:51.276","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 00:04:51.277","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 00:04:51.277","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 00:04:51.321","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 00:04:51.365","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-19 00:04:51.365","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 00:05:47.537","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":60,"imageSize":63276}
{"level":"info","timestamp":"2025-11-19 00:05:47.600","caller":"service/dingtalk.go:130","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/000547_e560f8ae.png","imageSize":63276}
{"level":"info","timestamp":"2025-11-19 00:05:47.600","caller":"service/dingtalk.go:268","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"text","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"text\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 包贝尔\\\\n报菜时间: 2025-11-19 00:05:47\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1 (3)\\\\n• 辣椒: 数量 1 (2)\\\\n• 小青菜: 数量 1 (4)\\\\n• 小黄鱼: 数量 3\\\\n• 牛肉: 数量 3\\\\n• 里脊肉: 数量 3\\\\n\\\\n---\\\\n报菜记录单ID: 60\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/000547_e560f8ae.png)\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 00:05:47.653","caller":"service/dingtalk.go:268","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"1C20CA4E-2679-7EDD-95F9-95E4E690777E\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"1C20CA4E-2679-7EDD-95F9-95E4E690777E"}}
{"level":"error","timestamp":"2025-11-19 00:05:47.653","caller":"service/menu_report_listener.go:66","msg":"Failed to send to bot","botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/service.(*MenuReportEventListener).OnMenuReportOrderCreated\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/service/menu_report_listener.go:66\ngithub.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"warn","timestamp":"2025-11-19 00:05:47.654","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":6,"botName":"测试机器人"}
{"level":"info","timestamp":"2025-11-19 00:05:47.800","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"error","timestamp":"2025-11-19 00:05:47.801","caller":"events/event_bus.go:84","msg":"Failed to broadcast menu report order","orderID":60,"storeID":1000,"error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 00:08:05.729","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 00:08:05\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 00:08:05.778","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"3B5C65DD-85DC-76C1-A121-571B505341AD\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"3B5C65DD-85DC-76C1-A121-571B505341AD"}}
{"level":"info","timestamp":"2025-11-19 00:08:07.544","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 00:08:07\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 00:08:07.591","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"77B77E6B-7131-7AD2-8356-24217A3B5CE1\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"77B77E6B-7131-7AD2-8356-24217A3B5CE1"}}
{"level":"info","timestamp":"2025-11-19 00:08:13.357","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 00:08:13\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 00:08:13.408","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"359B78AA-7694-7C32-A47B-D6A57DF60B9F\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"359B78AA-7694-7C32-A47B-D6A57DF60B9F"}}
{"level":"info","timestamp":"2025-11-19 00:19:03.014","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 00:19:03.116","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 00:19:03.118","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 00:19:03.118","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 00:19:03.132","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 00:19:03.142","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 00:19:03.142","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 00:19:23.347","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 00:19:23.390","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 00:19:24.276","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 00:19:24.321","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 00:19:24.326","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 00:19:24.326","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 00:19:24.368","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 00:19:24.413","caller":"bootstrap/stream.go:42","msg":"Stream bot started successfully","botID":1,"botName":"全局Stream机器人(自动创建)"}
{"level":"info","timestamp":"2025-11-19 00:19:24.414","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 00:20:33.286","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 00:20:33\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 00:20:33.336","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"C866CE02-F760-7ADE-BC79-B2D9CD47987E\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"C866CE02-F760-7ADE-BC79-B2D9CD47987E"}}
{"level":"info","timestamp":"2025-11-19 00:22:14.513","caller":"service/dingtalk.go:231","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 00:22:14\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 00:22:14.564","caller":"service/dingtalk.go:231","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"131F3417-FE3B-7808-8CFA-5DDA699A1779\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"131F3417-FE3B-7808-8CFA-5DDA699A1779"}}
{"level":"info","timestamp":"2025-11-19 00:22:31.513","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-19 00:51:56.074","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 00:51:56.168","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 00:51:56.169","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 00:51:56.169","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 00:51:56.183","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 00:51:56.193","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 00:51:56.193","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 00:52:16.227","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 00:52:16.268","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 00:52:17.147","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 00:52:17.189","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 00:52:17.192","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 00:52:17.192","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 00:52:17.241","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 00:52:17.291","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 00:52:20.901","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-19 01:00:31.397","caller":"utils/employee.go:46","msg":"生成新工号"}
{"level":"info","timestamp":"2025-11-19 01:04:46.144","caller":"utils/employee.go:127","msg":"生成菜品分类编码"}
{"level":"info","timestamp":"2025-11-19 01:05:19.169","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":61,"imageSize":45133}
{"level":"warn","timestamp":"2025-11-19 01:05:19.170","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:05:19.315","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:06:39.758","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":62,"imageSize":45452}
{"level":"warn","timestamp":"2025-11-19 01:06:39.760","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:06:39.818","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:07:08.185","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:07:08.305","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:07:08.305","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:07:08.305","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:07:08.315","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:07:08.323","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:07:08.323","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:07:28.572","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:07:28.617","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:07:29.487","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:07:29.530","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:07:29.531","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:07:29.531","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:07:29.574","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:07:29.618","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:07:46.447","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":63,"imageSize":45544}
{"level":"warn","timestamp":"2025-11-19 01:07:46.455","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:07:46.605","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:11:57.728","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":64,"imageSize":45133}
{"level":"warn","timestamp":"2025-11-19 01:11:57.730","caller":"service/menu_report_listener.go:66","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:11:57.868","caller":"service/dingtalk.go:181","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:18:41.187","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:18:41.290","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:18:41.290","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:18:41.290","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:18:41.302","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:18:41.308","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:18:41.308","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:19:01.588","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:19:01.637","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:19:02.496","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:19:02.537","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:19:02.538","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:19:02.538","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:19:02.581","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:19:02.625","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:19:38.825","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":65,"imageSize":45133}
{"level":"info","timestamp":"2025-11-19 01:19:38.825","caller":"events/event_bus.go:84","msg":"No bot specified, skipping notification","orderID":65,"storeID":1001}
{"level":"info","timestamp":"2025-11-19 01:21:59.981","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:22:00.080","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:22:00.080","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:22:00.080","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:22:00.089","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:22:00.096","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:22:00.096","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:22:20.190","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:22:20.233","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:22:21.078","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:22:21.122","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:22:21.126","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:22:21.126","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:22:21.171","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:22:21.214","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:22:36.496","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":66,"imageSize":45295}
{"level":"warn","timestamp":"2025-11-19 01:22:36.550","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:22:36.718","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:22:36.718","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":66,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:23:58.412","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:23:58.499","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:23:58.499","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:23:58.499","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:23:58.508","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:23:58.515","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:23:58.515","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:24:18.652","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:24:18.700","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:24:19.580","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:24:19.623","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:24:19.624","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:24:19.624","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:24:19.669","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:24:19.715","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:24:47.113","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":67,"imageSize":45133}
{"level":"info","timestamp":"2025-11-19 01:24:47.113","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":67,"imageURL":"http://localhost:8899/images/2025/11/19/012447_32c817e4.png","imageSize":45133}
{"level":"warn","timestamp":"2025-11-19 01:24:47.168","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:24:47.297","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:24:47.297","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":67,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:32:59.208","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:32:59.296","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:32:59.296","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:32:59.296","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:32:59.305","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:32:59.312","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:32:59.312","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:33:19.452","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:33:19.497","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:33:20.372","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:33:20.414","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:33:20.415","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:33:20.415","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:33:20.466","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:33:20.515","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:33:39.733","caller":"service/dingtalk.go:170","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 01:33:39\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:33:39.792","caller":"service/dingtalk.go:170","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"37E3208B-1A78-792F-9E1C-2D87900BDE43\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"37E3208B-1A78-792F-9E1C-2D87900BDE43"}}
{"level":"info","timestamp":"2025-11-19 01:33:41.713","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":6}
{"level":"info","timestamp":"2025-11-19 01:33:43.020","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:34:34.451","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":68,"imageSize":48614}
{"level":"info","timestamp":"2025-11-19 01:34:34.452","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":68,"imageURL":"http://localhost:8899/images/2025/11/19/013434_9b8b09bc.png","imageSize":48614}
{"level":"warn","timestamp":"2025-11-19 01:34:34.495","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:34:34.551","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:34:34.551","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":68,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:35:42.903","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:35:42.995","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:35:42.996","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:35:42.996","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:35:43.005","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:35:43.011","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:35:43.011","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:36:03.156","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:36:03.198","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:36:04.042","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:36:04.086","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:36:04.087","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:36:04.087","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:36:04.130","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:36:04.177","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:36:15.658","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":69,"imageSize":48685}
{"level":"info","timestamp":"2025-11-19 01:36:15.658","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":69,"imageURL":"http://localhost:8899/images/2025/11/19/013615_e5ffd705.png","imageSize":48685}
{"level":"warn","timestamp":"2025-11-19 01:36:15.713","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:36:15.836","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:36:15.836","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":69,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:38:31.799","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:38:31.889","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:38:31.889","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:38:31.889","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:38:31.898","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:38:31.904","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:38:31.904","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:38:51.775","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:38:51.821","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:38:52.673","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:38:52.716","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:38:52.721","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:38:52.721","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:38:52.765","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:38:52.810","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:38:58.430","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":70,"imageSize":51507}
{"level":"info","timestamp":"2025-11-19 01:38:58.430","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":70,"imageURL":"http://localhost:8899/images/2025/11/19/013858_bb297a78.png","imageSize":51507}
{"level":"warn","timestamp":"2025-11-19 01:38:58.481","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:38:58.617","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:38:58.617","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":70,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:39:33.599","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":71,"imageSize":51507}
{"level":"info","timestamp":"2025-11-19 01:39:33.600","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":71,"imageURL":"http://localhost:8899/images/2025/11/19/013933_bb297a78.png","imageSize":51507}
{"level":"warn","timestamp":"2025-11-19 01:39:33.642","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:39:33.700","caller":"service/dingtalk.go:120","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:39:33.700","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":71,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:44:08.832","caller":"service/dingtalk.go:170","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"机器人测试\\\\n\\\\n🔔 机器人测试消息\\\\n\\\\n发送时间: 2025-11-19 01:44:08\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:44:08.890","caller":"service/dingtalk.go:170","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"2B74F5B9-49AC-75CB-9948-D01651C108BD\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"2B74F5B9-49AC-75CB-9948-D01651C108BD"}}
{"level":"info","timestamp":"2025-11-19 01:44:39.874","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":72,"imageSize":71944}
{"level":"info","timestamp":"2025-11-19 01:44:39.874","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":72,"imageURL":"http://localhost:8899/images/2025/11/19/014439_171f70f2.png","imageSize":71944}
{"level":"info","timestamp":"2025-11-19 01:44:39.970","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/014439_171f70f2.png","imageSize":71944}
{"level":"info","timestamp":"2025-11-19 01:44:39.970","caller":"service/dingtalk.go:207","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 包贝尔\\\\n报菜时间: 2025-11-19 01:44:39\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 72\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/014439_171f70f2.png)\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:44:40.019","caller":"service/dingtalk.go:207","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"EF8F3EE8-C7B9-7A9E-9079-05CAAA8ED74A\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"EF8F3EE8-C7B9-7A9E-9079-05CAAA8ED74A"}}
{"level":"error","timestamp":"2025-11-19 01:44:40.019","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":72,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:45:11.554","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":73,"imageSize":71944}
{"level":"info","timestamp":"2025-11-19 01:45:11.554","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":73,"imageURL":"http://localhost:8899/images/2025/11/19/014511_632ebe37.png","imageSize":71944}
{"level":"info","timestamp":"2025-11-19 01:45:11.650","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/014511_632ebe37.png","imageSize":71944}
{"level":"info","timestamp":"2025-11-19 01:45:11.650","caller":"service/dingtalk.go:207","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 包贝尔\\\\n报菜时间: 2025-11-19 01:45:11\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 里脊肉: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 小黄鱼: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 73\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/014511_632ebe37.png)\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:45:11.696","caller":"service/dingtalk.go:207","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"103195FC-86F6-74BB-9A54-B690001EC4FD\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"103195FC-86F6-74BB-9A54-B690001EC4FD"}}
{"level":"error","timestamp":"2025-11-19 01:45:11.696","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":73,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:45:44.052","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":74,"imageSize":71776}
{"level":"info","timestamp":"2025-11-19 01:45:44.053","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":74,"imageURL":"http://localhost:8899/images/2025/11/19/014544_2e8f4f48.png","imageSize":71776}
{"level":"info","timestamp":"2025-11-19 01:45:44.146","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/014544_2e8f4f48.png","imageSize":71776}
{"level":"info","timestamp":"2025-11-19 01:45:44.147","caller":"service/dingtalk.go:207","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-19 01:45:43\\\\n\\\\n报菜明细:\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 1\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 74\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/014544_2e8f4f48.png)\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:45:44.198","caller":"service/dingtalk.go:207","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"F8C627B9-D511-7452-8F68-416E4B3B3838\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"F8C627B9-D511-7452-8F68-416E4B3B3838"}}
{"level":"error","timestamp":"2025-11-19 01:45:44.198","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":74,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:47:20.191","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":75,"imageSize":71776}
{"level":"info","timestamp":"2025-11-19 01:47:20.192","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":75,"imageURL":"http://localhost:8899/images/2025/11/19/014720_2e8f4f48.png","imageSize":71776}
{"level":"info","timestamp":"2025-11-19 01:47:20.398","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/014720_2e8f4f48.png","imageSize":71776}
{"level":"info","timestamp":"2025-11-19 01:47:20.398","caller":"service/dingtalk.go:207","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-19 01:47:19\\\\n\\\\n报菜明细:\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 1\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 75\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/014720_2e8f4f48.png)\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:47:20.457","caller":"service/dingtalk.go:207","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"1A53818C-4B91-72C0-8E6B-DC4F4A01401E\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"1A53818C-4B91-72C0-8E6B-DC4F4A01401E"}}
{"level":"error","timestamp":"2025-11-19 01:47:20.457","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":75,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:47:37.353","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":76,"imageSize":71617}
{"level":"info","timestamp":"2025-11-19 01:47:37.354","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":76,"imageURL":"http://localhost:8899/images/2025/11/19/014737_dc939141.png","imageSize":71617}
{"level":"info","timestamp":"2025-11-19 01:47:37.465","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/014737_dc939141.png","imageSize":71617}
{"level":"info","timestamp":"2025-11-19 01:47:37.465","caller":"service/dingtalk.go:207","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-19 01:47:36\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 76\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/014737_dc939141.png)\\\"}}\",\"openConversationIds\":[\"152325012374\"],\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:47:37.521","caller":"service/dingtalk.go:207","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"3B192BAC-5154-76D6-BE6D-46C8A320BF92\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"3B192BAC-5154-76D6-BE6D-46C8A320BF92"}}
{"level":"error","timestamp":"2025-11-19 01:47:37.521","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":76,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:52:50.496","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:52:50.588","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:52:50.588","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:52:50.588","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:52:50.599","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:52:50.606","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:52:50.606","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:53:10.433","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:53:10.478","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:53:11.352","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:53:11.394","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:53:11.396","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:53:11.396","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:53:11.443","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:53:11.487","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:53:23.766","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":77,"imageSize":71617}
{"level":"info","timestamp":"2025-11-19 01:53:23.766","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":77,"imageURL":"http://localhost:8899/images/2025/11/19/015323_dc939141.png","imageSize":71617}
{"level":"info","timestamp":"2025-11-19 01:53:23.878","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/015323_dc939141.png","imageSize":71617}
{"level":"info","timestamp":"2025-11-19 01:53:23.878","caller":"service/dingtalk.go:205","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"text\\\":{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-19 01:53:23\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 小黄鱼: 数量 1\\\\n• 牛肉: 数量 1\\\\n• 里脊肉: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 77\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/015323_dc939141.png)\\\"}}\",\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:53:23.938","caller":"service/dingtalk.go:205","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"AA79E863-1A1A-72A8-9129-381A4F50E39A\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"AA79E863-1A1A-72A8-9129-381A4F50E39A"}}
{"level":"error","timestamp":"2025-11-19 01:53:23.938","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":77,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:57:29.939","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:57:30.025","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 01:57:30.025","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 01:57:30.025","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 01:57:30.035","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 01:57:30.040","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 01:57:30.040","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 01:57:50.328","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:57:50.373","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 01:57:51.254","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 01:57:51.298","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 01:57:51.304","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 01:57:51.304","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 01:57:51.351","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 01:57:51.395","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 01:58:27.624","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":78,"imageSize":58458}
{"level":"info","timestamp":"2025-11-19 01:58:27.625","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":78,"imageURL":"http://localhost:8899/images/2025/11/19/015827_4d1a3d10.png","imageSize":58458}
{"level":"info","timestamp":"2025-11-19 01:58:27.736","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/015827_4d1a3d10.png","imageSize":58458}
{"level":"info","timestamp":"2025-11-19 01:58:27.736","caller":"service/dingtalk.go:202","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 井康\\\\n报菜时间: 2025-11-19 01:58:27\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 小青菜: 数量 1\\\\n• 辣椒: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 78\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/015827_4d1a3d10.png)\\\"}\",\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:58:27.786","caller":"service/dingtalk.go:202","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"003F476D-6CAC-7FDB-89C9-41D4528359CB\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"003F476D-6CAC-7FDB-89C9-41D4528359CB"}}
{"level":"error","timestamp":"2025-11-19 01:58:27.786","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":78,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:58:53.287","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":79,"imageSize":53856}
{"level":"info","timestamp":"2025-11-19 01:58:53.287","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":79,"imageURL":"http://localhost:8899/images/2025/11/19/015853_77fd6e08.png","imageSize":53856}
{"level":"info","timestamp":"2025-11-19 01:58:53.385","caller":"service/menu_report_listener.go:111","msg":"Image saved successfully","botID":1,"imageURL":"http://localhost:8899/images/2025/11/19/015853_77fd6e08.png","imageSize":53856}
{"level":"info","timestamp":"2025-11-19 01:58:53.385","caller":"service/dingtalk.go:202","msg":"Sending stream message to DingTalk API","url":"https://api.dingtalk.com/v1.0/robot/groupMessages/send","robotCode":"dinglsqvmdgbj5xaidwz","msgKey":"sampleText","accessTokenPreview":"f15eaff2cf...","requestBody":"{\"msgKey\":\"sampleText\",\"msgParam\":\"{\\\"content\\\":\\\"📋 新报菜通知\\\\n\\\\n📋 新报菜通知\\\\n\\\\n门店名称: 千岛湖野鱼馆\\\\n操作人员: 包贝尔\\\\n报菜时间: 2025-11-19 01:58:52\\\\n\\\\n报菜明细:\\\\n• 鸡蛋: 数量 1\\\\n• 辣椒: 数量 1\\\\n\\\\n---\\\\n报菜记录单ID: 79\\\\n\\\\n![报菜明细](http://localhost:8899/images/2025/11/19/015853_77fd6e08.png)\\\"}\",\"robotCode\":\"dinglsqvmdgbj5xaidwz\"}"}
{"level":"info","timestamp":"2025-11-19 01:58:53.431","caller":"service/dingtalk.go:202","msg":"Received response from DingTalk API","statusCode":400,"responseBody":"{\"requestid\":\"5B4BB8D8-AD3D-71D2-9651-DF65F5A4E3A2\",\"code\":\"invalidParameter.param.invalid\",\"message\":\"参数不合法\"}","responseMap":{"code":"invalidParameter.param.invalid","message":"参数不合法","requestid":"5B4BB8D8-AD3D-71D2-9651-DF65F5A4E3A2"}}
{"level":"error","timestamp":"2025-11-19 01:58:53.431","caller":"events/event_bus.go:84","msg":"Failed to send menu report notification","orderID":79,"botID":1,"botType":"stream","error":"dingtalk api error: code=invalidParameter.param.invalid, msg=参数不合法","stacktrace":"github.com/Kevin-Jii/tower-go/utils/events.(*EventBus).PublishAsync.func1\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/events/event_bus.go:84"}
{"level":"info","timestamp":"2025-11-19 01:59:04.060","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":80,"imageSize":51507}
{"level":"info","timestamp":"2025-11-19 01:59:04.060","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":80,"imageURL":"http://localhost:8899/images/2025/11/19/015904_bb297a78.png","imageSize":51507}
{"level":"warn","timestamp":"2025-11-19 01:59:04.103","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 01:59:04.244","caller":"service/dingtalk.go:118","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 01:59:04.244","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":80,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:03:26.679","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:03:26.773","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:03:26.773","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:03:26.773","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:03:26.784","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:03:26.791","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:03:26.791","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:03:47.941","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:03:47.986","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:03:48.913","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 02:03:48.956","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 02:03:48.957","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 02:03:48.957","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:03:49.005","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:03:49.053","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:04:09.442","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":81,"imageSize":51507}
{"level":"info","timestamp":"2025-11-19 02:04:09.443","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":81,"imageURL":"http://localhost:8899/images/2025/11/19/020409_bb297a78.png","imageSize":51507}
{"level":"warn","timestamp":"2025-11-19 02:04:09.495","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:04:09.661","caller":"service/dingtalk.go:118","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 02:04:09.661","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":81,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:04:33.161","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:04:33.252","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:04:33.252","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:04:33.252","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:04:33.262","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:04:33.269","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:04:33.269","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:04:53.746","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:04:53.828","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:04:53.828","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:04:53.828","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:04:54.018","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-19 02:04:54.030","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-19 02:04:54.030","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-19 02:05:27.638","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:05:27.669","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"error","timestamp":"2025-11-19 02:05:29.234","caller":"seeding/seed.go:193","msg":"创建超级管理员失败","error":"Error 1062 (23000): Duplicate entry '13082848180' for key 'users.idx_users_phone'","stacktrace":"github.com/Kevin-Jii/tower-go/utils/seeding.InitSuperAdmin\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/seeding/seed.go:193\ngithub.com/Kevin-Jii/tower-go/bootstrap.AutoMigrateAndSeeds\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/migrate.go:64\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:26\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"error","timestamp":"2025-11-19 02:05:29.234","caller":"bootstrap/migrate.go:65","msg":"超级管理员初始化失败","error":"Error 1062 (23000): Duplicate entry '13082848180' for key 'users.idx_users_phone'","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.AutoMigrateAndSeeds\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/migrate.go:65\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:26\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-19 02:05:29.266","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 02:05:29.327","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 02:05:29.328","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:05:29.393","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:05:29.456","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:05:44.225","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:05:44.310","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:05:44.311","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:05:44.311","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:05:44.493","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-19 02:05:44.514","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-19 02:05:44.514","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-19 02:06:01.479","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:06:01.565","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:06:01.565","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:06:01.565","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:06:01.773","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-19 02:06:01.785","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-19 02:06:01.785","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-19 02:06:32.960","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:06:33.053","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:06:33.053","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:06:33.053","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:06:33.240","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-19 02:06:33.249","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-19 02:06:33.249","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-19 02:06:45.143","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:06:45.233","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:06:45.233","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:06:45.233","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:06:45.419","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"error","timestamp":"2025-11-19 02:06:45.427","caller":"redis/redis.go:33","msg":"Redis 连接失败","error":"WRONGPASS invalid username-password pair or user is disabled.","stacktrace":"github.com/Kevin-Jii/tower-go/utils/redis.InitRedis\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/utils/redis/redis.go:33\ngithub.com/Kevin-Jii/tower-go/bootstrap.InitRedisCache\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/redis.go:13\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:23\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"warn","timestamp":"2025-11-19 02:06:45.427","caller":"bootstrap/redis.go:14","msg":"Redis 连接失败，缓存禁用","error":"WRONGPASS invalid username-password pair or user is disabled."}
{"level":"info","timestamp":"2025-11-19 02:06:54.227","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:06:54.313","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:06:54.313","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:06:54.313","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:06:54.322","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:06:54.328","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:06:54.328","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:07:14.831","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:07:14.878","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:07:15.736","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 02:07:15.778","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 02:07:15.779","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 02:07:15.779","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:07:15.825","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:07:15.868","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:07:39.498","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:07:39.591","caller":"bootstrap/swagger.go:33","msg":"swagger 文档已自动生成"}
{"level":"info","timestamp":"2025-11-19 02:07:39.591","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:07:39.591","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:07:39.601","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:07:39.608","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:07:39.608","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:08:00.566","caller":"bootstrap/migrate.go:43","msg":"数据表迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:08:00.611","caller":"bootstrap/migrate.go:48","msg":"菜品分类数据迁移完成"}
{"level":"info","timestamp":"2025-11-19 02:08:01.540","caller":"seeding/seed.go:117","msg":"超级管理员已存在，跳过创建","user_id":999}
{"level":"info","timestamp":"2025-11-19 02:08:01.584","caller":"seeding/seed.go:269","msg":"所有门店均已具备编码"}
{"level":"info","timestamp":"2025-11-19 02:08:01.586","caller":"seeding/seed_dingtalk_menus.go:20","msg":"钉钉管理菜单已存在，跳过初始化","count":1}
{"level":"info","timestamp":"2025-11-19 02:08:01.586","caller":"bootstrap/app.go:29","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:08:01.630","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:08:01.677","caller":"bootstrap/app.go:38","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:08:26.712","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":82,"imageSize":51507}
{"level":"info","timestamp":"2025-11-19 02:08:26.714","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":82,"imageURL":"http://47.120.27.64:8899/images/2025/11/19/020826_bb297a78.png","imageSize":51507}
{"level":"warn","timestamp":"2025-11-19 02:08:26.766","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:08:26.912","caller":"service/dingtalk.go:118","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 02:08:26.913","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":82,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:11:12.001","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:11:12.001","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:11:12.001","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:11:12.010","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:11:12.016","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:11:12.016","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:11:12.016","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-19 02:11:12.016","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:11:12.018","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:11:12.063","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:11:20.463","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:11:20.464","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:11:20.464","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:11:20.472","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:11:20.479","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:11:20.479","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:11:20.479","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-19 02:11:20.479","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:11:20.480","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:11:20.523","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:15:39.187","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:15:39.188","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:15:39.188","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:15:39.198","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:15:39.205","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:15:39.205","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:15:39.205","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-19 02:15:39.205","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:15:39.207","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:15:39.250","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:15:53.950","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":83,"imageSize":52792}
{"level":"info","timestamp":"2025-11-19 02:15:53.952","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":83,"imageURL":"http://47.120.27.64:8899/images/2025/11/19/021553_19abb054.png","imageSize":52792}
{"level":"warn","timestamp":"2025-11-19 02:15:53.999","caller":"events/event_bus.go:84","msg":"Webhook mode does not support image, sending text only","botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:15:54.150","caller":"service/dingtalk.go:118","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 02:15:54.150","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":83,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 02:17:37.083","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:17:37.083","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 02:17:37.083","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 02:17:37.093","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 02:17:37.100","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 02:17:37.100","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 02:17:37.100","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-19 02:17:37.100","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 02:17:37.102","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 02:17:37.144","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-19 02:17:44.062","caller":"events/event_bus.go:84","msg":"Menu report image generated successfully","orderID":84,"imageSize":51507}
{"level":"info","timestamp":"2025-11-19 02:17:44.063","caller":"events/event_bus.go:84","msg":"Image saved to file system","orderID":84,"imageURL":"http://47.120.27.64:8899/images/2025/11/19/021744_bb297a78.png","imageSize":51507}
{"level":"info","timestamp":"2025-11-19 02:17:44.117","caller":"events/event_bus.go:84","msg":"Added image link to webhook message","botID":7,"imageURL":"http://47.120.27.64:8899/images/2025/11/19/021744_bb297a78.png"}
{"level":"info","timestamp":"2025-11-19 02:17:44.257","caller":"service/dingtalk.go:118","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-11-19 02:17:44.257","caller":"events/event_bus.go:84","msg":"Menu report notification sent successfully","orderID":84,"botID":7,"botName":"江西小炒_机器人7"}
{"level":"info","timestamp":"2025-11-19 21:58:25.260","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-19 21:58:25.261","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-19 21:58:25.261","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-19 21:58:25.320","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-19 21:58:25.336","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-19 21:58:25.336","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-19 21:58:25.336","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-19 21:58:25.336","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-19 21:58:25.348","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-19 21:58:25.393","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-11-30 23:10:30.403","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-30 23:10:30.404","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-30 23:10:30.404","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"fatal","timestamp":"2025-11-30 23:10:30.409","caller":"bootstrap/database.go:14","msg":"数据库连接失败","error":"dial tcp [::1]:3306: connectex: An attempt was made to access a socket in a way forbidden by its access permissions.","stacktrace":"github.com/Kevin-Jii/tower-go/bootstrap.InitDatabase\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/database.go:14\ngithub.com/Kevin-Jii/tower-go/bootstrap.Run\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/bootstrap/app.go:24\nmain.main\n\tC:/Users/Administrator/Desktop/xdAdmin/tower-go/cmd/main.go:29\nruntime.main\n\tC:/Program Files/Application/go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2025-11-30 23:11:59.185","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-30 23:11:59.185","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-30 23:11:59.186","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-30 23:11:59.198","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-30 23:11:59.205","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-30 23:11:59.205","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-30 23:11:59.205","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-30 23:11:59.205","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-30 23:11:59.232","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-30 23:11:59.233","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"error","timestamp":"2025-11-30 23:12:04.237","caller":"runtime/asm_amd64.s:1693","msg":"Stream client start failed","botID":1,"botName":"全局Stream机器人(自动创建)","error":"Post \"https://api.dingtalk.com/v1.0/gateway/connections/open\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)","stacktrace":"runtime.goexit\n\tC:/Program Files/Application/go/src/runtime/asm_amd64.s:1693"}
{"level":"info","timestamp":"2025-11-30 23:21:18.560","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-11-30 23:21:18.561","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-11-30 23:21:18.561","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-11-30 23:21:18.569","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-11-30 23:21:18.575","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-11-30 23:21:18.575","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-11-30 23:21:18.575","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-11-30 23:21:18.575","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-11-30 23:21:18.587","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-11-30 23:21:18.588","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 02:13:18.286","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:13:18.287","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 02:13:18.287","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 02:13:18.297","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 02:13:18.304","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 02:13:18.304","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 02:13:18.304","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 02:13:18.304","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:13:18.314","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 02:13:18.316","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 02:14:58.328","caller":"service/dingtalk.go:118","msg":"DingTalk message sent successfully","botID":7}
{"level":"info","timestamp":"2025-12-01 02:25:50.812","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:25:50.813","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 02:25:50.813","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 02:25:50.823","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 02:25:50.830","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 02:25:50.830","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 02:25:50.830","caller":"bootstrap/migrate.go:17","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 02:25:50.830","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:25:50.841","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 02:25:50.842","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 02:39:42.673","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:39:42.674","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 02:39:42.674","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 02:39:42.684","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 02:39:42.690","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 02:39:42.690","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 02:39:42.690","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 02:39:42.690","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:39:42.701","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 02:39:42.702","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 02:46:04.360","caller":"utils/employee.go:46","msg":"生成新工号"}
{"level":"info","timestamp":"2025-12-01 02:53:32.197","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:53:32.198","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 02:53:32.199","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 02:53:32.208","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 02:53:32.213","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 02:53:32.213","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 02:53:32.213","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 02:53:32.213","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 02:53:32.226","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 02:53:32.227","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 03:38:02.478","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 03:38:02.479","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 03:38:02.479","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 03:38:02.488","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 03:38:02.495","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 03:38:02.495","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 03:38:02.495","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 03:38:02.495","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 03:38:02.507","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 03:38:02.509","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 03:39:24.194","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 03:39:24.194","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 03:39:24.195","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 03:39:24.204","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 03:39:24.211","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 03:39:24.211","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 03:39:24.211","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 03:39:24.211","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 03:39:24.222","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 03:39:24.223","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
{"level":"info","timestamp":"2025-12-01 03:40:01.759","caller":"bootstrap/logger.go:23","msg":"日志系统初始化完成"}
{"level":"info","timestamp":"2025-12-01 03:40:01.760","caller":"bootstrap/config.go:22","msg":"使用环境变量端口","port":10024}
{"level":"info","timestamp":"2025-12-01 03:40:01.761","caller":"bootstrap/config.go:25","msg":"配置加载完成"}
{"level":"info","timestamp":"2025-12-01 03:40:01.771","caller":"bootstrap/database.go:16","msg":"数据库连接成功"}
{"level":"info","timestamp":"2025-12-01 03:40:01.777","caller":"redis/redis.go:39","msg":"Redis 连接成功","addr":"localhost:6379"}
{"level":"info","timestamp":"2025-12-01 03:40:01.777","caller":"bootstrap/redis.go:18","msg":"Redis 缓存已启用"}
{"level":"info","timestamp":"2025-12-01 03:40:01.777","caller":"bootstrap/migrate.go:16","msg":"跳过数据库迁移（SKIP_AUTO_MIGRATE=1）"}
{"level":"info","timestamp":"2025-12-01 03:40:01.777","caller":"bootstrap/app.go:31","msg":"会话管理初始化完成"}
{"level":"info","timestamp":"2025-12-01 03:40:01.793","caller":"bootstrap/stream.go:20","msg":"⏭️ Stream bot already exists, skipping creation","count":1}
{"level":"info","timestamp":"2025-12-01 03:40:01.794","caller":"bootstrap/app.go:40","msg":"Stream clients initialized","total":1,"success":1}
