# Tower Desktop App - é¡¹ç›®ç»“æ„

## ğŸ“ é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ main.dart                          # åº”ç”¨å…¥å£ï¼ˆä»…å¯åŠ¨ï¼‰
â”œâ”€â”€ app.dart                           # åº”ç”¨æ ¹ç»„ä»¶ï¼ˆProvider & ä¸»é¢˜é…ç½®ï¼‰
â”‚
â”œâ”€â”€ core/                              # æ ¸å¿ƒå±‚
â”‚   â”œâ”€â”€ network/
â”‚   â”‚   â””â”€â”€ api_client.dart           # ç»Ÿä¸€ API å®¢æˆ·ç«¯ï¼ˆDioå°è£…ï¼‰
â”‚   â””â”€â”€ widgets/
â”‚       â””â”€â”€ permission_gate.dart      # æƒé™é—¨æ§ç»„ä»¶
â”‚
â””â”€â”€ features/                          # åŠŸèƒ½æ¨¡å—å±‚
    â”œâ”€â”€ auth/                          # è®¤è¯æ¨¡å—
    â”‚   â”œâ”€â”€ auth_api.dart             # è®¤è¯ API
    â”‚   â”œâ”€â”€ login_screen.dart         # ç™»å½•é¡µé¢
    â”‚   â”œâ”€â”€ models.dart               # è®¤è¯ç›¸å…³æ¨¡å‹
    â”‚   â”œâ”€â”€ models.freezed.dart       # Freezed ç”Ÿæˆä»£ç 
    â”‚   â”œâ”€â”€ models.g.dart             # JsonSerializable ç”Ÿæˆä»£ç 
    â”‚   â””â”€â”€ session_manager.dart      # ä¼šè¯ç®¡ç†å™¨ï¼ˆå•ä¾‹ï¼‰
    â”‚
    â”œâ”€â”€ home/                          # ä¸»é¡µæ¨¡å—
    â”‚   â”œâ”€â”€ home_screen.dart          # ä¸»é¡µé¢ï¼ˆåŒ…å«èœå•æ ‘ + å†…å®¹åŒºï¼‰
    â”‚   â””â”€â”€ widgets/
    â”‚       â””â”€â”€ menu_content.dart     # èœå•å†…å®¹å±•ç¤ºç»„ä»¶
    â”‚
    â”œâ”€â”€ menu/                          # èœå•æ¨¡å—
    â”‚   â”œâ”€â”€ menu_api.dart             # èœå• API
    â”‚   â”œâ”€â”€ menu_provider.dart        # èœå•çŠ¶æ€ç®¡ç†
    â”‚   â”œâ”€â”€ menu_tree.dart            # èœå•æ ‘ç»„ä»¶
    â”‚   â”œâ”€â”€ models.dart               # èœå•æ¨¡å‹
    â”‚   â””â”€â”€ models.freezed.dart       # Freezed ç”Ÿæˆä»£ç 
    â”‚
    â”œâ”€â”€ dish/                          # èœå“æ¨¡å—
    â”‚   â”œâ”€â”€ dish_api.dart
    â”‚   â””â”€â”€ models.dart
    â”‚
    â”œâ”€â”€ store/                         # é—¨åº—æ¨¡å—
    â”‚   â”œâ”€â”€ store_api.dart
    â”‚   â””â”€â”€ models.dart
    â”‚
    â”œâ”€â”€ report/                        # æŠ¥è¡¨æ¨¡å—
    â”‚   â”œâ”€â”€ report_api.dart
    â”‚   â””â”€â”€ models.dart
    â”‚
    â””â”€â”€ common/                        # é€šç”¨æ¨¡å—
        â””â”€â”€ base_response.dart         # é€šç”¨å“åº”å°è£…
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### åˆ†å±‚æ¶æ„

1. **å…¥å£å±‚** (`main.dart`)
   - ä»…è´Ÿè´£å¯åŠ¨åº”ç”¨
   - ä¿æŒæœ€å°åŒ–ï¼Œä¾¿äºæµ‹è¯•å’Œç»´æŠ¤

2. **åº”ç”¨å±‚** (`app.dart`)
   - é…ç½®å…¨å±€ Provider
   - åº”ç”¨ä¸»é¢˜é…ç½®
   - è·¯ç”±åˆå§‹åŒ–

3. **æ ¸å¿ƒå±‚** (`core/`)
   - `network/`: ç½‘ç»œè¯·æ±‚å°è£…
   - `widgets/`: å…¨å±€é€šç”¨ç»„ä»¶
   - è·¨åŠŸèƒ½æ¨¡å—çš„åŸºç¡€è®¾æ–½

4. **åŠŸèƒ½å±‚** (`features/`)
   - æŒ‰ä¸šåŠ¡åŠŸèƒ½åˆ’åˆ†æ¨¡å—
   - æ¯ä¸ªæ¨¡å—åŒ…å«ï¼šAPIã€UIã€æ¨¡å‹ã€çŠ¶æ€ç®¡ç†
   - æ¨¡å—é—´ä½è€¦åˆï¼Œæ˜“äºæ‰©å±•

### æ¨¡å—èŒè´£

#### Auth æ¨¡å—
- ç”¨æˆ·ç™»å½•/ç™»å‡º
- ä¼šè¯ç®¡ç†ï¼ˆTokenã€ç”¨æˆ·ä¿¡æ¯ã€æƒé™ï¼‰
- JWT Token è‡ªåŠ¨æ³¨å…¥

#### Home æ¨¡å—
- ä¸»é¡µå¸ƒå±€ï¼ˆèœå• + å†…å®¹åŒºï¼‰
- é€€å‡ºç™»å½•åŠŸèƒ½
- èœå•å†…å®¹è·¯ç”±

#### Menu æ¨¡å—
- èœå•æ•°æ®åŠ è½½
- èœå•æ ‘çŠ¶ç»“æ„æ¸²æŸ“
- èœå•é€‰æ‹©çŠ¶æ€ç®¡ç†
- åŸºäºè§’è‰²å’Œé—¨åº—çš„æƒé™è¿‡æ»¤

#### Dish/Store/Report æ¨¡å—
- å„è‡ªä¸šåŠ¡é€»è¾‘
- å¾…è¿›ä¸€æ­¥å®ç°

## ğŸ”§ æŠ€æœ¯æ ˆ

- **UI æ¡†æ¶**: Flutter (Desktop)
- **çŠ¶æ€ç®¡ç†**: Provider
- **ç½‘ç»œè¯·æ±‚**: Dio
- **æ•°æ®åºåˆ—åŒ–**: Freezed + json_serializable
- **UI ç»„ä»¶åº“**: TDesign Flutter

## ğŸ“ å¼€å‘è§„èŒƒ

### æ–‡ä»¶å‘½å
- ä½¿ç”¨ `snake_case.dart`
- æ¨¡å‹æ–‡ä»¶ç»Ÿä¸€å‘½åä¸º `models.dart`
- é¡µé¢æ–‡ä»¶ä»¥ `_screen.dart` ç»“å°¾
- API æ–‡ä»¶ä»¥ `_api.dart` ç»“å°¾

### ä»£ç ç”Ÿæˆ
```bash
# ç›‘å¬æ¨¡å¼ï¼ˆå¼€å‘æ—¶ï¼‰
dart run build_runner watch

# ä¸€æ¬¡æ€§ç”Ÿæˆï¼ˆæäº¤å‰ï¼‰
dart run build_runner build --delete-conflicting-outputs
```

### æ¨¡å—æ·»åŠ æ­¥éª¤
1. åœ¨ `features/` ä¸‹åˆ›å»ºæ–°æ¨¡å—æ–‡ä»¶å¤¹
2. åˆ›å»º `models.dart` å®šä¹‰æ•°æ®æ¨¡å‹
3. åˆ›å»º `*_api.dart` å®šä¹‰ API æ¥å£
4. åˆ›å»º `*_screen.dart` å®ç°é¡µé¢
5. å¦‚éœ€çŠ¶æ€ç®¡ç†ï¼Œæ·»åŠ  `*_provider.dart`
6. åœ¨ `home_screen.dart` ä¸­æ³¨å†Œè·¯ç”±

## ğŸš€ è¿è¡Œé¡¹ç›®

```bash
# å¼€å‘æ¨¡å¼
flutter run -d windows

# æ„å»ºå‘å¸ƒç‰ˆ
flutter build windows --release
```

## ğŸ“¦ ä¾èµ–è¯´æ˜

### æ ¸å¿ƒä¾èµ–
- `dio`: HTTP å®¢æˆ·ç«¯
- `provider`: çŠ¶æ€ç®¡ç†
- `freezed_annotation` / `json_annotation`: æ•°æ®æ¨¡å‹æ³¨è§£

### å¼€å‘ä¾èµ–
- `build_runner`: ä»£ç ç”Ÿæˆå™¨
- `freezed`: ä¸å¯å˜æ•°æ®ç±»ç”Ÿæˆ
- `json_serializable`: JSON åºåˆ—åŒ–ç”Ÿæˆ

### UI ä¾èµ–
- `tdesign_flutter`: è…¾è®¯ TDesign UI ç»„ä»¶åº“

## ğŸ” è®¤è¯æµç¨‹

1. ç”¨æˆ·è¾“å…¥æ‰‹æœºå·å’Œå¯†ç 
2. è°ƒç”¨ `/auth/login` æ¥å£
3. è·å– JWT Token å’Œç”¨æˆ·ä¿¡æ¯ï¼ˆåŒ…å«è§’è‰²ã€é—¨åº—ç­‰ï¼‰
4. åŠ è½½ç”¨æˆ·æƒé™åˆ—è¡¨
5. å­˜å‚¨åˆ° `SessionManager`ï¼ˆå•ä¾‹ï¼‰
6. è‡ªåŠ¨æ³¨å…¥ Token åˆ°åç»­è¯·æ±‚å¤´
7. åŠ è½½èœå•å¹¶è·³è½¬åˆ°ä¸»é¡µ

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

- [ ] å®ç°èœå“ç®¡ç†é¡µé¢
- [ ] å®ç°é—¨åº—ç®¡ç†é¡µé¢
- [ ] å®ç°æŠ¥è¡¨æŸ¥çœ‹é¡µé¢
- [ ] æ·»åŠ è·¯ç”±ç®¡ç†ï¼ˆè€ƒè™‘ä½¿ç”¨ go_routerï¼‰
- [ ] å®Œå–„é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] å®Œå–„ BaseResponse æ³›å‹å°è£…
