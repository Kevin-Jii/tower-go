basePath: /api/v1
definitions:
  controller.LoginRequest:
    properties:
      password:
        description: 密码至少6位
        minLength: 6
        type: string
      phone:
        description: 手机号必须是11位
        type: string
    required:
    - password
    - phone
    type: object
  controller.LoginResponse:
    properties:
      expires_in:
        description: 过期时间（秒）
        type: integer
      strategy:
        description: 会话策略 single/multi
        type: string
      token:
        type: string
      token_type:
        description: 固定 "Bearer"
        type: string
      user_info:
        $ref: '#/definitions/model.User'
    type: object
  http.Response:
    properties:
      code:
        type: integer
      data: {}
      error:
        type: string
      message:
        type: string
    type: object
  model.AssignMenusToRoleReq:
    properties:
      menu_ids:
        items:
          type: integer
        type: array
      perms:
        additionalProperties:
          format: int32
          type: integer
        description: 菜单ID -> 权限位映射
        type: object
      role_id:
        type: integer
    required:
    - menu_ids
    - role_id
    type: object
  model.AssignStoreMenusReq:
    properties:
      menu_ids:
        items:
          type: integer
        type: array
      perms:
        additionalProperties:
          format: int32
          type: integer
        description: 菜单ID -> 权限位映射
        type: object
      role_id:
        type: integer
      store_id:
        type: integer
    required:
    - menu_ids
    - role_id
    - store_id
    type: object
  model.BindStoreSupplierReq:
    properties:
      product_ids:
        items:
          type: integer
        minItems: 1
        type: array
      store_id:
        type: integer
    required:
    - product_ids
    - store_id
    type: object
  model.CopyStoreMenusReq:
    properties:
      from_store_id:
        type: integer
      role_id:
        type: integer
      to_store_id:
        type: integer
    required:
    - from_store_id
    - role_id
    - to_store_id
    type: object
  model.CreateDingTalkBotReq:
    properties:
      agent_id:
        description: stream 模式推送消息用
        type: string
      bot_type:
        description: webhook 或 stream (默认 webhook)
        enum:
        - webhook
        - stream
        type: string
      client_id:
        description: stream 模式必填
        type: string
      client_secret:
        description: stream 模式必填
        type: string
      is_enabled:
        type: boolean
      msg_type:
        type: string
      name:
        description: 可选，如果不提供则自动生成（门店名称_机器人ID）
        type: string
      remark:
        type: string
      robot_code:
        description: 钉钉机器人编码(robotCode)
        type: string
      secret:
        description: webhook 模式可选
        type: string
      store_id:
        type: integer
      webhook:
        description: webhook 模式必填
        type: string
    type: object
  model.CreateDishCategoryReq:
    properties:
      code:
        type: string
      name:
        type: string
      remark:
        type: string
      sort:
        type: integer
    required:
    - name
    type: object
  model.CreateDishReq:
    properties:
      category_id:
        type: integer
      image:
        type: string
      name:
        type: string
      price:
        type: number
      remark:
        type: string
    required:
    - name
    - price
    type: object
  model.CreateMenuReportOrderReq:
    properties:
      items:
        items:
          $ref: '#/definitions/model.MenuReportItemReq'
        minItems: 1
        type: array
      remark:
        type: string
    required:
    - items
    type: object
  model.CreateMenuReportReq:
    properties:
      dish_id:
        type: integer
      quantity:
        type: integer
      remark:
        type: string
    required:
    - dish_id
    - quantity
    type: object
  model.CreateMenuReq:
    properties:
      component:
        type: string
      icon:
        type: string
      name:
        type: string
      parent_id:
        type: integer
      path:
        type: string
      permission:
        type: string
      remark:
        type: string
      sort:
        type: integer
      status:
        enum:
        - 0
        - 1
        type: integer
      title:
        type: string
      type:
        enum:
        - 1
        - 2
        - 3
        type: integer
      visible:
        enum:
        - 0
        - 1
        type: integer
    required:
    - name
    - title
    - type
    type: object
  model.CreatePurchaseOrderItemReq:
    properties:
      product_id:
        type: integer
      quantity:
        type: number
      remark:
        maxLength: 200
        type: string
    required:
    - product_id
    - quantity
    type: object
  model.CreatePurchaseOrderReq:
    properties:
      items:
        items:
          $ref: '#/definitions/model.CreatePurchaseOrderItemReq'
        minItems: 1
        type: array
      order_date:
        description: '格式: 2024-01-01'
        type: string
      remark:
        maxLength: 500
        type: string
    required:
    - items
    - order_date
    type: object
  model.CreateStoreReq:
    properties:
      address:
        type: string
      business_hours:
        type: string
      contact_person:
        type: string
      name:
        type: string
      phone:
        type: string
      remark:
        type: string
    required:
    - name
    type: object
  model.CreateSupplierCategoryReq:
    properties:
      name:
        maxLength: 100
        type: string
      sort:
        type: integer
      supplier_id:
        type: integer
    required:
    - name
    - supplier_id
    type: object
  model.CreateSupplierProductReq:
    properties:
      category_id:
        type: integer
      name:
        maxLength: 200
        type: string
      price:
        minimum: 0
        type: number
      remark:
        maxLength: 500
        type: string
      spec:
        maxLength: 100
        type: string
      supplier_id:
        type: integer
      unit:
        maxLength: 20
        type: string
    required:
    - category_id
    - name
    - supplier_id
    - unit
    type: object
  model.CreateSupplierReq:
    properties:
      contact_email:
        maxLength: 100
        type: string
      contact_person:
        maxLength: 100
        type: string
      contact_phone:
        maxLength: 20
        type: string
      remark:
        type: string
      supplier_address:
        maxLength: 500
        type: string
      supplier_code:
        maxLength: 50
        type: string
      supplier_name:
        maxLength: 200
        type: string
    required:
    - supplier_code
    - supplier_name
    type: object
  model.CreateUserReq:
    properties:
      email:
        description: 可选，但如果提供则必须是有效的邮箱
        type: string
      gender:
        description: 1男 2女，未传使用默认1
        enum:
        - 1
        - 2
        type: integer
      nickname:
        type: string
      password:
        description: 密码至少6位
        minLength: 6
        type: string
      phone:
        description: 手机号验证
        type: string
      role_id:
        description: 角色ID，不传默认普通员工
        type: integer
      username:
        description: 强制要求非空
        type: string
    required:
    - password
    - phone
    - username
    type: object
  model.DingTalkBot:
    properties:
      agent_id:
        description: 应用 AgentId (stream 模式推送消息用)
        type: string
      bot_type:
        description: '机器人类型: webhook, stream'
        type: string
      client_id:
        description: AppKey/SuiteKey (stream 模式)
        type: string
      client_secret:
        description: AppSecret/SuiteSecret (stream 模式)
        type: string
      created_at:
        type: string
      id:
        type: integer
      is_enabled:
        description: 是否启用
        type: boolean
      msg_type:
        description: '消息类型: text, markdown'
        type: string
      name:
        description: 机器人名称
        type: string
      remark:
        description: 备注
        type: string
      robot_code:
        description: 钉钉机器人编码(robotCode)
        type: string
      secret:
        description: 签名密钥（webhook 模式）
        type: string
      store:
        allOf:
        - $ref: '#/definitions/model.Store'
        description: 门店关联
      store_id:
        description: 所属门店（null 表示全局）
        type: integer
      updated_at:
        type: string
      webhook:
        description: Webhook 地址（webhook 模式）
        type: string
    type: object
  model.Dish:
    properties:
      category_id:
        description: 分类ID (复合唯一的一部分)
        type: integer
      category_ref:
        allOf:
        - $ref: '#/definitions/model.DishCategory'
        description: 分类关联
      id:
        type: integer
      image:
        description: 图片URL
        type: string
      name:
        description: 菜品名称（同门店同分类唯一）
        type: string
      price:
        description: 价格
        type: number
      remark:
        description: 备注
        type: string
      status:
        description: 状态：1=上架，2=下架
        type: integer
      store:
        allOf:
        - $ref: '#/definitions/model.Store'
        description: 门店关联
      store_id:
        description: 所属门店 ID (复合唯一的一部分)
        type: integer
    type: object
  model.DishCategory:
    properties:
      code:
        description: 可选的编码（全局唯一）
        type: string
      dishes:
        description: 关联菜品
        items:
          $ref: '#/definitions/model.Dish'
        type: array
      id:
        type: integer
      name:
        description: 分类名称（同门店唯一）
        type: string
      remark:
        description: 备注
        type: string
      sort:
        description: 排序（升序）
        type: integer
      status:
        description: 1=启用 0=禁用
        type: integer
      store_id:
        description: 所属门店（与 name 组成唯一）
        type: integer
    type: object
  model.Menu:
    properties:
      children:
        description: 关联
        items:
          $ref: '#/definitions/model.Menu'
        type: array
      component:
        type: string
      created_at:
        type: string
      icon:
        type: string
      id:
        type: integer
      name:
        type: string
      parent_id:
        type: integer
      path:
        type: string
      permission:
        type: string
      permissions:
        description: 用户对该菜单的权限（运行时填充）
        type: integer
      remark:
        type: string
      sort:
        type: integer
      status:
        type: integer
      title:
        type: string
      type:
        type: integer
      updated_at:
        type: string
      visible:
        type: integer
    type: object
  model.MenuReport:
    properties:
      created_at:
        type: string
      dish_id:
        type: integer
      id:
        type: integer
      quantity:
        type: integer
      remark:
        type: string
      store_id:
        type: integer
      updated_at:
        type: string
      user_id:
        type: integer
    type: object
  model.MenuReportItem:
    properties:
      created_at:
        description: 添加时间索引用于统计查询
        type: string
      dish:
        allOf:
        - $ref: '#/definitions/model.Dish'
        description: 菜品关联
      dish_id:
        description: 菜品 ID（复合索引+单独索引）
        type: integer
      id:
        type: integer
      quantity:
        description: 报菜数量
        type: integer
      remark:
        description: 备注
        type: string
      report_order:
        allOf:
        - $ref: '#/definitions/model.MenuReportOrder'
        description: 报菜记录单关联
      report_order_id:
        description: 报菜记录单 ID（复合索引）
        type: integer
      updated_at:
        type: string
    type: object
  model.MenuReportItemReq:
    properties:
      dish_id:
        type: integer
      quantity:
        type: integer
      remark:
        type: string
    required:
    - dish_id
    - quantity
    type: object
  model.MenuReportOrder:
    properties:
      created_at:
        type: string
      id:
        type: integer
      items:
        description: 报菜详情列表
        items:
          $ref: '#/definitions/model.MenuReportItem'
        type: array
      remark:
        description: 备注
        type: string
      store:
        allOf:
        - $ref: '#/definitions/model.Store'
        description: 门店关联
      store_id:
        description: 所属门店 ID
        type: integer
      updated_at:
        type: string
      user:
        allOf:
        - $ref: '#/definitions/model.User'
        description: 操作员关联
      user_id:
        description: 操作员 ID
        type: integer
    type: object
  model.MenuReportStats:
    properties:
      avg_qty:
        description: 平均数量
        type: number
      category:
        type: string
      dish_id:
        type: integer
      dish_name:
        type: string
      total_days:
        description: 报菜天数
        type: integer
      total_qty:
        description: 总数量
        type: integer
    type: object
  model.PurchaseOrder:
    properties:
      created_at:
        type: string
      created_by:
        type: integer
      creator:
        $ref: '#/definitions/model.User'
      id:
        type: integer
      items:
        items:
          $ref: '#/definitions/model.PurchaseOrderItem'
        type: array
      order_date:
        type: string
      order_no:
        type: string
      remark:
        type: string
      status:
        type: integer
      store:
        $ref: '#/definitions/model.Store'
      store_id:
        type: integer
      total_amount:
        type: number
      updated_at:
        type: string
    type: object
  model.PurchaseOrderItem:
    properties:
      amount:
        type: number
      created_at:
        type: string
      id:
        type: integer
      order_id:
        type: integer
      product:
        $ref: '#/definitions/model.SupplierProduct'
      product_id:
        type: integer
      quantity:
        type: number
      remark:
        type: string
      supplier:
        $ref: '#/definitions/model.Supplier'
      supplier_id:
        type: integer
      unit_price:
        type: number
      updated_at:
        type: string
    type: object
  model.ReorderDishCategoriesReq:
    properties:
      items:
        items:
          $ref: '#/definitions/model.ReorderDishCategoryItem'
        type: array
    required:
    - items
    type: object
  model.ReorderDishCategoryItem:
    properties:
      id:
        type: integer
      sort:
        type: integer
    required:
    - id
    type: object
  model.Role:
    properties:
      code:
        description: 角色代码：admin(总部管理员), store_admin(门店管理员), staff(普通员工)
        type: string
      created_at:
        type: string
      description:
        description: 角色描述
        type: string
      id:
        type: integer
      name:
        description: 角色名称
        type: string
      status:
        description: 状态：1=启用 0=禁用
        type: integer
      updated_at:
        type: string
    type: object
  model.SetDefaultSupplierReq:
    properties:
      product_id:
        type: integer
      store_id:
        type: integer
    required:
    - product_id
    - store_id
    type: object
  model.Store:
    properties:
      address:
        description: 门店地址
        type: string
      business_hours:
        description: 营业时间
        type: string
      contact_person:
        description: 联系人
        type: string
      created_at:
        type: string
      id:
        type: integer
      name:
        description: 门店名称
        type: string
      phone:
        description: 联系电话
        type: string
      remark:
        description: 备注
        type: string
      status:
        description: 状态：1=正常，2=停业
        type: integer
      store_code:
        description: 门店编码 JWXXXX
        type: string
      updated_at:
        type: string
    type: object
  model.StoreSupplierProduct:
    properties:
      created_at:
        type: string
      id:
        type: integer
      is_default:
        type: boolean
      product:
        $ref: '#/definitions/model.SupplierProduct'
      product_id:
        type: integer
      store:
        $ref: '#/definitions/model.Store'
      store_id:
        type: integer
      updated_at:
        type: string
    type: object
  model.Supplier:
    properties:
      contact_email:
        type: string
      contact_person:
        type: string
      contact_phone:
        type: string
      created_at:
        type: string
      id:
        type: integer
      remark:
        type: string
      status:
        type: integer
      supplier_address:
        type: string
      supplier_code:
        type: string
      supplier_name:
        type: string
      updated_at:
        type: string
    type: object
  model.SupplierCategory:
    properties:
      created_at:
        type: string
      id:
        type: integer
      name:
        type: string
      sort:
        type: integer
      status:
        type: integer
      supplier:
        $ref: '#/definitions/model.Supplier'
      supplier_id:
        type: integer
      updated_at:
        type: string
    type: object
  model.SupplierProduct:
    properties:
      category:
        $ref: '#/definitions/model.SupplierCategory'
      category_id:
        type: integer
      created_at:
        type: string
      id:
        type: integer
      name:
        type: string
      price:
        type: number
      remark:
        type: string
      spec:
        type: string
      status:
        type: integer
      supplier:
        $ref: '#/definitions/model.Supplier'
      supplier_id:
        type: integer
      unit:
        type: string
      updated_at:
        type: string
    type: object
  model.UpdateDingTalkBotReq:
    properties:
      agent_id:
        type: string
      bot_type:
        type: string
      client_id:
        type: string
      client_secret:
        type: string
      is_enabled:
        type: boolean
      msg_type:
        type: string
      name:
        type: string
      remark:
        type: string
      robot_code:
        type: string
      secret:
        type: string
      store_id:
        type: integer
      webhook:
        type: string
    type: object
  model.UpdateDishCategoryReq:
    properties:
      code:
        type: string
      name:
        type: string
      remark:
        type: string
      sort:
        type: integer
      status:
        type: integer
    type: object
  model.UpdateDishReq:
    properties:
      category_id:
        type: integer
      image:
        type: string
      name:
        type: string
      price:
        type: number
      remark:
        type: string
      status:
        type: integer
    type: object
  model.UpdateMenuReportOrderReq:
    properties:
      remark:
        type: string
    type: object
  model.UpdateMenuReportReq:
    properties:
      dish_id:
        type: integer
      quantity:
        type: integer
      remark:
        type: string
    type: object
  model.UpdateMenuReq:
    properties:
      component:
        type: string
      icon:
        type: string
      name:
        type: string
      parent_id:
        type: integer
      path:
        type: string
      permission:
        type: string
      remark:
        type: string
      sort:
        type: integer
      status:
        enum:
        - 0
        - 1
        type: integer
      title:
        type: string
      type:
        enum:
        - 1
        - 2
        - 3
        type: integer
      visible:
        enum:
        - 0
        - 1
        type: integer
    type: object
  model.UpdatePurchaseOrderReq:
    properties:
      remark:
        maxLength: 500
        type: string
      status:
        enum:
        - 1
        - 2
        - 3
        - 4
        type: integer
    type: object
  model.UpdateRoleReq:
    properties:
      code:
        description: 角色代码（可选）
        type: string
      description:
        description: 允许清空描述
        type: string
      name:
        description: 角色名称（可选）
        type: string
      status:
        description: 允许更新为0（禁用）
        type: integer
    type: object
  model.UpdateStoreReq:
    properties:
      address:
        description: 允许清空地址
        type: string
      business_hours:
        description: 允许清空营业时间
        type: string
      contact_person:
        description: 允许清空联系人
        type: string
      name:
        description: 名称不允许置空，保持非指针
        type: string
      phone:
        description: 允许清空电话
        type: string
      remark:
        description: 允许清空备注
        type: string
      status:
        description: 允许更新为0或2（指针已可）加 tag 标识意图
        type: integer
    type: object
  model.UpdateSupplierCategoryReq:
    properties:
      name:
        maxLength: 100
        type: string
      sort:
        type: integer
      status:
        enum:
        - 0
        - 1
        type: integer
    type: object
  model.UpdateSupplierProductReq:
    properties:
      category_id:
        type: integer
      name:
        maxLength: 200
        type: string
      price:
        minimum: 0
        type: number
      remark:
        maxLength: 500
        type: string
      spec:
        maxLength: 100
        type: string
      status:
        enum:
        - 0
        - 1
        type: integer
      unit:
        maxLength: 20
        type: string
    type: object
  model.UpdateSupplierReq:
    properties:
      contact_email:
        maxLength: 100
        type: string
      contact_person:
        maxLength: 100
        type: string
      contact_phone:
        maxLength: 20
        type: string
      remark:
        type: string
      status:
        enum:
        - 0
        - 1
        type: integer
      supplier_address:
        maxLength: 500
        type: string
      supplier_code:
        maxLength: 50
        type: string
      supplier_name:
        maxLength: 200
        type: string
    type: object
  model.UpdateUserReq:
    properties:
      email:
        type: string
      gender:
        description: 性别：1男 2女
        enum:
        - 1
        - 2
        type: integer
      nickname:
        type: string
      password:
        minLength: 6
        type: string
      phone:
        type: string
      role_id:
        description: 角色ID
        type: integer
      status:
        description: 账号状态：1=正常，2=禁用
        type: integer
      store_id:
        description: 门店ID（仅管理员可修改）
        type: integer
      username:
        type: string
    type: object
  model.User:
    properties:
      created_at:
        type: string
      email:
        type: string
      employee_no:
        description: 工号，6位数字
        type: string
      gender:
        description: 性别：1=男，2=女
        type: integer
      id:
        type: integer
      last_login_at:
        description: 记录最后登录时间（仅后端维护）
        type: string
      nickname:
        type: string
      phone:
        type: string
      role:
        allOf:
        - $ref: '#/definitions/model.Role'
        description: 角色关联
      role_id:
        description: '--- 权限管理 (RBAC) ---'
        type: integer
      status:
        description: '--- 状态与安全管理 ---'
        type: integer
      store:
        allOf:
        - $ref: '#/definitions/model.Store'
        description: 门店关联
      store_id:
        description: '--- 门店关联 ---'
        type: integer
      updated_at:
        type: string
      username:
        type: string
    type: object
host: localhost:10024
info:
  contact:
    email: jeckwell@126.com
    name: API Support
    url: http://www.swagger.io/support
  description: Tower Go 用户管理系统 API 文档
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Tower Go API
  version: "1.0"
paths:
  /auth/login:
    post:
      consumes:
      - application/json
      description: 用户登录并获取token
      parameters:
      - description: 登录信息
        in: body
        name: login
        required: true
        schema:
          $ref: '#/definitions/controller.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 登录成功返回 token、token_type=Bearer、expires_in(秒)
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/controller.LoginResponse'
              type: object
      summary: 用户登录
      tags:
      - auth
  /auth/register:
    post:
      consumes:
      - application/json
      description: 创建新用户账户
      parameters:
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/model.CreateUserReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      summary: 用户注册
      tags:
      - auth
  /dingtalk-bots:
    get:
      consumes:
      - application/json
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.DingTalkBot'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取钉钉机器人列表
      tags:
      - dingtalk-bots
    post:
      consumes:
      - application/json
      parameters:
      - description: 机器人配置
        in: body
        name: bot
        required: true
        schema:
          $ref: '#/definitions/model.CreateDingTalkBotReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.DingTalkBot'
              type: object
      security:
      - Bearer: []
      summary: 创建钉钉机器人配置
      tags:
      - dingtalk-bots
  /dingtalk-bots/{id}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: 机器人ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除钉钉机器人配置
      tags:
      - dingtalk-bots
    get:
      consumes:
      - application/json
      parameters:
      - description: 机器人ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.DingTalkBot'
              type: object
      security:
      - Bearer: []
      summary: 获取钉钉机器人详情
      tags:
      - dingtalk-bots
    put:
      consumes:
      - application/json
      parameters:
      - description: 机器人ID
        in: path
        name: id
        required: true
        type: integer
      - description: 机器人配置
        in: body
        name: bot
        required: true
        schema:
          $ref: '#/definitions/model.UpdateDingTalkBotReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新钉钉机器人配置
      tags:
      - dingtalk-bots
  /dingtalk-bots/{id}/test:
    post:
      consumes:
      - application/json
      parameters:
      - description: 机器人ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 测试钉钉机器人连接
      tags:
      - dingtalk-bots
  /dingtalk-bots/{id}/test-callback:
    post:
      consumes:
      - application/json
      parameters:
      - description: 机器人ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 测试 Stream 机器人接收回调
      tags:
      - dingtalk-bots
  /dish-categories:
    get:
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.DishCategory'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 分类列表
      tags:
      - dish-categories
    post:
      consumes:
      - application/json
      parameters:
      - description: 分类数据
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.CreateDishCategoryReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建菜品分类
      tags:
      - dish-categories
  /dish-categories/{id}:
    delete:
      parameters:
      - description: 分类ID
        in: path
        name: id
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除菜品分类
      tags:
      - dish-categories
    put:
      consumes:
      - application/json
      parameters:
      - description: 分类ID
        in: path
        name: id
        required: true
        type: integer
      - description: 分类数据
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.UpdateDishCategoryReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新菜品分类
      tags:
      - dish-categories
  /dish-categories/reorder:
    post:
      consumes:
      - application/json
      parameters:
      - description: 排序数据
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.ReorderDishCategoriesReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 分类排序
      tags:
      - dish-categories
  /dishes:
    get:
      consumes:
      - application/json
      description: 获取当前门店的菜品列表，支持分页
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 分类ID
        in: query
        name: category_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: '分页 meta: total,page,page_size,page_count,has_more'
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Dish'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 菜品列表
      tags:
      - dishes
    post:
      consumes:
      - application/json
      description: 创建新菜品（自动关联当前门店）
      parameters:
      - description: 菜品信息
        in: body
        name: dish
        required: true
        schema:
          $ref: '#/definitions/model.CreateDishReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建菜品
      tags:
      - dishes
  /dishes/{id}:
    delete:
      consumes:
      - application/json
      description: 删除菜品
      parameters:
      - description: 菜品ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除菜品
      tags:
      - dishes
    get:
      consumes:
      - application/json
      description: 获取菜品详细信息
      parameters:
      - description: 菜品ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Dish'
              type: object
      security:
      - Bearer: []
      summary: 获取菜品详情
      tags:
      - dishes
    put:
      consumes:
      - application/json
      description: 更新菜品信息（含上下架）
      parameters:
      - description: 菜品ID
        in: path
        name: id
        required: true
        type: integer
      - description: 菜品信息
        in: body
        name: dish
        required: true
        schema:
          $ref: '#/definitions/model.UpdateDishReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新菜品信息
      tags:
      - dishes
  /dishes/by-category:
    get:
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.DishCategory'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 分类及菜品列表
      tags:
      - dish-categories
  /menu-reports:
    get:
      consumes:
      - application/json
      description: 获取当前门店的报菜记录单列表，支持分页和日期范围筛选
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 开始日期 (YYYY-MM-DD)
        in: query
        name: start_date
        type: string
      - description: 结束日期 (YYYY-MM-DD)
        in: query
        name: end_date
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '分页 meta: total,page,page_size,page_count,has_more'
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.MenuReportOrder'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 报菜记录单列表
      tags:
      - menu-reports
    post:
      consumes:
      - application/json
      description: 创建新的报菜记录单（包含报菜详情列表，自动关联当前门店和操作员）
      parameters:
      - description: 报菜记录单信息
        in: body
        name: order
        required: true
        schema:
          $ref: '#/definitions/model.CreateMenuReportOrderReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.MenuReportOrder'
              type: object
      security:
      - Bearer: []
      summary: 创建报菜记录单
      tags:
      - menu-reports
  /menu-reports/{id}:
    delete:
      consumes:
      - application/json
      description: 删除报菜记录单（会同时删除关联的报菜详情）
      parameters:
      - description: 报菜记录单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除报菜记录单
      tags:
      - menu-reports
    get:
      consumes:
      - application/json
      description: 获取报菜记录单详细信息（包含报菜详情列表）
      parameters:
      - description: 报菜记录单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.MenuReportOrder'
              type: object
      security:
      - Bearer: []
      summary: 获取报菜记录单详情
      tags:
      - menu-reports
    put:
      consumes:
      - application/json
      description: 更新报菜记录单信息
      parameters:
      - description: 报菜记录单ID
        in: path
        name: id
        required: true
        type: integer
      - description: 报菜记录单信息
        in: body
        name: order
        required: true
        schema:
          $ref: '#/definitions/model.UpdateMenuReportOrderReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新报菜记录单
      tags:
      - menu-reports
  /menu-reports/{id}/download:
    get:
      consumes:
      - application/json
      description: 下载指定报菜记录单的Excel文件
      parameters:
      - description: 报菜记录单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
      responses:
        "200":
          description: Excel文件
          schema:
            type: file
      security:
      - Bearer: []
      summary: 下载报菜记录单Excel
      tags:
      - menu-reports
  /menu-reports/statistics:
    get:
      consumes:
      - application/json
      description: 获取指定日期范围的报菜统计数量
      parameters:
      - description: 开始日期 (YYYY-MM-DD)
        in: query
        name: start_date
        required: true
        type: string
      - description: 结束日期 (YYYY-MM-DD)
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.MenuReportStats'
              type: object
      security:
      - Bearer: []
      summary: 获取统计数据
      tags:
      - menu-reports
  /menus:
    get:
      consumes:
      - application/json
      description: 获取所有菜单列表（平铺形式）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Menu'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 菜单列表
      tags:
      - menus
    post:
      consumes:
      - application/json
      description: 创建新菜单（仅总部管理员）
      parameters:
      - description: 菜单信息
        in: body
        name: menu
        required: true
        schema:
          $ref: '#/definitions/model.CreateMenuReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建菜单
      tags:
      - menus
  /menus/{id}:
    delete:
      consumes:
      - application/json
      description: 删除菜单（仅总部管理员）
      parameters:
      - description: 菜单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除菜单
      tags:
      - menus
    get:
      consumes:
      - application/json
      description: 获取菜单详细信息
      parameters:
      - description: 菜单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Menu'
              type: object
      security:
      - Bearer: []
      summary: 获取菜单详情
      tags:
      - menus
    put:
      consumes:
      - application/json
      description: 更新菜单信息（仅总部管理员）
      parameters:
      - description: 菜单ID
        in: path
        name: id
        required: true
        type: integer
      - description: 菜单信息
        in: body
        name: menu
        required: true
        schema:
          $ref: '#/definitions/model.UpdateMenuReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新菜单
      tags:
      - menus
  /menus/assign-role:
    post:
      consumes:
      - application/json
      description: 为角色分配默认菜单权限（仅总部管理员）
      parameters:
      - description: 分配信息
        in: body
        name: assignment
        required: true
        schema:
          $ref: '#/definitions/model.AssignMenusToRoleReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 为角色分配菜单
      tags:
      - menus
  /menus/assign-store-role:
    post:
      consumes:
      - application/json
      description: 为特定门店的角色定制菜单权限（总部管理员或门店管理员）
      parameters:
      - description: 分配信息
        in: body
        name: assignment
        required: true
        schema:
          $ref: '#/definitions/model.AssignStoreMenusReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 为门店角色分配菜单
      tags:
      - menus
  /menus/copy-store:
    post:
      consumes:
      - application/json
      description: 将一个门店的菜单配置复制到另一个门店（仅总部管理员）
      parameters:
      - description: 复制信息
        in: body
        name: copy
        required: true
        schema:
          $ref: '#/definitions/model.CopyStoreMenusReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 复制门店菜单权限
      tags:
      - menus
  /menus/role:
    get:
      consumes:
      - application/json
      description: 获取角色的默认菜单权限（树形结构）
      parameters:
      - description: 角色ID
        in: query
        name: role_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Menu'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取角色菜单
      tags:
      - menus
  /menus/role-ids:
    get:
      consumes:
      - application/json
      description: 获取角色的所有菜单ID（用于权限回显）
      parameters:
      - description: 角色ID
        in: query
        name: role_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    type: integer
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取角色菜单ID列表
      tags:
      - menus
  /menus/role-permissions:
    get:
      consumes:
      - application/json
      description: 获取角色的所有菜单及其权限位（用于权限编辑回显）
      parameters:
      - description: 角色ID
        in: query
        name: role_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  additionalProperties:
                    format: int32
                    type: integer
                  type: object
              type: object
      security:
      - Bearer: []
      summary: 获取角色菜单权限映射
      tags:
      - menus
  /menus/store-role:
    get:
      consumes:
      - application/json
      description: 获取特定门店角色的菜单权限（树形结构）
      parameters:
      - description: 门店ID
        in: query
        name: store_id
        required: true
        type: integer
      - description: 角色ID
        in: query
        name: role_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Menu'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取门店角色菜单
      tags:
      - menus
  /menus/store-role-ids:
    get:
      consumes:
      - application/json
      description: 获取门店角色的所有菜单ID（用于权限回显）
      parameters:
      - description: 门店ID
        in: query
        name: store_id
        required: true
        type: integer
      - description: 角色ID
        in: query
        name: role_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    type: integer
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取门店角色菜单ID列表
      tags:
      - menus
  /menus/store-role-permissions:
    get:
      consumes:
      - application/json
      description: 获取门店角色的所有菜单及其权限位（用于权限编辑回显）
      parameters:
      - description: 门店ID
        in: query
        name: store_id
        required: true
        type: integer
      - description: 角色ID
        in: query
        name: role_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  additionalProperties:
                    format: int32
                    type: integer
                  type: object
              type: object
      security:
      - Bearer: []
      summary: 获取门店角色菜单权限映射
      tags:
      - menus
  /menus/tree:
    get:
      consumes:
      - application/json
      description: 获取菜单树形结构
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Menu'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 菜单树形结构
      tags:
      - menus
  /menus/user-menus:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户的菜单树（用于渲染后台侧边栏）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Menu'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取当前用户菜单
      tags:
      - menus
  /menus/user-permissions:
    get:
      consumes:
      - application/json
      description: 获取当前用户所有可访问的权限标识（用于前端按钮级权限控制）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    type: string
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取当前用户权限标识列表
      tags:
      - menus
  /purchase-orders:
    get:
      parameters:
      - description: 门店ID
        in: query
        name: store_id
        type: integer
      - description: 供应商ID
        in: query
        name: supplier_id
        type: integer
      - description: 状态
        in: query
        name: status
        type: integer
      - description: 开始日期
        in: query
        name: start_date
        type: string
      - description: 结束日期
        in: query
        name: end_date
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.PurchaseOrder'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 采购单列表
      tags:
      - purchase-orders
    post:
      consumes:
      - application/json
      parameters:
      - description: 采购单信息
        in: body
        name: order
        required: true
        schema:
          $ref: '#/definitions/model.CreatePurchaseOrderReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.PurchaseOrder'
              type: object
      security:
      - Bearer: []
      summary: 创建采购单
      tags:
      - purchase-orders
  /purchase-orders/{id}:
    delete:
      parameters:
      - description: 采购单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除采购单
      tags:
      - purchase-orders
    get:
      parameters:
      - description: 采购单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.PurchaseOrder'
              type: object
      security:
      - Bearer: []
      summary: 获取采购单详情
      tags:
      - purchase-orders
    put:
      consumes:
      - application/json
      parameters:
      - description: 采购单ID
        in: path
        name: id
        required: true
        type: integer
      - description: 采购单信息
        in: body
        name: order
        required: true
        schema:
          $ref: '#/definitions/model.UpdatePurchaseOrderReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新采购单
      tags:
      - purchase-orders
  /purchase-orders/{id}/by-supplier:
    get:
      parameters:
      - description: 采购单ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 按供应商分组获取采购单明细
      tags:
      - purchase-orders
  /report/robots:
    get:
      consumes:
      - application/json
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 开始日期 (YYYY-MM-DD)
        in: query
        name: start_date
        type: string
      - description: 结束日期 (YYYY-MM-DD)
        in: query
        name: end_date
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.MenuReport'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 获取报菜记录列表
      tags:
      - report-bots
    post:
      consumes:
      - application/json
      parameters:
      - description: 报菜信息
        in: body
        name: bot
        required: true
        schema:
          $ref: '#/definitions/model.CreateMenuReportReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建报菜机器人（创建报菜记录）
      tags:
      - report-bots
  /report/robots/{id}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: 报菜记录ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除报菜记录
      tags:
      - report-bots
    get:
      consumes:
      - application/json
      parameters:
      - description: 报菜记录ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.MenuReport'
              type: object
      security:
      - Bearer: []
      summary: 获取报菜记录详情
      tags:
      - report-bots
    put:
      consumes:
      - application/json
      parameters:
      - description: 报菜记录ID
        in: path
        name: id
        required: true
        type: integer
      - description: 报菜信息
        in: body
        name: bot
        required: true
        schema:
          $ref: '#/definitions/model.UpdateMenuReportReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新报菜记录
      tags:
      - report-bots
  /roles:
    get:
      description: 获取角色列表（排除admin），支持 keyword 模糊查询 name/code/description，status=0|1
        过滤
      parameters:
      - description: 关键字(模糊匹配 name/code/description)
        in: query
        name: keyword
        type: string
      - description: 状态过滤 1=启用 0=禁用
        in: query
        name: status
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Role'
                  type: array
              type: object
      summary: 获取角色列表
      tags:
      - 角色管理
    post:
      consumes:
      - application/json
      description: 新增一个角色，status：1=启用 0=禁用（默认为1）
      parameters:
      - description: 角色信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.Role'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Role'
              type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 创建角色
      tags:
      - 角色管理
  /roles/{id}:
    delete:
      description: 根据ID删除角色
      parameters:
      - description: 角色ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 删除角色
      tags:
      - 角色管理
    get:
      description: 根据ID获取角色信息
      parameters:
      - description: 角色ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Role'
              type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 获取角色详情
      tags:
      - 角色管理
    put:
      consumes:
      - application/json
      description: 根据ID更新角色信息，可局部更新，仅传需要修改的字段；status=1启用 0禁用
      parameters:
      - description: 角色ID
        in: path
        name: id
        required: true
        type: integer
      - description: 仅传需要修改的字段 (name, code, description, status)，未传字段保持原值
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.UpdateRoleReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Role'
              type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 更新角色
      tags:
      - 角色管理
  /store-suppliers:
    get:
      description: 获取当前门店已绑定的所有供应商商品，管理员可查看指定门店
      parameters:
      - description: 门店ID（管理员可指定，普通用户使用当前门店）
        in: query
        name: store_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.StoreSupplierProduct'
                  type: array
              type: object
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 获取门店绑定的供应商商品列表
      tags:
      - 门店供应商管理
  /store-suppliers/bind:
    post:
      consumes:
      - application/json
      description: 将供应商商品绑定到指定门店，支持批量绑定
      parameters:
      - description: 绑定信息
        in: body
        name: binding
        required: true
        schema:
          $ref: '#/definitions/model.BindStoreSupplierReq'
      produces:
      - application/json
      responses:
        "200":
          description: 绑定成功
          schema:
            $ref: '#/definitions/http.Response'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/http.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 门店绑定供应商商品
      tags:
      - 门店供应商管理
  /store-suppliers/default:
    put:
      consumes:
      - application/json
      description: 为门店设置某个供应商商品为默认选项
      parameters:
      - description: 设置信息
        in: body
        name: setting
        required: true
        schema:
          $ref: '#/definitions/model.SetDefaultSupplierReq'
      produces:
      - application/json
      responses:
        "200":
          description: 设置成功
          schema:
            $ref: '#/definitions/http.Response'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/http.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 设置默认供应商商品
      tags:
      - 门店供应商管理
  /store-suppliers/unbind:
    delete:
      consumes:
      - application/json
      description: 将供应商商品从指定门店解绑，支持批量解绑
      parameters:
      - description: 解绑信息
        in: body
        name: binding
        required: true
        schema:
          $ref: '#/definitions/model.BindStoreSupplierReq'
      produces:
      - application/json
      responses:
        "200":
          description: 解绑成功
          schema:
            $ref: '#/definitions/http.Response'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/http.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 门店解绑供应商商品
      tags:
      - 门店供应商管理
  /stores:
    get:
      consumes:
      - application/json
      description: 获取全部门店列表（不分页）
      produces:
      - application/json
      responses:
        "200":
          description: 返回全部门店数据，meta 包含 total
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Store'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 门店列表
      tags:
      - stores
    post:
      consumes:
      - application/json
      description: 创建新门店（仅总部管理员）
      parameters:
      - description: 门店信息
        in: body
        name: store
        required: true
        schema:
          $ref: '#/definitions/model.CreateStoreReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建门店
      tags:
      - stores
  /stores/{id}:
    delete:
      consumes:
      - application/json
      description: 删除门店（仅总部管理员）
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除门店
      tags:
      - stores
    get:
      consumes:
      - application/json
      description: 获取门店详细信息
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Store'
              type: object
      security:
      - Bearer: []
      summary: 获取门店详情
      tags:
      - stores
    put:
      consumes:
      - application/json
      description: 更新门店信息（仅总部管理员）
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      - description: 门店信息
        in: body
        name: store
        required: true
        schema:
          $ref: '#/definitions/model.UpdateStoreReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新门店信息
      tags:
      - stores
  /stores/{id}/dish-categories:
    get:
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.DishCategory'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 指定门店分类列表
      tags:
      - dish-categories
    post:
      consumes:
      - application/json
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      - description: 分类数据
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.CreateDishCategoryReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.DishCategory'
              type: object
      security:
      - Bearer: []
      summary: 指定门店创建菜品分类
      tags:
      - dish-categories
  /stores/{id}/dish-categories/{cid}:
    delete:
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      - description: 分类ID
        in: path
        name: cid
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除指定门店的菜品分类
      tags:
      - dish-categories
    put:
      consumes:
      - application/json
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      - description: 分类ID
        in: path
        name: cid
        required: true
        type: integer
      - description: 分类更新数据
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.UpdateDishCategoryReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新指定门店的菜品分类
      tags:
      - dish-categories
  /stores/{id}/dish-categories/{cid}/dishes:
    get:
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      - description: 分类ID
        in: path
        name: cid
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Dish'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 门店分类下菜品列表
      tags:
      - dish-categories
    post:
      consumes:
      - application/json
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      - description: 分类ID
        in: path
        name: cid
        required: true
        type: integer
      - description: 菜品数据 (category_id 忽略, 以路径分类为准)
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.CreateDishReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Dish'
              type: object
      security:
      - Bearer: []
      summary: 在门店指定分类下创建菜品
      tags:
      - dishes
  /stores/{id}/dish-categories/{cid}/dishes/{did}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      - description: 分类ID
        in: path
        name: cid
        required: true
        type: integer
      - description: 菜品ID
        in: path
        name: did
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除门店指定分类下的菜品
      tags:
      - dishes
    put:
      consumes:
      - application/json
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      - description: 分类ID
        in: path
        name: cid
        required: true
        type: integer
      - description: 菜品ID
        in: path
        name: did
        required: true
        type: integer
      - description: 菜品更新数据（忽略 category_id 防止跨分类）
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/model.UpdateDishReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 在门店指定分类下更新菜品
      tags:
      - dishes
  /stores/{id}/dishes/{did}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      - description: 菜品ID
        in: path
        name: did
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除指定门店的菜品
      tags:
      - dishes
    put:
      consumes:
      - application/json
      parameters:
      - description: 门店ID
        in: path
        name: id
        required: true
        type: integer
      - description: 菜品ID
        in: path
        name: did
        required: true
        type: integer
      - description: 菜品信息
        in: body
        name: dish
        required: true
        schema:
          $ref: '#/definitions/model.UpdateDishReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新指定门店的菜品
      tags:
      - dishes
  /stores/all:
    get:
      description: 返回全部门店列表。默认仅总部管理员可访问，如需开放可去掉权限判断
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Store'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 全部门店（无分页）
      tags:
      - stores
  /supplier-categories:
    get:
      parameters:
      - description: 供应商ID
        in: query
        name: supplier_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.SupplierCategory'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 供应商分类列表
      tags:
      - supplier-categories
    post:
      consumes:
      - application/json
      parameters:
      - description: 分类信息
        in: body
        name: category
        required: true
        schema:
          $ref: '#/definitions/model.CreateSupplierCategoryReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建供应商分类
      tags:
      - supplier-categories
  /supplier-categories/{id}:
    delete:
      parameters:
      - description: 分类ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除供应商分类
      tags:
      - supplier-categories
    put:
      consumes:
      - application/json
      parameters:
      - description: 分类ID
        in: path
        name: id
        required: true
        type: integer
      - description: 分类信息
        in: body
        name: category
        required: true
        schema:
          $ref: '#/definitions/model.UpdateSupplierCategoryReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新供应商分类
      tags:
      - supplier-categories
  /supplier-products:
    get:
      parameters:
      - description: 供应商ID
        in: query
        name: supplier_id
        type: integer
      - description: 分类ID
        in: query
        name: category_id
        type: integer
      - description: 关键词
        in: query
        name: keyword
        type: string
      - description: 状态
        in: query
        name: status
        type: integer
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.SupplierProduct'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 供应商商品列表
      tags:
      - supplier-products
    post:
      consumes:
      - application/json
      parameters:
      - description: 商品信息
        in: body
        name: product
        required: true
        schema:
          $ref: '#/definitions/model.CreateSupplierProductReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建供应商商品
      tags:
      - supplier-products
  /supplier-products/{id}:
    delete:
      parameters:
      - description: 商品ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除供应商商品
      tags:
      - supplier-products
    get:
      parameters:
      - description: 商品ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.SupplierProduct'
              type: object
      security:
      - Bearer: []
      summary: 获取供应商商品详情
      tags:
      - supplier-products
    put:
      consumes:
      - application/json
      parameters:
      - description: 商品ID
        in: path
        name: id
        required: true
        type: integer
      - description: 商品信息
        in: body
        name: product
        required: true
        schema:
          $ref: '#/definitions/model.UpdateSupplierProductReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新供应商商品
      tags:
      - supplier-products
  /suppliers:
    get:
      consumes:
      - application/json
      description: 获取供应商列表（支持分页和搜索）
      parameters:
      - description: 搜索关键词（名称或编码）
        in: query
        name: keyword
        type: string
      - description: 状态筛选（0=禁用，1=启用）
        in: query
        name: status
        type: integer
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 20
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Supplier'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 供应商列表
      tags:
      - suppliers
    post:
      consumes:
      - application/json
      description: 创建新供应商（仅管理员）
      parameters:
      - description: 供应商信息
        in: body
        name: supplier
        required: true
        schema:
          $ref: '#/definitions/model.CreateSupplierReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建供应商
      tags:
      - suppliers
  /suppliers/{id}:
    delete:
      consumes:
      - application/json
      description: 删除供应商（仅管理员）
      parameters:
      - description: 供应商ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除供应商
      tags:
      - suppliers
    get:
      consumes:
      - application/json
      description: 获取供应商详细信息
      parameters:
      - description: 供应商ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Supplier'
              type: object
      security:
      - Bearer: []
      summary: 获取供应商详情
      tags:
      - suppliers
    put:
      consumes:
      - application/json
      description: 更新供应商信息（仅管理员）
      parameters:
      - description: 供应商ID
        in: path
        name: id
        required: true
        type: integer
      - description: 供应商信息
        in: body
        name: supplier
        required: true
        schema:
          $ref: '#/definitions/model.UpdateSupplierReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新供应商信息
      tags:
      - suppliers
  /users:
    get:
      consumes:
      - application/json
      description: 获取用户列表。总部管理员返回全部用户（跨门店，支持分页），门店管理员返回其门店用户（分页）
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      - description: 模糊关键字匹配用户名或手机号任意部分，如手机号135
        in: query
        name: keyword
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 支持 keyword 模糊匹配用户名或手机号；总部管理员查看全部用户，门店管理员仅查看本门店用户
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.User'
                  type: array
              type: object
      security:
      - Bearer: []
      summary: 用户列表
      tags:
      - users
    post:
      consumes:
      - application/json
      description: 创建新用户
      parameters:
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/model.CreateUserReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 创建用户
      tags:
      - users
  /users/{id}:
    delete:
      consumes:
      - application/json
      description: 删除用户（管理员可删除任意用户，门店管理员只能删除本门店用户）
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 删除用户
      tags:
      - users
    get:
      consumes:
      - application/json
      description: 获取用户详情
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.User'
              type: object
      security:
      - Bearer: []
      summary: 获取用户
      tags:
      - users
    put:
      consumes:
      - application/json
      description: 更新用户信息
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/model.UpdateUserReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新用户
      tags:
      - users
  /users/{id}/reset-password:
    post:
      consumes:
      - application/json
      description: 将指定用户密码重置为 123456
      parameters:
      - description: 用户ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 重置用户密码
      tags:
      - users
  /users/profile:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户的详细信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/http.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.User'
              type: object
      security:
      - Bearer: []
      summary: 获取用户个人信息
      tags:
      - users
    put:
      consumes:
      - application/json
      description: 更新当前登录用户的个人信息
      parameters:
      - description: 用户信息
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/model.UpdateUserReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/http.Response'
      security:
      - Bearer: []
      summary: 更新个人信息
      tags:
      - users
schemes:
- http
- https
securityDefinitions:
  Bearer:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
